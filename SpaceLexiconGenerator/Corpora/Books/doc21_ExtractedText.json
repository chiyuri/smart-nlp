{"content": "\nSpace Technology Library\n\nFrederick A.\u00a0Leve\nBrian\u00a0J.\u00a0Hamilton\nMason\u00a0A. Peck\n\nSpacecraft \nMomentum \nControl \nSystems\n\n\n\nSpacecraft Momentum Control Systems\n\n\n\nSPACE TECHNOLOGY LIBRARY\nPublished jointly by Microcosm Press and Springer\n\nThe Space Technology Library Editorial Board\n\nManaging Editor: James R. Wertz (Microcosm, Inc., El Segundo, CA)\n\nEditorial Board: Roland Dor\u00e9 (Professor and Director International Space Uni-\nversity, Strasbourg)\nTom Logsdon (Senior member of Technical Staff, Space Divi-\nsion, Rockwell International)\nF. Landis Markley (NASA, Goddard Space Flight Center)\nRobert G. Melton (Professor of Aerospace Engineering, Penn-\nsylvania State University)\nKeiken Ninomiya (Professor, Institute of Space & Astronauti-\ncal Science)\nJehangir J. Pocha (Letchworth, Herts.)\nRex W. Ridenoure (CEO and Co-founder at Ecliptic Enter-\nprises Corporation)\nGael Squibb (Jet Propulsion Laboratory, California Institute of\nTechnology)\nMartin Sweeting (Professor of Satellite Engineering, Univer-\nsity of Surrey)\nDavid A. Vallado (Senior Research Astrodynamicist, CSSI/\nAGI)\nRichard Van Allen (Vice President and Director, Space Sys-\ntems Division, Microcosm, Inc.)\n\nMore information about this series at http://www.springer.com/series/6575\n\nhttp://www.springer.com/series/6575\n\n\nFrederick A. Leve \u2022 Brian J. Hamilton\nMason A. Peck\n\nSpacecraft Momentum\nControl Systems\n\n123\n\n\n\nFrederick A. Leve\nSpace Vehicles Directorate\nAir Force Research Laboratory\nKirtland A.F.B., NM, USA\n\nMason A. Peck\nCornell University\nIthaca, NY, USA\n\nBrian J. Hamilton\nHoneywell\nGlendale, AZ, USA\n\nSpace Technology Library\nISBN 978-3-319-22562-3 ISBN 978-3-319-22563-0 (eBook)\nDOI 10.1007/978-3-319-22563-0\n\nLibrary of Congress Control Number: 2015947342\n\nSpringer Cham Heidelberg New York Dordrecht London\n\u00a9 Springer International Publishing Switzerland 2015\nThis work is subject to copyright. All rights are reserved by the Publisher, whether the whole or part of\nthe material is concerned, specifically the rights of translation, reprinting, reuse of illustrations, recitation,\nbroadcasting, reproduction on microfilms or in any other physical way, and transmission or information\nstorage and retrieval, electronic adaptation, computer software, or by similar or dissimilar methodology\nnow known or hereafter developed.\nThe use of general descriptive names, registered names, trademarks, service marks, etc. in this publication\ndoes not imply, even in the absence of a specific statement, that such names are exempt from the relevant\nprotective laws and regulations and therefore free for general use.\nThe publisher, the authors and the editors are safe to assume that the advice and information in this book\nare believed to be true and accurate at the date of publication. Neither the publisher nor the authors or\nthe editors give a warranty, express or implied, with respect to the material contained herein or for any\nerrors or omissions that may have been made.\n\nPrinted on acid-free paper\n\nSpringer International Publishing AG Switzerland is part of Springer Science+Business Media (www.\nspringer.com)\n\nwww.springer.com\nwww.springer.com\n\n\nPreface\n\nIt\u2019s remarkable how often we, the authors, have had a similar experience. At a\nconference, or during a break at a technical meeting, someone asks \u201ccan you\nrecommend a good book about CMGs and reaction wheels?\u201d\n\nThe answer is always about the same: \u201cWell, there\u2019s this spacecraft dynamics\nbook and that spacecraft design book, and the new edition of that old reference book\nwe all use, but none of them really talk about momentum control in any depth. You\nprobably already know as much as you\u2019ll find there.\u201d Then there\u2019s a pause. \u201cNot\nthat those books are bad; I\u2019m not saying that. They\u2019re a decent start for a certain\naudience, such as students who have never worked on a flight program.\u201d\n\n\u201cHow about academic articles?\u201d\n\u201cSure, there are a few helpful survey papers and some useful older stuff\u2014\n\nespecially from the \u201970s. For some reason they really seemed to know what they\nwere doing back then.\u201d Another awkward pause. \u201cI don\u2019t really want to go digging\ninto all that.\u201d Then, inevitably, \u201cmaybe you should just write a book.\u201d\n\nSo that\u2019s what we did.\nThe reader will find that this book differs from other books on spacecraft\n\ndynamics and control. Others provide a broad overview of actuators, sensors, and\nfeedback-control architectures without ever going into these important matters\nof implementation. And while there exist whole books on propulsive actuators,\noffering useful depth in the design and operation of rocket engines such as those\nused for reaction control, there is nothing analogous for momentum actuators.\nBut omitting momentum actuators from a treatment of spacecraft design is like\nexplaining all about automobiles, except for the engine and the transmission. So,\nfinally, there\u2019s a book that addresses the crucial matters of what kind and how many\nmomentum devices to implement, how they should be sized, and how to control the\narray of them.\n\nThis book is an effort to offer a complete picture of momentum actuators\u2014\nspinning rotors and gimbaled devices\u2014for use in attitude control of spacecraft.\nIt\u2019s a picture that combines our diverse experience in government space systems\n(satellites for the Air Force, Navy, and NASA) as well as in the commercial space\nindustry and academia. The scope of this book extends from electromechanical\n\nv\n\n\n\nvi Preface\n\ndetails of individual actuators to space-system architecture issues of interest in\nspacecraft concept development. We discuss the foundational rigid- and flexible-\nbody dynamics, the subtle mathematics of steering multiple devices within an array,\nand the applications of these technologies.\n\nThese momentum actuators are at the heart of contemporary spacecraft that\nperform Earth imaging. The rapid growth of commercial success in this application\narea since the beginning of the twenty-first century is ultimately due to the\ntechnological capabilities that these actuators offer. In the decades to come, our\nindustry is likely to see new applications: asteroid mining, in-orbit servicing and\nrepair of satellites, and new human-space missions, all of which will require high\ntorque and momentum storage. Small spacecraft, now the most commonly launched\ntype of satellite, are only just beginning to incorporate sophisticated momentum\ncontrol, thanks to entrepreneurial investment and a new generation of passionate\nspacecraft technologists. The momentum devices described in this book enable\ncontemporary spacecraft and will make the future possible.\n\nThe authors hope that the breadth of information offered here, most of which\nhas never been collected in one place, will serve the needs of this new generation\nof spacecraft engineers. And, at least as important, we\u2019ll have an answer to that\nperennial question, \u201ccan you recommend a book about this stuff?\u201d\n\nKirtland A.F.B., NM, USA Frederick A. Leve\nGlendale, AZ, USA Brian J. Hamilton\nIthaca, NY, USA Mason A. Peck\n\n\n\nContents\n\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1\n1.1 Spacecraft Design, Commercial Space, and Angular Momentum . 1\n1.2 Momentum Control Devices and Attitude Control Systems . . . . . . . 5\n1.3 A Brief History of Spin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\n1.4 The Proliferation of Momentum Control. . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n1.5 About This Book . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n\n2 Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n2.1 Spacecraft Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n\n2.1.1 GEO Communications Spacecraft . . . . . . . . . . . . . . . . . . . . . . . . . 15\n2.1.2 Agile Spacecraft Missions and ConOps . . . . . . . . . . . . . . . . . . . 18\n2.1.3 Space Stations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n2.1.4 Small Spacecraft . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n2.1.5 Satellite Servicing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n2.1.6 Asteroid Grappling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n2.1.7 Space Robotics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n\n2.2 Terrestrial Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\n2.2.1 Brennan\u2019s Monorail . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30\n2.2.2 Wolseley\u2019s Two-Wheeled Wonder Car . . . . . . . . . . . . . . . . . . . . 30\n2.2.3 Lit Motors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n2.2.4 Nautical Roll and Pitch Stabilization . . . . . . . . . . . . . . . . . . . . . . 31\n\n2.3 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n\n3 Requirements Development for Momentum Control Systems . . . . . . . . 35\n3.1 Quantifying Agility Requirements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n\n3.1.1 Slew Angle vs. Time . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n3.1.2 Performance Ratios: Vehicle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39\n3.1.3 Performance Ratios: Momentum System. . . . . . . . . . . . . . . . . . 40\n3.1.4 Vehicle Velocity . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\n3.1.5 Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42\n\nvii\n\n\n\nviii Contents\n\n3.2 Momentum Device Technology . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42\n3.2.1 Torque, Momentum, and De-mystifying Precession . . . . . . 42\n3.2.2 The Reaction Wheel . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44\n3.2.3 The Double-Gimbal Control Moment\n\nGyroscope (DGCMG) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45\n3.2.4 The Single-Gimbal Control Moment\n\nGyroscope (SGCMG) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\n3.2.5 Vehicle Rate and the SGCMG Gimbal Torquer . . . . . . . . . . . 47\n3.2.6 Torque-Amplification Revisited . . . . . . . . . . . . . . . . . . . . . . . . . . . 48\n\n3.3 Momentum Device Technology Tradeoffs . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n3.3.1 Momentum and Torque. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n3.3.2 Power . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\n3.3.3 Vibration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\n3.3.4 Torque Accuracy. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53\n3.3.5 Array Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n\n3.4 Guidelines for Selecting Momentum Device Technology. . . . . . . . . . 54\n3.5 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\n\n4 Dynamics of Momentum-Control Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57\n4.1 Notation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57\n4.2 Spacecraft Attitude and Momentum-Device Kinematics. . . . . . . . . . . 61\n4.3 Equations of Motion for a Gyrostat with Balanced Rotors . . . . . . . . . 65\n4.4 Relative Equilibria and Stability of Gyrostats . . . . . . . . . . . . . . . . . . . . . . 67\n\n4.4.1 RWA Spacecraft . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\n4.4.2 CMG Spacecraft . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n4.4.3 Large-Angle Slews . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\n\n4.5 Control-Moment Gyroscopes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77\n4.6 Actuator Jacobians . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\n4.7 Rotor and Gimbal Structural Dynamics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84\n4.8 Effects of Scaling CMG Actuators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90\n\n4.8.1 Torque Amplification Degradation with Scaling . . . . . . . . . . 92\n4.9 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93\n\n5 Singularities of Control Moment Gyroscopes . . . . . . . . . . . . . . . . . . . . . . . . . . . 95\n5.1 Singular Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95\n5.2 Coordinate Singularities Versus Geometric Singularities . . . . . . . . . . 96\n\n5.2.1 Coordinate Singularities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96\n5.2.2 Singularities Associated with Geometric Constraints. . . . . 99\n\n5.3 Control Moment Gyroscope Singularities . . . . . . . . . . . . . . . . . . . . . . . . . . 101\n5.3.1 The Concept of CMG Singularity . . . . . . . . . . . . . . . . . . . . . . . . . 102\n\n5.4 Double-Gimbal Control Moment Gyroscope Singularities . . . . . . . . 104\n5.4.1 DGCMG Gimbal Lock . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105\n\n5.5 Single-Gimbal Control Moment Gyroscope Singularities . . . . . . . . . 105\n5.5.1 SGCMG Gimbal Lock . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106\n\n\n\nContents ix\n\n5.6 Classification of Singularities. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106\n5.7 Singularity Conditions Defined Mathematically . . . . . . . . . . . . . . . . . . . . 108\n\n5.7.1 Determination of Singularity Degeneracy . . . . . . . . . . . . . . . . . 111\n5.8 Hyperbolic Singularities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112\n\n5.8.1 Non-degenerate Hyperbolic Singularities . . . . . . . . . . . . . . . . . 112\n5.8.2 Degenerate Hyperbolic Singularities . . . . . . . . . . . . . . . . . . . . . . 114\n\n5.9 Elliptic Singularities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115\n5.9.1 External Elliptic Singularities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115\n5.9.2 Internal Elliptic singularities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117\n\n5.10 Passability and Impassability of Singular Points . . . . . . . . . . . . . . . . . . . 118\n5.10.1 Impassable Singular Points . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119\n5.10.2 Passable Singular Points . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121\n\n5.11 Singular Surfaces for SGCMG .. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122\n5.12 Characteristics of Singular Surfaces. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125\n5.13 Numerical Sensitivity in the Vicinity of a Singularity . . . . . . . . . . . . . . 126\n5.14 Variable-Speed Control Moment Gyroscope Singularities . . . . . . . . . 127\n5.15 Zero-Momentum Spin Up . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128\n\n5.15.1 RWA Zero-Momentum Spin-Up . . . . . . . . . . . . . . . . . . . . . . . . . . . 129\n5.15.2 Four-CMG Roof Zero-Momentum Spin-Up . . . . . . . . . . . . . . 129\n5.15.3 Four CMG Pyramid Zero-Momentum Spin-Up. . . . . . . . . . . 130\n\n5.16 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130\n\n6 Momentum-Control System Array Architectures . . . . . . . . . . . . . . . . . . . . . . 133\n6.1 The Nature of Momentum Devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133\n6.2 Momentum and Torque Capability of an Array of RWAs . . . . . . . . . . 134\n6.3 Momentum and Torque Capability of an Array of CMGs . . . . . . . . . 135\n6.4 Double-Gimbal CMG Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136\n6.5 Single-Gimbal CMG Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137\n\n6.5.1 Scissored Pairs of CMGs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138\n6.5.2 Collinear (Multiple-Type) Arrays . . . . . . . . . . . . . . . . . . . . . . . . . 139\n6.5.3 3/4 (3 of 4) Box Array . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143\n6.5.4 Pyramid Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143\n6.5.5 Dynamic Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145\n\n6.6 Blended Arrays and Other Designs. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146\n6.6.1 Double-Gimbal/Single-Gimbal Scissored Pairs . . . . . . . . . . . 146\n6.6.2 Langley \u201cSix-Pac\u201d . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147\n6.6.3 Single-Gimbal Six GAMS (Six-CMG\n\nPyramid Array) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148\n6.6.4 Scissored Pair with High-Torque Reaction Wheels . . . . . . . 149\n\n6.7 Variable-Speed CMG Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149\n6.8 Energy Storage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151\n6.9 Optimization and Arbitrary Array Configurations . . . . . . . . . . . . . . . . . . 152\n6.10 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154\n\n\n\nx Contents\n\n7 Steering Algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157\n7.1 CMG Steering Algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157\n7.2 Origin of Pseudoinverse Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160\n\n7.2.1 Blended Inverse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160\n7.2.2 Moore\u2013Penrose Inverse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160\n\n7.3 Singularity-Escape Algorithms (Torque-Error Algorithms). . . . . . . . 161\n7.3.1 Singularity Robust Inverse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161\n7.3.2 Singularity Direction Avoidance\n\nPseudoinverse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162\n7.3.3 Generalized Singularity Robust Inverse . . . . . . . . . . . . . . . . . . 163\n\n7.4 Singularity Avoidance Algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165\n7.4.1 Generalized Inverse Steering Law . . . . . . . . . . . . . . . . . . . . . . . . 165\n7.4.2 Local Gradient (LG) Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166\n7.4.3 Constrained Gimbal Angle or Angular\n\nMomentum Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167\n7.4.4 Limited Angular Momentum Methods . . . . . . . . . . . . . . . . . . . . 175\n\n7.5 Singularity Avoidance and Escape Algorithms . . . . . . . . . . . . . . . . . . . . . 177\n7.5.1 Hybrid Steering Logic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177\n7.5.2 Angular Momentum Artificial Potential\n\nSteering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178\n7.5.3 Feedback Steering Law . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179\n7.5.4 Optimal CMG Attitude Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180\n\n7.6 Variable Speed Control Moment Gyroscopes . . . . . . . . . . . . . . . . . . . . . . . 184\n7.7 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184\n\n8 Inner-Loop Control of Momentum Devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187\n8.1 Spin-Speed Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187\n\n8.1.1 CMG Spin-Speed Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187\n8.1.2 RWA Spin Speed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 188\n\n8.2 Gimbal Rate Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189\n8.2.1 Errors Mitigated by Gimbal Rate Loops . . . . . . . . . . . . . . . . . . 190\n8.2.2 Impact on Vehicle Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190\n8.2.3 Bandwidth Considerations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191\n8.2.4 Friction and ACS Limit Cycling . . . . . . . . . . . . . . . . . . . . . . . . . . . 192\n\n8.3 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192\n\n9 Motors in Space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193\n9.1 Motor Technology . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193\n9.2 Sizing a DC Motor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196\n\n9.2.1 Sizing a Brushless DC Motor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 197\n9.2.2 Electrical . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198\n9.2.3 Numerical Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 199\n\n9.3 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200\n\n\n\nContents xi\n\n10 Modeling Simulation and Test Beds . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201\n10.1 Math Modeling and Computer Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . 201\n\n10.1.1 First Principles . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202\n10.1.2 What Is the Question? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202\n10.1.3 Modularity . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204\n10.1.4 Choices of States . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204\n10.1.5 Polarities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 205\n10.1.6 Body Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206\n10.1.7 Attachment Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 208\n10.1.8 Integration. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210\n\n10.2 Hardware-in-the-Loop Test Beds . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210\n10.2.1 Precision Rotational Air-Bearing Systems . . . . . . . . . . . . . . . . 212\n10.2.2 Anisoelasticity . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214\n10.2.3 Active Mass Balancing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214\n10.2.4 Controlling the Mass-Balancing System . . . . . . . . . . . . . . . . . . 215\n\n10.3 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217\nReferences . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217\n\nA Extended Equations of Motion for Spacecraft with CMGs . . . . . . . . . . . . 219\nA.1 It Begins with A Particle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 219\nA.2 Components . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220\nA.3 Reference Frames for Spacecraft n-CMG System . . . . . . . . . . . . . . . . . . 221\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic\n\nEquations of Motion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221\nA.4.1 Spacecraft Angular Momentum. . . . . . . . . . . . . . . . . . . . . . . . . . . . 222\nA.4.2 CMG Gimbal Angular Momentum . . . . . . . . . . . . . . . . . . . . . . . . 224\nA.4.3 CMG Rotor Angular Momentum . . . . . . . . . . . . . . . . . . . . . . . . . . 226\nA.4.4 Spacecraft and Actuator Equations of Motion . . . . . . . . . . . . 228\n\nA.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 232\n\nB Stability Analysis of Momentum-Based Attitude Control Systems . . . 233\nB.1 Lyapunov Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233\nB.2 Rest-to-Rest Attitude Control. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 236\nB.3 Attitude and Angular Velocity Tracking Control . . . . . . . . . . . . . . . . . . . 239\nB.4 Steering Algorithm Effects on Attitude Regulation and Tracking . 240\nB.5 Summary. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242\n\nIndex . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243\n\n\n\n\n\nAuthor Biographies\n\nFrederick A. Leve, Research Aerospace Engineer at the Air Force Research\nLaboratory, Space Vehicles Directorate, received his Ph.D. in Aerospace Engineer-\ning from the University of Florida in 2010. While at the University of Florida,\nhe received the IAF Silver Hermann Oberth Medal and the AIAA Abe Zarem\nAward for Astronautics. Currently, he is the technical advisor to the Guidance,\nNavigation, and Controls Group and has published many papers in the area of\nattitude dynamics and control, specifically with respect to momentum control\nsystems and also performs research in under-actuated control, fault tolerant control,\ncontrol allocation, analytical mechanics, and system identification. Dr. Leve is a\nrecipient of the 2014 AFRL Early Career Award.\n\nBrian J. Hamilton, Engineering Fellow at Honeywell Aerospace, received a BSEE\nwith Honors from the University of Illinois, 1976. Mr. Hamilton has nearly 40\nyears of experience at Honeywell (formerly, Sperry) and has participated in the\ndevelopment of CMG technology since its infancy. In recent years, his research\nfocus has been on CMG array control and steering, and the general application of\nmomentum systems to agile spacecraft attitude control. Other areas of specialty\ninclude nonlinear modeling, controls design, system optimization, and active mag-\nnetic suspension. Mr. Hamilton holds 12 patents.\n\nMason A. Peck, Associate Professor at Cornell University in Mechanical and\nAerospace Engineering, received his Ph.D. in Aerospace Engineering from the\nUniversity of California, Los Angeles, in 2001. He has worked as an aerospace\nengineer since 1994 and has been on the faculty at Cornell since 2004. From\nlate 2011 through early 2014, he was NASA\u2019s Chief Technologist. In that role, he\nserved as the agency\u2019s chief strategist for technology investment and prioritization\nand advocate for innovation in aeronautics and space technology. His research lab\n\nxiii\n\n\n\nxiv Author Biographies\n\nfocuses on fundamental research in space technology that can be advanced through\nflight experiments. Examples include Violet, a nanosatellite for demonstrating CMG\nsteering laws, and KickSat, the world\u2019s first crowdfunded spacecraft. Dr. Peck holds\n19 patents in the USA and the E.U. and has over 100 academic publications. He\nreceived the NASA Distinguished Public Service Medal in 2014.\n\n\n\nAcronyms\n\nCMG Control moment gyroscope\nDGCMG Double-gimbal control moment gyroscope\nIGA Inner gimbal assembly\nIV Induced vibration\nLOS Line-of-sight\nMBS Mass balancing system\nMCS Momentum control system\nrms Root mean square\nrpm Revolutions per minute\nRWA Reaction wheel assembly\nSGCMG Single-gimbal control moment gyroscope\nVSCMG Variable-speed control moment gyroscope\n\nxv\n\n\n\n\n\nSymbols\n\nFN Inertial reference frame\nFGi ith CMG gimbal reference frame\nFRi ith CMG rotor reference frame\nA Arbitrary point in spacecraft reference frame\npi CMG nominal center of mass reference point at the intersection of the\n\ngimbal and rotor axes assumed fixed in the spacecraft body reference\nframe\n\nCB Spacecraft body center of mass point\nCGi ith CMG gimbal center of mass point\nCRi ith CMG rotor center of mass point\n? Differential mass vector position from center of mass of a component\nrB=A Vector from point A to spacecraft body center of mass, CB\nrpi=A Vector from point A to point pi\nrGi=pi Vector from point pi to CMG gimbal center of mass point\nrRi=pi Vector from point pi to CMG rotor center of mass pointObi Spacecraft body coordinate axis \u201ci\u201d\nOsi ith CMG spin coordinate axis\nOoi ith CMG output torque coordinate axis\nOgi ith CMG gimbal coordinate axis\nmB Spacecraft bus mass\nmG;i ith CMG gimbal mass\nmR;i ith CMG rotor mass\nmG;pi ith CMG gimbal particle imbalance mass\nmR;pi ith CMG rotor particle imbalance mass\nJs Spacecraft rigid body inertia dyadic\nJt Rotor transverse inertia\nJ Spacecraft inertia dyadic for the spacecraft\u2019s mass center, including the\n\nspacecraft as a rigid body and all momentum-control devices\nJBB Inertia dyadic of spacecraft about its own center of mass\nJBA Inertia dyadic of spacecraft about point A\n\nxvii\n\n\n\nxviii Symbols\n\nJGiGi Inertia dyadic of ith CMG gimbal about its own center of mass\n\nJGiA Inertia dyadic of ith CMG gimbal about point A\nJRiRi Inertia dyadic of ith CMG rotor about its own center of mass\n\nJRiA Inertia dyadic of ith CMG rotor inertia about point A\nJr;i Scalar inertia component of ith CMG rotor about its spin axis\nJgr;i Scalar inertia component of ith CMG gimbal-wheel assembly about its\n\ngimbal axis\nJg;i IGA inertia dyadic, i.e. everything that contributes to the IGA rigid-body\n\ninertia in all axes\nJg;eff Effective scalar IGA inertia. This inertia includes everything rigid that\n\nthe gimbal must accelerate along with the output-axis stiffness (KOA)\neffect: Jg;eff D Jg C h2KOA\n\nJg;eff Effective IGA inertia dyadic. This inertia includes everything that\ncontributes to the IGA rigid-body inertia in all axes, along with the\noutput-axis stiffness effect along the gimbal axis direction.\n\nhBA Angular momentum of spacecraft bus about point A\nhBB Angular momentum of spacecraft bus about its own center of mass\nhGipi Angular momentum of ith CMG gimbal about pi\nhGiGi Angular momentum of ith CMG gimbal about its own center of mass\nhRipi Angular momentum of ith CMG rotor about pi\nhRiRi Angular momentum of ith CMG rotor about its own center of mass\nhr Angular momentum vector of a single CMG rotor\nh Angular momentum vector for a momentum system such that h DPn\n\niD1 hri\nh Angular momentum body coordinate matrix representation for an array\n\nof CMG or RWA\nhs Superspin\n?gf ;i Internal friction torque of ith CMG gimbal\n?rf ;i Internal friction torque of ith CMG rotor\n?r;i ith scalar rotor torque for a single-gimbal CMG (for a perfectly aligned\n\nand rigid rotor)\n?g;i ith scalar gimbal torque for a single-gimbal CMG (for a perfectly aligned\n\nand rigid IGA and gimbal)\n?d Scalar drag torque\n?o Vector output torque for a single-gimbal CMG (for a perfectly aligned\n\nand rigid IGA and gimbal). This torque acts on the spacecraft and is\ntherefore is equal in magnitude but opposite in direction to the torque\nthat acts on the CMG.\n\nB\n!\n\nB=N\n\nAngular acceleration vector of a spacecraft-fixed reference frame B\nrelative to an inertial frame N. The overdot associated with a scalar\nderivative has been replaced with the letter B to indicate that the\nderivative has been taken relative to the B reference frame\n\n\n\nSymbols xix\n\n!B=N Angular velocity vector of spacecraft body with respect to the inertial\nreference frame\n\n!Gi=B Angular velocity vector of ith CMG gimbal with respect to the spacecraft\nbody reference frame\n\n!Ri=Gi Angular velocity vector of ith CMG rotor with respect to the ith CMG\ngimbal reference frame\n\n! Scalar spacecraft angular rate or body coordinates matrix representation\nof spacecraft angular velocity (context sensitive)\n\nvA Translational inertial velocity of point A\n?r;i ith scalar CMG rotor rate\n?r; P?r Matrices of CMG rotor spin rates and accelerations\n?; P?; R? Matrices of CMG gimbal angles, rates, and accelerations\n?i; P?i; R?i ith CMG gimbal angle, rate, and acceleration\n? CMG array skew angle\n? CMG array clocking angle\nKOA Output axis stiffness\nKa Performance ratio (maximum rate over maximum acceleration)\nKc Performance ratio (maximum acceleration over maximum jerk)\nKT Motor torque constant (torque per unit current)\nKMD Motor KM density (ft-lb/sqrt(W) per lb)\ni Index for a single CMG within a multiple-CMG array\nn Number of CMGs in a multiple-CMG array\nm Singularity measure\n? Singularity parameter and scalar angular acceleration (context sensitive)\nj Scalar angular jerk (context sensitive)\nBQA Direction-cosine matrix that relates the representation of a vector v in B\n\ncoordinates (Bv) to its representation in A coordinates (Av)\n\n\n\nChapter 1\nIntroduction\n\n1.1 Spacecraft Design, Commercial Space, and Angular\nMomentum\n\nThe WorldView I Spacecraft shown in Fig. 1.1, successfully reached orbit on\nSeptember 18, 2007.\n\nBall Aerospace, the prime contractor, and DigitalGlobe, the owner and operator\nof the satellite, celebrated this event as a technical success and commemorated\nthe occasion with a press release that called it \u201ca major contribution towards the\nadvancement of the commercial remote-sensing industry by providing higher col-\nlection capabilities, more frequent revisit time, and greater imaging flexibility\u201d (Ball\nAerospace [1]). This satellite is one of several that now provides commercial earth\nimagery for customers that include Google Earth. It is an agile satellite, meaning\nthat the satellite achieves comparatively high angular rates and accelerations. As a\ncommercial agile spacecraft, it is the first of its kind.\n\nA technology known as the control-moment gyroscope (CMG) makes Worldview\nuniquely agile. Until WorldView\u2019s launch, the USA and Russian governments were\nthe only owner/operators of spacecraft that use this technology. Examples include\nNASA\u2019s Skylab, the Soviet/Russian space station MIR, and the International Space\nStation. These momentum-control devices enable spacecraft to absorb large external\ntorque disturbances and to slew payloads quickly from one attitude to another.\nPower is a precious resource on even the largest spacecraft. So, the fact that CMGs\napply these high torques with tens to hundreds of times greater power efficiency\nthan other momentum actuators makes them an appealing choice in the design of\ncontemporary earth-observation spacecraft.\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_1\n\n1\n\n\n\n2 1 Introduction\n\nFig. 1.1 WorldView I satellite (Image Courtesy of DigitalGlobe Inc.)\n\nFig. 1.2 OrbView 4 Satellite (Image Courtesy of Orbital ATK)\n\nOther commercial agile satellites, such as Orbview (see Fig. 1.2), DigitalGlobe\u2019s\nQuickBird (Fig. 1.3), Ikonos (Fig. 1.4), and GeoEye (Fig. 1.5), depend not on CMGs\nbut high-torque reaction wheel assemblies (RWAs) as attitude-control actuators. By\n2007, RWAs had been used for decades, in a variety of applications, despite that\nCMGs were known to offer orders-of-magnitude higher torque for the power. With\nthe launch of WorldView I, momentum-control technologies that had been used\n\n\n\n1.1 Spacecraft Design, Commercial Space, and Angular Momentum 3\n\nFig. 1.3 QuickBird satellite (Image Courtesy of DigitalGlobe Inc.)\n\nFig. 1.4 Ikonos Spacecraft (Image Courtesy of GeoEye/DigitalGlobe)\n\nonly for government-sponsored spacecraft programs entered the commercial realm.\nHoneywell International provides the CMGs for the WorldView spacecraft. Ball\nwas Honeywell\u2019s first commercial customer for its M95 CMGs, the smallest flight-\nqualified class of CMG available at that time.\n\n\n\n4 1 Introduction\n\nFig. 1.5 GeoEye Spacecraft (Image Courtesy of GeoEye/DigitalGlobe)\n\nNow, nearly a decade later, CMG technologies are not only mainstream in\ncommercial Earth observation, they are also appearing in new applications. CMGs\nhave found their way into small spacecraft with scientific objectives, such as Cornell\nUniversity\u2019s Violet nanosatellite shown in Fig. 1.6.\n\nViolet is a 50 kg spacecraft with an ultraviolet spectrometer that is designed to\nmake observations of the Earth\u2019s upper atmosphere to help astronomers calibrate\nobservations of exoplanets. It has eight small CMGs, built by Goodrich Corpo-\nration. Honeybee Robotics has created golf-ball size CMGs suitable for 10\u201340 kg\nnanosatellites. The University of Florida built and launched similarly small CMGs\n(see Sect. 4.8). And Honeywell\u2019s miniature momentum control system (MMCS)\nprovides a plug-and-play solution for 100\u20131000 kg spacecraft that require high-\nprecision pointing performance (see Sect. 2.1.4).\n\n\n\n1.2 Momentum Control Devices and Attitude Control Systems 5\n\nFig. 1.6 Violet nanosatellite (Image Courtesy of Cornell University)\n\n1.2 Momentum Control Devices and Attitude Control\nSystems\n\nSpacecraft attitude control involves sensors and actuators, along with a feedback-\ncontrol architecture that embraces the subtleties of spaceflight dynamics. Sensors\nsuch as star trackers and rate gyroscopes measure spacecraft motion, which on-\nboard computers compare to desired kinematics. To correct this error, i.e., the\ndifference between the measured and desired state, actuators such as momentum-\ncontrol devices and thrusters apply torques to the spacecraft. The nature of these\nactuators\u2014their torque and momentum capabilities, as well as their precision and\nspeed of response\u2014determines their usefulness for the range of missions that\nspacecraft are intended to achieve.\n\nThis book focuses on CMGs and RWAs, which are known as momentum-control\ndevices. A spacecraft typically includes several such devices in an array. This array\nof actuators, along with electronics, high-level software, structural components, and\npossibly vibration isolators, comprises a momentum-control system (MCS). In turn,\nan MCS is part of the attitude-control system for a spacecraft. Figure 1.7 is a diagram\nthat shows the relationships among these many nested elements.\n\nMomentum devices produce torque by changing their stored angular momentum,\nrealized in a spinning disc. Because momentum is a vector quantity, the product of\nangular velocity and inertia, there are two ways to effect this change. The simplest\nway is exploited in an RWA. The vector direction of the angular momentum of\nan RWA bolted to the spacecraft is constant-fixed in a spacecraft-fixed reference\nframe. The length or magnitude of the momentum vector changes as the wheel spins\n\n\n\n6 1 Introduction\n\nFig. 1.7 Attitude-control centric view of spacecraft subsystems\n\nfaster or slower. In the case of a CMG, the wheel speed (and thus the magnitude of\nthe momentum vector) is relatively constant, but a gimbal tilts the spinning rotor\nto change the direction of the momentum vector. The trades between these two\ntechnologies are many, and this book discusses them at some length. In each case,\nthe device can store momentum up to a design maximum. That maximum value\nexists because a rotor of a given size is designed to spin at some maximum speed,\ntypically determined by the tensile-strength limit of the rotor\u2019s material and its\ngeometry. Going beyond that speed would incur excessive mechanical stress and\nfatigue, resulting in failure. Diagrams of a CMG and RWA are shown in Figs. 1.8\nand 1.9.\n\nThe spinning rotors in an MCS serve two functions: momentum storage and\ntorque application. From elementary physics, the MCS accumulates momentum as it\nimparts torque to the spacecraft (or reacts torque from the spacecraft, depending on\none\u2019s perspective). This torque is internal, in the sense that the angular momentum\nof the overall spacecraft is a constant, regardless of what the MCS is doing. The\nMCS and the spacecraft body exchange angular momentum, but none is created.\nIn this respect, an MCS is fundamentally different from a reaction-control system\ncomprised of thrusters or jets. Momentum devices offer clear benefits in spacecraft\ndesign: years of operation without expending resources, the highest precision of any\nactuator, and freedom to place these actuators anywhere in the bus structure. But\nthese benefits come with limitations. In a thruster-based system, the thrusters can\napply torque in a given direction until the expendables have been exhausted, which\nmay be hours to months. However, an MCS can apply torque in a single direction for\nonly a limited time because the hardware can only accumulate a limited amount of\n\n\n\n1.2 Momentum Control Devices and Attitude Control Systems 7\n\nFig. 1.8 Key components of a single-Gimbal CMG (Image Courtesy of Honeywell, Inc.)\n\nFig. 1.9 Key components of a reaction wheel (Bialke [2])\n\n\n\n8 1 Introduction\n\nmomentum. Once the rotors have reached their maximum spin speeds or the gimbal\nangles have swung fully toward a given direction, the MCS cannot apply further\ntorque to the spacecraft. Managing the momentum state of the MCS to prevent\nsaturation or related singularities is a unique aspect of implementing momentum-\ncontrol devices. Chapters 7 and 8 address this aspect in detail.\n\nPropellant is a finite, expendable resource, while the electrical current required\nto change the momentum in a RWA or a CMG is typically renewable, through\nsolar power. Therefore, thrusters are typically not used when internal torques\nwould suffice. Another downside to thrusters is that they apply either coarse,\nimpulsive torques or precise but long-duration ones. Chemical thrusters offer the\nformer performance, and electric thrusters the latter. Attitude-control requirements\noften demand better pointing than chemical thrusters alone can provide, and they\ndemand faster responses (higher bandwidth) than electric thrusters are capable of.\nOnly an MCS is suited to this combination of precision and bandwidth. Table 1.1\nsummarizes these options.\n\nAn MCS also differs from a set of magnetic torque-coils that might be used in\nEarth orbit. Such devices impart a torque to the spacecraft without using expendable\nresources, torquing against the geomagnetic field, but the electromagnetic torque\navailable cannot provide instantaneous three-axis attitude control because it can\nnever lie along the geomagnetic field direction. The same is true of a gravity-\ngradient boom, which exploits the gradient of the Earth\u2019s gravity to cause a\nspacecraft to point toward nadir like a float on a fishing line. An MCS typically\nworks alongside these external-torque actuators in order to provide a complete\nattitude-control solution: internal torques for high-agility and/or three-axis momen-\ntum storage, and occasional momentum unloading (or dumps) via thrusters or\ntorque coils. This fundamental difference among attitude-control actuators drives\nspacecraft operations and has a direct impact on both the sizing of the MCS, and\nhow it is used in practice. Chapter 3 addresses these issues in depth.\n\n1.3 A Brief History of Spin\n\nMomentum control has been a central element of successful space-systems architec-\ntures since the beginning of the space age. Some of the earliest spacecraft, such as\nHughes\u2019 Syncom geostationary communications satellite, inherited a spin rate from\nthe rockets that took them to orbit. However, earlier efforts along these lines had not\nbeen completely successful. The first successfully launched US spacecraft were the\nExplorer series, each of which famously, and unexpectedly, fell over into a so-called\nflat spin after it separated from the rocket spinning around its longitudinal, skinny\naxis. The skinny axis of a rigid body has the least moment of inertia. It turns out that\nspinning in this direction is a maximum-energy state, from which the spacecraft\u2019s\ndynamics can only degrade thanks to dissipative effects, such as structural damping\nand internal fluid motions. In the case of Explorer I and subsequent Explorer\n\n\n\n1.3 A Brief History of Spin 9\n\nTa\nbl\n\ne\n1.\n\n1\nC\n\nom\npa\n\nri\nso\n\nn\nof\n\nat\ntit\n\nud\ne-\n\nco\nnt\n\nro\nla\n\nct\nua\n\nto\nrs\n\nA\nct\n\nua\nto\n\nrs\nTy\n\npi\nca\n\nla\ntti\n\ntu\nde\n\n-c\non\n\ntr\nol\n\nap\npl\n\nic\nat\n\nio\nns\n\nA\ngi\n\nlit\ny\n\nra\ntio\n\nra\nte\n\n/a\ncc\n\n(s\nec\n\non\nds\n\n)\n(s\n\nm\nal\n\nle\nr\n\nra\ntio\n\nis\nm\n\nor\ne\n\nag\nile\n\n)\nPr\n\nec\nis\n\nio\nn\n\n(d\neg\n\n)\nA\n\nC\nS\n\nco\nnt\n\nro\nl\n\nba\nnd\n\nw\nid\n\nth\n(H\n\nz)\nTo\n\nrq\nue\n\n/p\now\n\ner\n(N\n\nm\n/W\n\n)\n\nSp\nin\n\nst\nab\n\nili\nza\n\ntio\nn\n\nL\now\n\n-p\nre\n\nci\nsi\n\non\nom\n\nni\ndi\n\nre\nct\n\nio\nna\n\nlR\nF\n\npa\nyl\n\noa\nds\n\nan\nd\n\nm\nag\n\nne\nto\n\nsp\nhe\n\nri\nc\n\nsc\nie\n\nnc\ne\n\nN\n/A\n\n0.\n1\u2013\n\n1\nin\n\n2\nax\n\nes\nN\n\n/A\nN\n\n/A\n\nG\nra\n\nvi\nty\n\n-g\nra\n\ndi\nen\n\nt\nbo\n\nom\nC\n\noa\nrs\n\ne\nea\n\nrt\nh\n\nob\nse\n\nrv\nat\n\nio\nn\n\nan\nd\n\nte\nch\n\nno\nlo\n\ngy\nde\n\nm\non\n\nst\nra\n\ntio\nns\n\nN\n/A\n\n5\u2013\n20\n\nin\n2\n\nax\nes\n\nN\n/A\n\nN\n/A\n\nM\nag\n\nne\ntic\n\nto\nrq\n\nue\nrs\n\nM\nom\n\nen\ntu\n\nm\ndu\n\nm\nps\n\n,\nna\n\nno\nsa\n\nte\nlli\n\nte\ns\n\nin\nL\n\nE\nO\n\n,\ngr\n\nav\nity\n\n-g\nra\n\ndi\nen\n\nta\nug\n\nm\nen\n\nta\ntio\n\nn\n\nL\now\n\nag\nili\n\nty\n1\u2013\n\n10\nin\n\n2\nax\n\nes\n0.\n\n01\n\u20130\n\n.1\n0.\n\n00\n1\u2013\n\n0.\n01\n\nM\nom\n\nen\ntu\n\nm\nw\n\nhe\nel\n\ns\nA\n\nst\nro\n\nno\nm\n\ny,\nco\n\nm\nm\n\nun\nic\n\nat\nio\n\nns\nN\n\n/A\n0.\n\n00\n1\u2013\n\n1\nin\n\n3\nax\n\nes\n0.\n\n01\n\u20130\n\n.1\n0.\n\n00\n1\u2013\n\n0.\n01\n\nR\nea\n\nct\nio\n\nn\nw\n\nhe\nel\n\ns\nA\n\nst\nro\n\nno\nm\n\ny,\nco\n\nm\nm\n\nun\nic\n\nat\nio\n\nns\n,\n\nea\nrt\n\nh\nob\n\nse\nrv\n\nat\nio\n\nn\n5\u2013\n\n50\n0\n\n0.\n00\n\n1\u2013\n1\n\nin\n3\n\nax\nes\n\n0.\n01\n\n\u20131\n0.\n\n00\n1\u2013\n\n0.\n1\n\nC\non\n\ntr\nol\n\n-m\nom\n\nen\nt\n\ngy\nro\n\ns\nE\n\nar\nth\n\nim\nag\n\nin\ng\n\nan\nd\n\nra\nda\n\nr,\nsa\n\nte\nlli\n\nte\nse\n\nrv\nic\n\nin\ng,\n\nas\nte\n\nro\nid\n\ngr\nap\n\npl\nin\n\ng\n\n0.\n5\u2013\n\n5\n(m\n\nos\nta\n\ngi\nle\n\n)\n0.\n\n00\n1\u2013\n\n1\nin\n\n3\nax\n\nes\n,o\n\nr\nbe\n\ntte\nr\n\n0.\n1\u2013\n\n1\n1\u2013\n\n10\n\nE\nle\n\nct\nri\n\nc\nth\n\nru\nst\n\ner\ns\n\nG\nE\n\nO\nst\n\nat\nio\n\nnk\nee\n\npi\nng\n\nL\now\n\nag\nili\n\nty\n0.\n\n01\n\u20130\n\n.1\nin\n\n3\nax\n\nes\n0.\n\n00\n1\u2013\n\n0.\n01\n\n0.\n00\n\n01\n\u20130\n\n.0\n01\n\nC\nhe\n\nm\nic\n\nal\nth\n\nru\nst\n\ner\ns\n\nM\nis\n\nsi\nle\n\nde\nfe\n\nns\ne,\n\nin\nte\n\nrp\nla\n\nne\nta\n\nry\ntr\n\nan\nsf\n\ner\n,s\n\npi\nn-\n\nsp\nee\n\nd\nad\n\nju\nst\n\nm\nen\n\nta\nnd\n\nre\nor\n\nie\nnt\n\nat\nio\n\nn,\nm\n\nom\nen\n\ntu\nm\n\ndu\nm\n\nps\n\nH\nig\n\nh\nag\n\nili\nty\n\n1\u2013\n10\n\nin\n3\n\nax\nes\n\n0.\n1\u2013\n\n1\nV\n\ner\ny\n\nhi\ngh\n\n\n\n10 1 Introduction\n\nspacecraft, long whip antennas extended from the body and dissipated this kinetic\nenergy as they flexed, causing the spacecraft to fall over like an exhausted toy top\nafter several hours in orbit.\n\nIn the early days of the Space Age, this skinny axis was known as the \u201croll\u201d axis,\nusing an aircraft convention that originated in nautical terminology. The coordinate\naxis often assigned to this axis was \u201cZ,\u201d and even today a typical large spacecraft\nassociates its Z axis with the longitudinal, or skinny, axis of the rocket that takes it to\norbit. Syncom and similar spacecraft learned from that mistake. They were built as\nsquat cylinders, making the Z or roll axis the axis of maximum inertia, and therefore\na minimum energy state. Syncom was therefore stable in Z spin, avoiding Explorer\nIV\u2019s fate.\n\nThis so-called passive spin stabilization ensured some degree of passive attitude\ncontrol for spacecraft in the early 1960s. Soon thereafter, RCA and Hughes began\nto exploit the dual-spin spacecraft principle: part of the spacecraft spins (known as\nthe rotor), and part of it remains inertially fixed (known as the stator or platform).\nWith the correct distribution of energy dissipation and mass between the rotor\nand the stator, the spinning portion ensures attitude stabilization of a conveniently\nlaunched, slender body that would otherwise be unstable. This innovation led\nto larger satellites, with more solar-panel area for more powerful payloads. The\nevolution of spinning spacecraft dynamics is shown in Fig. 1.10\n\nThe rotor of dual-spin spacecraft from the 1970s and 1980s soon gave way to\nmomentum wheels. Those wheels serve precisely the same purpose as the rotor in a\ndual-spin spacecraft but, with higher speed and lower inertia, take up considerably\nless space and lead to higher-power, three-axis stabilized spacecraft buses. Some\nmomentum wheels included a tip/tilt platform, such as on the Hughes/Boeing 601\nclass commercial satellites, allowing the fixed momentum to vary a little and control\nattitude with active feedback. The so-called momentum bias in these spacecraft\nensured a stable attitude even in the presence of certain failures. The 1990s saw\na general trend toward zero-momentum commercial satellites, including Lockheed\nMartin\u2019s A2100, the Boeing 702 class spacecraft and others from Space Systems\nLoral, Ball Aerospace, and Orbital Sciences. These spacecraft use reaction wheels,\nwith nominally zero momentum, for feedback control of attitude dynamics. Zero-\nmomentum architectures are widely regarded as the most versatile, and lowest\nin power among the many ways in which angular momentum can be used in\nspaceflight, but with the risk that any failure that disables attitude control also leads\nto uncertain attitude motions.\n\nWhile this trend from passive to active MCS control through RWAs continued in\nthe commercial world, CMGs were prevalent among DoD spacecraft. Many journal\npublications from the late 1960s through the 1990s attest to innovations in CMG-\nbased attitude control at Lockheed Martin, Boeing, and elsewhere. Throughout the\ndecades, a key research question has remained: how does one distribute torque\nactuation among an array of CMGs, consisting of four or more, in order to avoid\nwhat are known as kinematic singularities among the actuators? It is known that\nno general-purpose solution allows unlimited freedom to traverse momentum space\nwithout torque limitation. Consequently, this problem has been solved for many\n\n\n\n1.4 The Proliferation of Momentum Control 11\n\nNautical Convention:\nRoll, Pitch, and Yaw\n\nAeronatical\nConvention:\n\nRoll, Pitch, and Yaw\n\nExplorer 1-5:\nRocket as\nSatellite,\n\nUnstable in Z spin\n\nSingle Spinner:\nStable in Z Spin But\nVolume Inefficient\n\nDual Spinner:\nStable and Volume\n\nEfficient\n\nMomentum Bias and Zero-Momentum\nSpacecraft: Sometimes Spin to Stabilize\n\nDuring Key Events but\nNonspinning Mission\n\nFig. 1.10 Evolution of spinning spacecraft dynamics\n\nspecial cases and in a broadly general, theoretical sense. However, a general-\npurpose, practicable solution that requires no future knowledge but that also exploits\nall possible momentum capability from a generic CMG array remains an important\nresearch objective.\n\n1.4 The Proliferation of Momentum Control\n\nFrom the 1960s through about 2000, large US prime contractors such as Lockheed\nMartin, Boeing, and Northrop Grumman, dominated the aerospace industry\u2019s use of\nCMGs in space. Now, US companies new to CMGs are pursuing satellite projects\nthat take advantage of these capable actuators: as of this writing ATK (the former\nSwales in Beltsville, MD) and General Dynamics (the former Spectrum Astro in\nGilbert, AZ), among others, have contemplated CMG enabled satellites.\n\nRWAs have been used for space in the past for optical payloads that are\nsometimes known as reactionless coelostat telescopes (Loewenthal [3]). CMGs have\nmore recently proven to provide lower-power reactionless robotic motions. A likely\napplication of CMG robotics is in satellite servicing and asteroid manipulation\n\n\n\n12 1 Introduction\n\nFig. 1.11 NASA\u2019s asteroid redirect mission (ARM) (Image Courtesy of NASA)\n\nFig. 1.12 Vivisat\u2019s mission extension vehicle for satellite servicing (Image Courtesy of Vivisat)\n\nbecause both applications benefit from a CMG\u2019s ability to absorb high external\ntorques. A asteroid-mining or servicing spacecraft such as NASA\u2019s Asteroid\nRedirect Mission shown in Fig. 1.11 or Vivisat\u2019s Mission Extension Vehicle for\nSatellite Servicing shown in Fig. 1.12 would be able to keep its central body pointed\nwithout its central body experiencing torques from its robotic arms.\n\n\n\n1.5 About This Book 13\n\nGovernment-funded human-space applications of CMGs are well established.\nThey include not only Skylab, Mir, and ISS, but also the Astronaut Maneuvering\nUnit from the 1970s, which included six small CMGs. Someday we may see\ncommercial human-space uses, such as hotels stabilized with CMGs.\n\nAnd CMGs are moving beyond space applications. These devices turn out to\nbe useful in ships at sea, including roll and pitch stabilization of small craft, as\nin the case of the SeaKeeper gyro. They are also being considered for automotive\napplications. Lit Motors, a San Francisco startup, intends to produce small two-\nwheel vehicles balanced by a feedback-control system centered on CMGs (see\nChap. 2).\n\nIn the USA, commercial space is growing exponentially, with companies like\nSpaceX providing significantly lower cost access to space, Planet Labs launching\ndozens of CubeSats for global, persistent Earth imaging, and companies such as\nDeep Space Industries and Planetary Resources Inc. setting out to mine asteroids.\nAn unintended consequence of the US International Traffic in Arms Regulations\n(ITAR) is that larger US companies have been forced to yield market share in\nsome cutting-edge satellite technologies to overseas providers, although the USA\nis generally seen as leading the world in CMG technology. Long the province\nonly of US companies, sophisticated momentum control is now being implemented\nthroughout the world. For example, Surrey Satellite Technology Ltd. in the UK\ncollaborated with Turkey to launch Bilsat, an early small-sat demonstrator of CMGs.\nEADS (in its earlier incarnation as Astrium) first built a CMG in the 1990s and\ncontinues to market it, and their subsidiary Thales/Alenia has been working on\nCMG-enabled spacecraft since the mid-2000s.\n\n1.5 About This Book\n\nThis context motivates a thorough look at the technology of MCSs. The authors\nintend this book to serve as a technical resource for engineers, and that is why\nit covers a breadth of topics related to momentum control. It also provides depth\nin certain areas, such as the dynamics of momentum-control devices, require-\nments for MCSs, and a thorough treatment of CMG singularities that are entirely\nabsent from the general texts available on spacecraft attitude dynamics, control,\nand astrodynamics. While of likely interest to that small, deeply idiosyncratic\ncommunity of momentum-control experts, some of this unique material also ought\nto appeal to those with a more academic perspective. The aging of the USA\naerospace engineering community means that new spacecraft engineers have fewer\nopportunities for mentorship and may have to take on more responsibility for\nchallenging satellite design work than might have been expected a decade or two\nago. Some of the material in this book represents sage advice collected from the\nexperts, those who have been working in the field for many years. The technical\ncontent of this book begins in Chap. 2, with an overview of the applications\nof angular momentum: various spacecraft-mission architectures and operations\n\n\n\n14 1 Introduction\n\nconcepts, including agile Earth-observation, robotic servicing, human space, and\nsome of the terrestrial applications. Chapter 3 develops requirements for spacecraft\nMCSs. This discussion covers requirements flow-down from spacecraft-level issues\nsuch as day-in-the-life kinematics statistics, and other systems-engineering issues\nthat ultimately trade risk in the context of size, weight, and power.\n\nChapter 4 begins a series of chapters on the core mathematics and physics of\nmomentum devices. It offers a detailed analysis of the dynamics of spacecraft with\nRWAs and CMGs. Some attention is given to non-rigid effects, such as flexibility\nin rotors and gimbals, mass imbalances, friction, hysteresis, and materials issues.\nChapter 5 offers a mathematical treatment of the singularities associated with CMG\narray architectures. Chapter 6 describes the many options for these architectures\nand offers recommendations for the most promising approaches for their use in\nspacecraft attitude control. Chapter 7 explains how to steer the CMGs around or\nwithin singularities for this wide variety of arrays. Appendices offer further detail\non the extended equations of motion for unbalanced rotors and the impact of\nsingularities on attitude controllability. These chapters bring together decades of\nacademic literature and practical experience from around the world on these subtle\nmatters. Because these chapters constitute the most mathematically demanding\nmaterial in the book, it is no surprise that these topics are of current academic\nresearch interest.\n\nChapter 8 moves deeper within the momentum devices. It summarizes the inner-\nloop control of the rotors and gimbals, addressing issues such as sensors, control\nof the rotor spin rate and gimbal rate, and experimental parameter identification.\nChapter 9 summarizes key concepts for motors in space. This section of the book\nwraps up with Chap. 10, which describes ways in which to represent the behavior\nof momentum devices in practical systems through computer modeling and test-bed\nvalidation.\n\nThe mathematical content here requires some background in vector mechanics\nand linear algebra. The notation the authors have adopted is explained and is\nmeant to articulate the issues rigorously. It is consistent with many US journals\nand academic practice. We expect that most of the chapters will be accessible to a\ngeneral audience with an engineering background.\n\nReferences\n\n1. Ball Aerospace, Ball aerospace-built worldview-1 satellite launched from vandenberg. Press\nRelease (2007)\n\n2. W. Bialke, Reconfigurable reaction wheel for spacecraft. US Patent 20,080,099,626 A1, 2006\n3. S. Loewenthal, Reactionless, momentum compensated payload positioner. US Patent 5,751,078,\n\n1998\n\n\n\nChapter 2\nApplications\n\nVirtually all spacecraft incorporate some form of momentum control. Even the\nsimplest spin-stabilized spacecraft\u2014nothing more than a rigid body stabilized by\nvirtue of its own spin\u2014might be considered to benefit from a form of momentum\ncontrol. Dual-spin spacecraft incorporate a spinning \u201crotor\u201d and a non-spinning\n\u201cplatform,\u201d which achieves attitude stabilization through a similar but more ver-\nsatile approach. Contemporary spacecraft use a wide range of momentum-control\ntechnologies\u2014momentum wheels, reaction wheels, and several types of control-\nmoment gyroscopes\u2014with an ever-increasing number of applications. The appli-\ncations discussed here focus on contemporary spacecraft, from small autonomous\nsatellites to large human-space vehicles and earth-observation systems. However,\nthe hardware and basic principles have found uses outside the field of aerospace\nengineering, largely in commercial applications. Examples include stabilization of\ntrains, automobiles, and boats. As spinoffs from the high-tech, high-reliability world\nof aerospace make their way into other fields, one can expect to find reaction wheels\nand CMGs in even more surprising places.\n\n2.1 Spacecraft Applications\n\n2.1.1 GEO Communications Spacecraft\n\nPerhaps the most commercially successful space application for momentum systems\nis the geosynchronous communications satellite. Arthur C. Clarke\u2019s famous 1945\nWireless World article popularized the idea of a communications spacecraft that\nhovers above the Earth by orbiting at Earth\u2019s spin rate. Thanks to that early start,\nGEO spacecraft were among the first to be profitable, beginning with spin-stabilized\nspacecraft in the early 1960s such as Hughes\u2019 Syncom 2 (1963) and dual-spin\nsatellites from RCA Astronautics and Hughes (among others). Momentum wheels\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_2\n\n15\n\n\n\n16 2 Applications\n\nand reaction wheels became the preferred actuators for attitude stabilization of\nthese ever larger spacecraft beginning in the 1980s, and that basic architecture has\ncontinued into the present.\n\nThe Hughes/Boeing 601 class spacecraft serve as an instructive example of a\nmomentum-wheel architecture. The earliest examples include the Optus series of\nspacecraft (1987), but variants on this design continue to launch and operate suc-\ncessfully to this day. These spacecraft point an antenna farm\u2014a payload comprised\nof many transponders and reflectors\u2014toward the Earth. Pointing accuracy of a\nfraction of a degree is the goal for GEO spacecraft in general, and the 601 class\nis typical in this regard.\n\nThe solar array on the 601 spacecraft provides up to 4.8 kW of power. This\nlevel of power performance is unattainable from the smaller solar arrays of a\ncylindrical dual-spinner. Three-axis attitude control is required for these panels to\npoint at the sun while the payload points at the Earth. Zammit [1] and Smay [2]\noffer considerable detail on this attitude-control architecture, which is summarized\nhere. To achieve this performance, the spacecraft incorporates a momentum-wheel\nplatform. This platform includes a momentum wheel and a tip/tilt table (or gimbals)\ncapable of redirecting the wheel\u2019s angular momentum vector with small-angle\nmotions. The wheel is aligned nominally with the spacecraft\u2019s pitch axis, which\nruns through the two solar wings and is directed along the Earth\u2019s north/south axis.\nThis orientation keeps a momentum bias in a direction that passively stabilizes the\nspacecraft in an event of a failure of the attitude-control subsystem. The wheel is\nkept at a roughly constant speed (responding only to small errors in pitch angle).\nThe jackscrews on the momentum-wheel platform (shown in Fig. 2.1) allow wheel\nto absorb disturbance torques in the roll and yaw directions.\n\nThe platform must precess this stored-momentum vector at one full rotation per\norbit, since its direction is inertially constant while the spacecraft itself rotates\naround the Earth to keep its payload pointed at a fixed location on the surface.\n\nFig. 2.1 Momentum-wheel platform (Yuan and Wittmann [3])\n\n\n\n2.1 Spacecraft Applications 17\n\nFig. 2.2 Space Systems/Loral 1300 Series Satellite Bus providing hosted-payload capability for\nNASA\u2019s laser communications relay demonstration (LCRD) (Image Courtesy of NASA)\n\nThe combined momentum bias and three-axis attitude control represent a successful\nsuperposition of 1970s-era passive stabilization with more modern three-axis\ncontrol techniques.\n\nOther GEO spacecraft are known as \u201czero-momentum\u201d satellites because their\nreaction wheels do not store momentum that is intended for passive stabilization.\nFor this reason, a momentum wheel and a reaction wheel are essentially the same\nhardware; they merely have different applications in the spacecraft attitude-control\narchitecture. An example of a zero-momentum satellite is Boeing\u2019s 702 class\nspacecraft, which was introduced in the late 1990s. Modern 702 spacecraft have\nsolar arrays with wingspans larger than that of a Boeing 737 aircraft, and with power\nup to 18 kW (Stribling [4]). A similar spacecraft is shown in Fig. 2.2: the Space\nSystems/Loral 1300 series satellite bus, in this case configured for NASA\u2019s laser\ncommunications relay demonstration. This larger size demands more headroom\nin the reaction-wheel array torque and momentum envelopes\u2014i.e., the attitude-\ncontrol subsystem cannot successfully react to the torque disturbances and store\nthe resulting momentum with the very limited capability of momentum-wheel\nplatforms. Instead, contemporary zero-momentum spacecraft use comparatively\nlarge reaction wheels, each offering up to 100 Nms of momentum and as much as\n2 Nm of torque (Bialke and Stromswold [5]).\n\nThe zero-momentum approach also offers greater versatility in the operations\nconcept, for example, in the case where a spacecraft is not in a perfectly equatorial\norbit. Such a satellite might drift north/south during its lifetime to eliminate the cost\n\n\n\n18 2 Applications\n\nof propellant for north/south stationkeeping (Lim and Salvatore [6]). In doing so,\nthe spacecraft also cannot simply align its pitch axis normal to the orbit plane at\nall times, as is the case for the 601. Instead, three-axis attitude control provides\ntorque to follow a more subtle attitude trajectory through the reaction wheels\nand stores whatever momentum accumulates due to disturbance torques (from the\nenvironment, the payload, and other effects). The attitude-control subsystem dumps\nthat momentum occasionally through reaction-control jet activity, whether chemical\nthrusters or electric thrusters.\n\nZero-momentum spacecraft use an array of reaction wheels, often four of them.\nThese four wheels are oriented so that the failure of any single wheel results in an\narray whose wheel spin axes still robustly span three dimensions. There are many\napproaches to the design of these arrays, some of which are discussed in Chap. 6.\n\n2.1.2 Agile Spacecraft Missions and ConOps\n\nThe concept of operations, or ConOps, for a spacecraft lays out the method by which\noperators use the spacecraft to achieve its mission. The ConOps of a commercial\nGEO spacecraft is comparatively straightforward, sometimes requiring only one\noperator to watch over several such satellites at a time. Others, such as spacecraft\nthat perform Earth imaging in LEO, are more demanding. Their subtler ConOps\ninvolve frequent acquisition and loss of signal as the spacecraft flies in and out of\nview of ground stations. The momentum-control system is at the core of how these\nspacecraft function and how well they perform.\n\nEarth imaging spacecraft such as Ball Aerospace\u2019s WorldView-3 use an array of\nseveral CMGs as a momentum system (Poli et al. [7]). These spacecraft typically\noperate in LEO, where they are as close as possible to the Earth\u2019s surface to optimize\nthe size of objects on the ground that their optics can resolve. However, they are also\nhigh enough that the atmospheric drag can be overcome by an affordable amount of\npropellant, for a useful lifetime. This process of optimizing the design to trade off\namong altitude, payload performance, lifetime, and propellant is beyond the scope\nof this book, and it does not very directly involve the momentum system. The reason\nis that the specific altitude within typical LEO orbits only slightly influences the\nspeed with which the spacecraft must reorient, or slew, to capture images.\n\nThe attitude-control subsystem has two key objectives: (1) perform large-angle,\nhigh-speed slews to direct the payload toward a point of interest on the ground and\n(2) maintain the attitude with sufficient accuracy and precision to allow that payload\nto capture imagery as it passes over the point of interest. Objective (1) demands high\ntorque and momentum storage. Torque accelerates or decelerates the spacecraft,\nand momentum storage establishes the peak angular velocity that the spacecraft\ncan reach. In addition, the rate at which this torque can change is important: it\ninfluences angular jerk, the derivative of acceleration, which turns out to drive the\ndesign of the gimbal of a CMG. The total duration of these slews depends on rate,\nacceleration, and jerk, as well as the flexible response of the spacecraft, fluid slosh,\nand other behaviors. However, it is the MCS capability that primarily determines\nthe speed with which an Earth-imaging spacecraft can move from target to target.\n\n\n\n2.1 Spacecraft Applications 19\n\nThis agility directly translates into profitability: the faster the slews, the more data\ncan be collected, and the more product the spacecraft can deliver to its customers.\n\nThese two objectives work against each other, to a large extent. Fine precision,\nlow-disturbance attitude control is hard enough. It demands very low gimbal rates to\nproduce gentle torques that do not exceed jitter requirements. And yet this goal must\nbe achieved with actuators that are also capable of imparting hundreds to thousands\nof Nm of torque. So, the dynamic range of the CMG gimbals, the dynamic and static\nbalance of the rotors, and the structural stiffness of the MCS, are key parameters that\nflow down from the ConOps. Over the years, they have led to CMG technology that\nis necessarily both precise and powerful.\n\n2.1.3 Space Stations\n\nDespite that the vast majority of CMGs have been used in Earth-observation\nspacecraft, the most well-known applications for CMGs are in human space: Skylab,\nMir, and the International Space Station.\n\nThe International Space Station (ISS) serves as an instructive example. Its MCS\nincorporates four double-gimbal CMGs in the Zarya module. The two gimbals per\nCMG enable the ISS\u2019s control system to redirect the momentum from each CMG\ntoward any point on a sphere, with the result that the momentum envelope of the\n\nFig. 2.3 The four ISS CMGs shown in 2000 at Kennedy Space Center\u2019s Space Station processing\nfacility (Image Courtesy of NASA)\n\n\n\n20 2 Applications\n\nISS\u2019s CMG array is a sphere four times the radius of any one of its four CMGs\u2019\nangular momentum. Figure 2.3 shows this arrangement. The ConOps of the ISS\nincludes a zero-propellant maneuver, in which the combination of gravity-gradient\ntorque, atmospheric drag, and solar radiation pressure are largely balanced by the\nattitude of the body and the orientation of its vast solar array (Bedrossian et al. [8]).\n\nDespite this innovative approach to minimizing momentum accumulation, the\nCMGs still need to absorb disturbances. They do so with extremely large rotors\n(4760 Nms) and powerful gimbal motors, producing 258 Nm output torque (L-\n3 [9]). The large momentum-storage capability is understandable: ISS is the largest\nspacecraft ever built, weighing over 400,000 kg, and one would expect large\nactuators for a large vehicle. But the gimbal-motor torque is disproportionately high\ncompared to single-gimbal CMGs. It results from the double-gimbal configuration.\nThe reason is that in such a CMG, the motion of one gimbal tilts the rotor\u2019s\nmomentum and causes a gyroscopic torque that the second gimbal must react. In\ncontrast, a single-gimbal CMG imparts this gyroscopic torque directly to the CMG\u2019s\nbase ring, and from there into a stiff spacecraft bus structure, without the need for\nelectrical power to constrain the motion. This significant savings in size, weight,\nand power motivate the nearly universal choice of single-gimbal CMGs in space\napplications.\n\nHeritage is a powerful justification for any spacecraft design choice. ISS uses\ndouble-gimbal CMGs in part because Skylab did. In the 1960s, when Skylab was\nbeing designed, there had been only limited experience with CMGs, and no NASA\nproject had ever used them. At that time, the problems with kinematic singularities\nassociated in a single-gimbal CMG array were believed to be insurmountable\u2014that\none could not fly a spacecraft stably with such actuators. This belief persisted for\nlong enough to determine Skylab\u2019s double-gimbal CMG architecture and establish\nthe heritage for ISS. A straightforward sizing exercise suggests that an array of\ncontemporary single-gimbal CMGs could also serve the needs of ISS and would\nbenefit from the decades of technology development that have made CMGs a\nreliable solution for high-torque spacecraft.\n\nThe ISS CMGs are an outstanding engineering accomplishment. They are\nsuccessfully controlling ISS and have been doing so for years. Nevertheless, they\nalso experienced failures in the early 2000s related to electronics and to spin\nbearings. It is not surprising that as the first (and only) of their kind, these CMGs\nwould represent some technical risk. The Skylab CMGs also experienced failures,\nthe first occurring 12 days after launch: again, a bearing-related failure, which is the\nmost common mechanical failure mode for a momentum actuator. This apparent\ntrend\u2014two space stations, two sets of CMG failures\u2014should not be taken as\nevidence of CMG reliability in general. In fact, contrary to what these examples\nmay suggest, no spacecraft has ever had its mission prematurely ended by a failure\nof a single-gimbal CMG.\n\n\n\n2.1 Spacecraft Applications 21\n\n2.1.4 Small Spacecraft\n\nSmall spacecraft per se do not represent an application area. However, they are often\nconsidered unique in that they hold significant promise for highly responsive design,\nbuild, and test. The DoD\u2019s operationally responsive space (ORS) office focuses on\nsmall spacecraft for this reason, among others (Foust [10]). One of its goals is to\nreduce the time to develop and launch a spacecraft by orders of magnitude: months\nor days instead of the current practice of over a decade.\n\nSmall scale also offers increased pointing agility, but not simply for geometric\nreasons. In fact, scaling every feature of a large, agile satellite\u2019s geometry down to\na smallsat scale does not change its agility at all. The reason is that the spacecraft\u2019s\nrigid-body inertia drops with the fifth power of length (all things being equal), and\nso does the inertia in its momentum devices. So, the ratio of momentum to actuator\ninertia\u2014roughly vehicle angular rate\u2014is preserved for simple length scaling. The\nsame is true for angular acceleration and jerk.\n\nBut there is an advantage. A smaller rotor can spin faster because the ten-\nsile stress in the rotor drops for smaller radii. Similarly, the structural natural\nfrequencies of the momentum-device increase for smaller scale, all things being\nequal. Therefore, for a given rotor- and gimbal-speed control-loop bandwidth,\nthe control/structure interaction is less. Alternatively, these control loops can be\nincreased in bandwidth and remain lower than the structural frequencies. So, with\nhigher rotor speeds and higher-bandwidth inner loops in the momentum devices,\nsmall spacecraft can achieve greater agility than their larger analogues. Momentum\ndevices for such systems must be designed to accommodate the higher base-rate\neffects, as described in Chap. 3. They also may expend more electrical power to\nmaintain rotor speed than a similar device with a lower-speed rotor.\n\nNevertheless, such designs are possible, as evidenced by the Violet spacecraft.\nThis satellite is one of the entrants in the University Nanosatellite Program of\nthe Air Force Research Lab. Violet is capable of at least 10 deg/s, 10 deg/s2, and\n50 deg/s3, thanks to its comparatively low inertia (about 2 kg-m2 in any axis) and its\nGoodrich/Ithaco small CMGs. It may be capable of as high as 40 deg/s, 40 deg/s2,\nand 60 deg/s3 (Gersh and Peck [11]). Figure 2.4 shows a drawing of the interior\n(left) and a photo of two of the CMGs in the partly integrated spacecraft (right).\n\nBy providing an in-orbit testbed for steering algorithms, the Violet project is\ndesigned to enable guest investigators to prove out next-generation CMG steering\nlaws. In this respect, Violet\u2019s mission was designed to complement that of AFRL\u2019s\nadvanced PnP technologies (APT) satellite, the spacecraft that had formerly been\nknown as TACSAT-5 (Department of the Air Force [12]). Among other objec-\ntives, APT was meant as an experimental platform for Honeywell\u2019s plug-and-play\nmomentum-control system, their Mini-MCS (MMCS). Violet\u2019s CMG experiments\nare distinct but complementary to those articulated in the 2009 TACSAT-5 Broad\nAgency Announcement.\n\n\u2022 APT\u2019s objective in this area was to experimentally validate the MMCS, focusing\non its suitability for plug-and-play integration in a responsive, agile spacecraft\n\n\n\n22 2 Applications\n\nFig. 2.4 Violet interior (left) and photo of two CMGs mounted on bus structural panels (right)\n\nbus. In doing so it evaluated a specific CMG array architecture appropriate\nfor responsive space. In contrast, Violet is designed to investigate the general\nproblem of high-performance CMG steering, without explicit relevance to\nresponsiveness.\n\n\u2022 Violet\u2019s experimental objectives include CMG array architectures of four, five,\nand six CMGs that are different from the APT array. The result is that the two\nspacecraft together represent a broad range of array architectures.\n\n\u2022 APT\u2019s CMGs and its bus were more than an order of magnitude larger than Vio-\nlet\u2019s. They occupy different operational spaces for tactical spacecraft. So, taken\ntogether, the two spacecrafts\u2019 CMG experiments represent a broad assessment of\nCMG steering performance across a range of spacecraft scale.\n\n\u2022 Violet is designed to experiment with very high agility (10\u201340 deg/s), while\nAPT was meant to evaluate its CMG performance for a maximum base rate\nof 3 deg/s. These kinematics may be relevant for different missions, but the\nlarger dynamic range of the two spacecraft taken together would have made the\nCMG experiments relevant for a wider range of applications than would either\nspacecraft on its own.\n\n\u2022 APT\u2019s MMCS was designed so that the CMGs are mechanically aligned relative\nto each other with high precision, and this alignment is unaffected by its\nsoft isolation mount. In contrast, Violet\u2019s CMGs are individually isolated and\nmounted. The two spacecraft will therefore be able to evaluate CMG steering in\nthe presence of these two architectures to determine experimentally the relative\nbenefits.\n\n\n\n2.1 Spacecraft Applications 23\n\nDespite APT\u2019s cancelation, the Honeywell MMCS remains a promising prospect\nfor small-spacecraft applications because it fills a capability gap between the very\nsmall scale and the very large. This gap is indicated in Fig. 2.5. Figure 2.6 is a\ndrawing of Honeywell\u2019s mini-MCS.\n\n10-1\n\n10-1\n\n100\n\n101\n\n102\n\n103\n\n104\n\n10-2\n\n100 101 102 103 104\n\nMomentum (Nms)\n\nT\nor\n\nqu\ne \n\n(N\nm\n\n)\n\nRWAHR0610\nSmall Class RWA\n\nHigh Torgue Series\n\nRWA Constellation Series\n\nRWAHR04\nSmall Class\n\nCapability\nGap\n\nHeritage CMG\nTechnology\n\nFig. 2.5 Torque vs. momentum for some common CMGs and reaction wheels (McMickell\net al. [13])\n\nFig. 2.6 Isometric cut-away\nview of miniature\nmomentum-control system\n(McMickell et al. [13])\n\n\n\n24 2 Applications\n\nTacSat-2\u2019s mass properties and agility requirements sized the MMCS: 370 kg,\nwith a maximum inertia of 190 kg-m2. A slew-rate requirement of 3.0 deg/s\nand angular acceleration of 1.5 deg/s2 was meant to accommodate planned ORS\nmissions (McMickell et al. [13]). The integrated momentum devices provide a ready\nsolution for momentum control in a small spacecraft, filling that gap and enabling a\nsmall spacecraft to achieve the responsiveness that ORS seeks.\n\nSo-called momentum-control assemblies comprise a set of at least three devices\n(CMGs and/or RWAs). An MCS benefits from combining actuators, electronics,\nand software into an integrated package. In this package, the devices are pre-\naligned and vibration-isolated, with integrated control and steering algorithms,\nhealth-monitoring, and fault tolerant software (Hamilton [14] and Hamilton and\nUnderhill [15]). These combined attributes translate to a system that is lower mass,\nhas better vibration rejection, and is better aligned and held to greater tolerances\nthan separately integrated and controlled momentum devices.\n\nHoneywell was at the forefront of developing MCS technology. With the\nadvancements in hybrid bearings, ironless armature spin motors,, and modern\nsingularity avoidance algorithms (see Chap. 7), Honeywell was able to dramatically\nreduce the mass, volume, and power draw of a momentum-control system while\nkeeping performance constant and in many cases even increasing (Davis [16]).\n\nExamples of two current MCS designs developed by Honeywell are the MCS8\n(formally called MMCS) and MCS200. These systems consist of a four-roof CMG\narray with electronics. They are shown in Figs. 2.7 and 2.8 (McMickell et al. [13]).\n\n2.1.5 Satellite Servicing\n\nTechnologies for satellite servicing have seen accelerated growth in recent years.\nThanks in part to Congressional support for this area within NASA\u2019s technology\nbudget, the Satellite Servicing Capabilities Office at Goddard Spaceflight Center\nhas demonstrated a number of successes in fluid transfer and mechanical grappling\nin orbit for spacecraft that include commercial satellites. This capability can extend\nthe life of existing satellites and enable failed satellites to complete their missions.\nWhen satellite servicing becomes common, requirements on satellite reliability may\nbe relaxed, making spacecraft more affordable.\n\nThe work has its origins in Shuttle-era repair missions beginning with Solar\nMax (1984). Several other commercial spacecraft retrievals and repairs followed,\nculminating in the series of Hubble Space Telescope repair missions in the 1990s.\nCurrently at least two commercial companies are working in this area: ITT Excelis\nand ViviSat. The latter is a collaboration between ATK and Space Systems/Loral.\nFurthermore, DARPA has been sponsoring work on in-orbit assembly of spacecraft\nfrom components reclaimed from other spacecraft, known as the Phoenix Program.\n\nWhen the servicing spacecraft makes contact with its client (or target) such as in\nFig. 2.9, the angular momentum of the two becomes that of a single, joined, rigid\nbody and manifests as angular velocity of that body. It is possible, in fact nearly\n\n\n\n2.1 Spacecraft Applications 25\n\nFig. 2.7 MCS8 (Courtesy of\nHoneywell Defense and\nSpace)\n\ncertain, that the mass center of the two spacecraft would be offset from the point\nof contact and from their relative velocity. Consequently, the angular momentum of\nthe pair can be nonzero after contact, even if neither has angular momentum about\ntheir respective mass centers before contact.\n\nPresumably only one spacecraft actively controls its attitude at the moment\nof contact. Its attitude control responds to this change in angular velocity by\ncommanding the momentum system to apply torque. The suddenness of this change\nrequires high torque and suggests that an array of single-gimbal CMGs may be the\nbest choice for the momentum system of a satellite-servicing vehicle. To date, no\nsuch momentum system has been implemented. Perhaps as these capabilities evolve,\nin the form of a system like NASA\u2019s proposed RESTORE spacecraft, the need for\nCMGs in this application will become evident (Long et al. [17]).\n\nEven more forward-looking concepts for on-orbit assembly at NASA have been\nconsidered, for example, the assembly of large space structures where the launch\nof the entire system is impossible. An example of such a mission is the assembly\nof large space structures from a multitude of heterogeneous, smaller satellites, as\n\n\n\n26 2 Applications\n\nFig. 2.8 MCS200 (Courtesy of Honeywell Defense and Space)\n\nFig. 2.9 Servicing satellite docking with tumbling defunct satellite\n\nsuggested in Fig. 2.10. Such missions require precise attitude control in addition to\na high torque and angular momentum capacity, both possibly achieved through an\narray of CMGs.\n\n\n\n2.1 Spacecraft Applications 27\n\nFig. 2.10 On-orbit assembly through heterogeneous satellite platforms\n\n2.1.6 Asteroid Grappling\n\nThe problem of how to manipulate a resident space object is a common thread\nbetween satellite servicing and asteroid grappling. An important difference is that\nthe mass properties and hard points for grappling are likely well known in the case\nof satellite servicing. However, an asteroid has poorly understood mass properties\nand may be nothing but a weakly bound collection of rubble. A satellite servicing\nmission may be able to feed-forward the contact disturbance. However, the unknown\nmass properties of the asteroid make this prospect less likely in asteroid rendezvous\nscenarios.\n\nNASA\u2019s proposed Asteroid Redirect Mission is intended as a low-cost demon-\nstration of critical technologies for Mars exploration, using existing hardware\nwherever possible. It also may open the door to asteroid mining and related\napplications of in-situ resource utilization (Strange et al. [18]). The uncertainties\ninherent in asteroid manipulation and the importance of mission assurance in the\nNASA context once again point to the need for a CMG-based attitude-control\nsystem for asteroid applications of the future.\n\n2.1.7 Space Robotics\n\nRobotics in space benefit from managing the angular momentum of a multibody\nsystem, such as a robotic arm, so that the spacecraft on which the arm is mounted\nfeels minimal reaction. In the absence of a ground against which to react, such\nrobotic systems pose a number of technical challenges. There are several ways\nto achieve reactionlessness, but a novel approach is to embed momentum devices\nwithin the multibody system, using those internal moments to steer the various links.\nAn example is shown in Fig. 2.11.\n\n\n\n28 2 Applications\n\nFig. 2.11 Reactionless Gimbal (Loewenthal [19])\n\nThis approach has been proposed for coelostat telescopes, which are optical\nsystems that may include a \u201ccoud\u00e9\u201d or bent path. These jointed telescopes benefit\nfrom reactionless motors, such as a reaction wheel whose momentum absorbs the\nmotion of the telescope body. The result is a mechanically quieter system that\nreduces vibration of spacecraft components such as solar arrays, leading to lower\noptical jitter.\n\nCMGs have also been proposed as a means to manage the momentum within a\nmultibody system, such as a robotic arm with a camera mounted as its end-effector.\nA scissored pair of CMGs replaces a single reaction wheel in this concept, enabling\nfar more agile motions for a given electrical power (Carpenter and Peck [20]).\nFigure 2.12 illustrates this concept. Figure 2.13 shows a prototype of a three-link\nsystem (Carpenter and Peck [20]).\n\n2.2 Terrestrial Applications\n\nEarly technological innovation in momentum devices for space benefited from\nterrestrial advances in tribology and materials science. In fact, in the 1800s precur-\nsors of modern CMGs were used for nautical applications. The Sperry Gyroscope\nCompany (founded in 1910) is the ancestor of today\u2019s Honeywell Defense and\nSpace Electronics Systems, where most contemporary CMGs are built. In recent\nyears, space technology has begun to inform terrestrial applications in automotive\nand nautical domains, bringing momentum-control full circle.\n\n\n\n2.2 Terrestrial Applications 29\n\nFig. 2.12 Two-axis coelostat system with scissored-pair actuation\n\nFig. 2.13 CAD model of\nthree-link robotic system with\nCMG scissored pairs (top)\nand prototype (bottom)\n\n\n\n30 2 Applications\n\nFig. 2.14 Brennan\u2019s gyroscopic monorail. Patent (left), and prototype (right)\n\n2.2.1 Brennan\u2019s Monorail\n\nAn early terrestrial application of CMGs is Louis Brennan\u2019s monorail concept\n(Brown [21]). Figure 2.14 shows two rotors, which resemble a scissored pair,\ncapable of stabilizing a two-wheel cart. Gearing between the two rotors directs the\ngyroscopic torque along the rail direction, preventing the train from tipping over\n(Brennan [22]).\n\nBrennan\u2019s monorail was featured at the Japan-British Exhibition at the White\nCity, London, in 1910. The car carried 50 passengers on a circular track at up\nto 20 mph. Brennan built two such vehicles, but the concept ultimately failed to\ndevelop commercially.\n\n2.2.2 Wolseley\u2019s Two-Wheeled Wonder Car\n\nAs far back as 1914, CMGs were used to stabilize two-wheeled vehicles. One such\nexample was the Wolseley\u2019s Two-wheeled Wonder Car shown in Fig. 2.15 built in\n1914. The stabilizing gyro concept for the car which consisted of 40-in. gyroscope\nspun at 3000 rpm, connected to weighted pendulums was finished in 1913 and the\ncar was made public in 1914.\n\n\n\n2.2 Terrestrial Applications 31\n\nFig. 2.15 Wolseley\u2019s two-wheeled wonder car\n\n2.2.3 Lit Motors\n\nLit Motors\u2019 C-1 vehicle is a modern-day application of Brennan\u2019s principles in many\nrespects. However, it contains a number of innovations in the feedback control of\nthese momentum devices that would were completely unknown 100 years ago. Its\ntwo-wheel automobile combines the speed and efficiency of a motorcycle with the\naccessibility of a sedan, thanks to roll stabilization provided by a scissored pair of\nsingle-gimbal CMGs. Figure 2.16 shows the C-1 in motion and its internal scissored\npair.\n\n2.2.4 Nautical Roll and Pitch Stabilization\n\nThe use of spinning rotors to stabilize roll (sometimes pitch) of a sea vessel goes\nback to the nineteenth century. These devices were passive, transmitting base rate to\ntorque that was taken out through friction in the gimbal. In 1931 the luxury vessel\nConte Di Savoia was fitted with three large gyros meant to provide a comfortable\nenvironment for its passengers. Figure 2.17 shows two of these devices.\n\nSeakeeper Inc. currently produces a line of actively controlled CMGs for a\nrange of seagoing vessels. They are designed to achieve 70\u201390 % roll reduction on\nboats up to 20 t, vessels 30\u201350\u2019. It is a substantial advancement over its nineteenth\nand twentieth century predecessors, with digital feedback control of the gimbal\nand evacuated rotor housing. These CMGs are the largest in existence, far out-\nperforming even the ISS CMGs in torque and momentum with up to 35,000 Nm\nof output torque and 78,000 Nms of angular momentum. Figure 2.18 shows five\ninstalled in a yacht.\n\n\n\n32 2 Applications\n\nFig. 2.16 Lit motors C-1 vehicle (top) and internal scissored pair (bottom) (Image Courtesy of Lit\nMotors)\n\n2.3 Chapter Summary\n\nSpacecraft must manage their orientation to achieve their missions, whether through\npassive techniques such as spin stabilization or through active attitude control.\nMomentum actuators expend no propellant, and their operating lifetime often\nexceeds a decade. For these and many other reasons, momentum control is ubiq-\nuitous in space. It has been so since the dawn of the space age, and these principles\ncontinue to inform the design of contemporary spacecraft. An ever-increasing\nnumber of applications ensures the relevance of momentum-control principles\nand the value of investment in momentum-device technology development for\ndecades to come. Some of these applications bring space technology down to earth.\nExamples include automotive systems like Lit Motor\u2019s C-1 and nautical applications\nthat include roll and pitch stabilization with SeaKeeper Gyros. These examples\ndemonstrate that the value of momentum-control technology development is not\nexclusive to systems for earth observation and human space. This technology can\nhave a broad impact on robotics, transportation, and even human health in ways that\nthe early pioneers of gyroscopic actuation likely would not have imagined.\n\n\n\n2.3 Chapter Summary 33\n\nFig. 2.17 Two of the Conte Di Savoia roll stabilizers\n\nFig. 2.18 Five Seakeeper gyros (Image Courtesy of Seakeeper, Inc.)\n\n\n\n34 2 Applications\n\nReferences\n\n1. S. Zammit, Control and dynamics simulation facility at hughes space and communications, in\nAIAA Modeling and Simulation Technologies Conference, New Orleans, LA, 1997, pp. 10\u201301\n\n2. J. Smay, Universal spacecraft attitude steering control system. US Patent 5,692,707, 1997\n3. M. Yuan, A. Wittmann, Tilting momentum wheel for spacecraft. US Patent 5,112,012, 1992\n4. R. Stribling, Hughes 702 concentrator solar array, in Photovoltaic Specialists Conference,\n\n2000. Conference Record of the 28th IEEE (IEEE, 2000), pp. 25\u201329\n5. B. Bialke, E. Stromswold, Reaction wheel actuator with two newton-meter torque capability\n\nfor increased spacecraft agility, in Proceedings of the 6th International ESA Conference on\nGuidance, Navigation and Control Systems, 2006\n\n6. W. Lim, J. Salvatore, Method and system for maintaining communication with inclined orbit\ngeostationary satellites. US Patent App. 12/657,188, 2010\n\n7. D. Poli, E. Angiuli, F. Remondino, Radiomeric and geometric analysis of worldview-2 stereo\nscenes. Int. Arch. Photogramm. Remote. Sens. Spat. Inf. Sci. 38(1), 1 (2010)\n\n8. N. Bedrossian, S. Bhatt, M. Lammers, L. Nguyen, Y. Zhang, First ever flight demonstration\nof zero propellant manuevertm attitude control concept, in Guidance, Navigation, and Control\nConference, vol. AIAA-2007-6734 (Hilton Head, South Carolina), 2007, pp. 1\u201312\n\n9. L3 Space and Navigation, Double-gimbal cmg datasheet (2015), http://www2.l-3com.com/\nspacenav/pdf/datasheets/\n\n10. J. Foust, Emerging opportunities for low-cost small satellites in civil and commercial space, in\n24th AIAA USU Small Satellite Conference, 2010\n\n11. J. Gersh, M. Peck, Violet: a high-agility nanosatellite for demonstrating small control-\nmoment gyroscope prototypes and steering laws, in AIAA Guidance, Navigation and Control\nConference, 2009, pp. 10\u201313\n\n12. Air Force Material Command, Plug and Play (PnP) Spacecraft Technologies (TacSat-5), Broad\nAgency Announcement (BAA-RV-09-01), AFRL/RVKV-Kirtland AFB (2009)\n\n13. M. McMickell, P. Davis, F. Leve, C. Schudrowitz, A momentum control system for agile\nresponsive space satellites, in 8th Responsive Space Conference (AIAA, 2010)\n\n14. B. Hamilton, Turnkey cmg-based momentum control for agile spacecraft, in AAS Advances in\nthe Astronautical Sciences, vol. 149, 2013\n\n15. B. Hamilton, B. Underhill, Modern momentum systems for spacecraft attitude control. Adv.\nAstronaut. Sci. 125, 57 (2006)\n\n16. P. Davis, Momentum system concepts and trades for the new class of smaller lower cost\nsatellites. Adv. Astronaut. Sci. 125, 13 (2006)\n\n17. M. Long, A. Richards, D. Hastings, On-orbit servicing: a new value proposition for satellite\ndesign and operation. J. Spacecr. Rocket. 44(4), 964 (2007)\n\n18. N. Strange, T. Landau, G. Lantoine, T. Lam, M. McGuire, M. Burke, L. Martini, J. Dankanich,\nOverview of mission design for nasa asteroid redirect robotic mission concept, in 33rd Interna-\ntional Electric Propulsion Conference (The George Washington University, Washington, DC,\n2013)\n\n19. S. Loewenthal, Reactionless, momentum compensated payload positioner. US Patent\n5,751,078, 1998\n\n20. M. Carpenter, M. Peck, Reducing base reactions with gyroscopic actuation of space-robotic\nsystems. IEEE Trans. Robot. 25(6), 1262 (2009)\n\n21. D. Brown, Energetics of control moment gyroscopes in robotic joint actuation. Ph.D. Thesis,\nCornell University, 2009\n\n22. L. Brennan, Means for imparting stability to unstable bodies. US Patent 796,893, 1905\n\nhttp://www2.l-3com.com/spacenav/pdf/datasheets/\nhttp://www2.l-3com.com/spacenav/pdf/datasheets/\n\n\nChapter 3\nRequirements Development for Momentum\nControl Systems\n\nThis chapter addresses the subject of how to flow spacecraft agility requirements\ndown to an array of momentum devices and provides guidelines for choosing the\nappropriate technology. We shall see that the design trades in selecting and sizing\nmomentum devices span orders of magnitude in performance, complexity, and cost.\nTherefore, to arrive at an efficient and cost-effective design, it is important not to\nover-specify the momentum-system requirements.\n\n3.1 Quantifying Agility Requirements\n\nWe begin the process by quantifying an \u201cagility\u201d metric. A typical day in the life of a\nspacecraft attitude control system is generally allocated to two modes of operation.\nThe first consists of tracking a target or commanded attitude profile. This mode\ndrives requirements for stability and precision but generally does not influence the\nsizing of the momentum system because vehicle accelerations and rates are low\nin this mode. The second mode of operation, executing slew maneuvers between\ntargets or attitudes, is where the need for agility resides. A more agile vehicle\ncompletes these maneuvers in a shorter period of time, and thus requires some\ncombination of more vehicle rate and more vehicle acceleration. These kinematics\ndrive the sizing of the momentum system.\n\nEuler tells us that a rigid body can rotate about a single eigenaxis to slew from any\nattitude to any other, and thus for quantifying agility requirements, we shall employ\neigenaxis slews (Fig. 3.1). The figure shows the line of sight (LOS) associated with\nthe spacecraft\u2019s payload as it slews from its initial orientation to its final orientation.\nThis simplifies the problem to a single degree of freedom.\n\nFor a first cut at the requirements, we need to know only the angle of rotation\nabout the eigenaxis and how long the spacecraft has to perform the maneuver. The\nrequirements can be represented in a plane whose abscissa is time and ordinate\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_3\n\n35\n\n\n\n36 3 Requirements Development for Momentum Control Systems\n\nFig. 3.1 Eigenaxis slew\n\nis slew angle. For a typical day in the life, a spacecraft\u2019s slew maneuvers are\nrepresented by a collection of points in this plane. To size an MCS, we must compare\nthese points to the capability of the MCS in that plane.\n\n3.1.1 Slew Angle vs. Time\n\nTo analyze the problem, we must make some assumption regarding the nature of\nthe slew maneuver profile. One example might be bang-bang acceleration. In this\nscenario, the vehicle accelerates as quickly as possible to some maximum velocity,\nthen decelerates as quickly as possible at the end of the maneuver to return to the\nrest state. Clearly, this approach results in the fastest possible slew within the limits\non the available acceleration and velocity.\n\nThere are reasons why we might choose to use a less aggressive slew profile.\nFor example, an aggressive slew might \u201cring up\u201d flexible modes in the spacecraft\nstructure, lengthening settling time, and thereby compromising the benefit of the\nrapid slew. In these cases, it is common to remove various frequencies from the slew\nby pre-filtering the commanded motion or choosing a smooth angle-vs-time profile.\nAn example of such a slew is the versine discussed in Chap. 4, a 1-cos(t) function.\nA versine slew exhibits longer slew times given the same limits on acceleration (?)\nand velocity (!) when compared to the bang-bang, but the frequency content may\nexclude the natural frequencies of the spacecraft structure. Another less aggressive\napproach is to limit vehicle jerk (j), the first derivative of acceleration. We shall see\nthat in the case of CMGs, the hardware limits vehicle jerk because the rate of the\nCMG gimbal (and thus the vehicle acceleration) cannot be changed instantaneously.\nFor these reasons, the analysis here focuses on a bang-bang jerk motion. This work\n\n\n\n3.1 Quantifying Agility Requirements 37\n\nFig. 3.2 The bang-bang jerk slew maneuver\n\ncan be modified to accommodate the chosen slew profile for a given mission, or\nappropriate margin can be added to these basic results.\n\nThe plots of Fig. 3.2 illustrate the bang-bang jerk slew profile, in which a finite\nspacecraft jerk is assumed. When this jerk is applied for t1 seconds, the spacecraft\nreaches its maximum acceleration capability.\n\nThe spacecraft dwells at this peak acceleration if necessary for t2 seconds,\nso that the velocity reaches the maximum available. The spacecraft then dwells\nat maximum velocity for t3 seconds, if necessary, then begins a mirror-image\ndeceleration. At the end of a slew TF seconds in length, the spacecraft arrives at\nthe displacement ?F with zero velocity, acceleration, and jerk.\n\nThe text to the left of the plot identifies the physical behavior of the CMG or\nRWA that corresponds to jerk, acceleration, or velocity of the vehicle. For example,\nconsider scalar angular acceleration, ? which we know from one-dimensional\nNewtonian mechanics (? D J?) results from torque ? . In the case of a reaction\nwheel, this torque comes from the spin motor (which causes wheel acceleration\nin the opposite direction). However, for a CMG, the output torque is gyroscopic,\nfollowing the vector relationship ? D !G=B ? hr. The vector !G=B in this equation\nis gimbal angular rate, as discussed in Chap. 4. This shift by one time derivative\nfrom the CMG kinematics to the spacecraft kinematics is a characteristic of CMGs\nwhich must be understood in the sizing of the actuators. The maneuver plotted in\nFig. 3.2 is characterized by the following relationships, given the fixed jerk, j:\n\nTF D 4t1 C 2t2 C t3\n?F D j.t1/.t1 C t2/.2t1 C t2 C t3/ (3.1)\n\n\n\n38 3 Requirements Development for Momentum Control Systems\n\nFig. 3.3 Angle vs. time\n\nA plot of total slew angle ?F vs TF consists of three distinct segments. A very\nshort slew might consist only of four periods of jerk-limited motion, t1 seconds\neach, with t2 D t3 D 0. In this case, t1 is insufficient for the acceleration to reach its\nlimit, and the equations reduce to\n\nTF D 4t1\n?F D j.t1/.t1/.2t1/ D jT\n\n3\nF\n\n32\n(3.2)\n\nSuch a short slew is called \u201cjerk-limited\u201d because the limits on acceleration and\nvelocity are not reached, and therefore only the jerk limit is relevant. Figure 3.3\nplots ?F vs TF for a random choice of acceleration and jerk limits, and with the\nvelocity limit normalized. The angle during the jerk-limited segment is cubic in TF\nand is shown in red. For longer slews, t1 reaches its maximum value (because the\nspacecraft reaches its acceleration limit), and t2 begins to increase from 0. In this\nregion, the slew is \u201cacceleration limited\u201d because the time is constrained only by\nthe maximum acceleration; the maximum velocity is never reached. In this region,\nshown as green on the plot, the relationship is quadratic in TF. Finally, for still longer\nslews, the spacecraft reaches maximum velocity and dwells there for t3 seconds.\nFor motion that falls within the \u201cvelocity-limited\u201d segment (blue in the plot), larger\ndisplacement requires additional time, which increases linearly in inverse proportion\nto the velocity limit.\n\n\n\n3.1 Quantifying Agility Requirements 39\n\nThe unachievable, ideal case is indicated with the text \u201cinfinite jerk and\nacceleration.\u201d The horizontal distance between the dark blue segment and this ideal\nline is the additional time required due to limitations on acceleration and jerk.\nIn momentum-system design, there is often a trade to be made between torque\nand momentum, i.e., spacecraft acceleration and velocity. In view of the preceding\ndiscussion, that trade is influenced by time available for the slew. Very short slews\nmay place more value on acceleration, and therefore actuator torque, while longer\nslews almost always benefit from higher vehicle velocity, and therefore momentum\n(Hamilton and Underhill [1] and Hamilton [2]).\n\n3.1.2 Performance Ratios: Vehicle\n\nWe now introduce the concept of performance ratios as a convenient way to score\nthe agility of a vehicle. Using these metrics allows us to discuss certain key time-\nbased quantities independently of the actual angular deflection.\n\nThe previous section established that the time t1 is bounded by the ratio of\nmaximum acceleration to maximum jerk. Of similar importance is the ratio of\nmaximum velocity to maximum acceleration. Both ratios have dimensions of time,\nwhich proves useful. With this in mind, we shall define two parameters, Kc and Ka:\n\nKc D max acceleration / max jerk\n\nKa D max velocity / max acceleration\n\nKc is the time required for the spacecraft to reach maximum acceleration given\nmaximum jerk, and Ka is the time it takes to reach maximum velocity given\nmaximum acceleration. By manipulating Eq. (3.1), we can identify the times at\nwhich the transitions between the segments occur as a function of the ratios, as\nshown in Fig. 3.4.\n\nThe jerk and acceleration limits are not shown in Fig. 3.3 but are now indicated\nin the lower left of Fig. 3.4 for the specific case of Kc D 0:2, Ka D 2. In the\nformulas, !SC is the maximum spacecraft rate. At this point in the requirements-\nanalysis process, limits on velocity, acceleration, and jerk are not yet known. And\nyet, because we know the ratios among them, we can say exactly how much longer\na large angle slew (blue) takes in practice compared to the ideal slew (cyan) that\ndoes not account for hardware limitations: Ka C Kc or 2.2 s in this specific example.\nFurthermore, any slew lasting less than 4.4 s cannot reach the maximum design\nvelocity and thus is acceleration limited. Similarly, any slew under 0.8 s is jerk-\nlimited. Given information about how rapidly the spacecraft is required to complete\nits slews, we now have powerful insight into how to select quantities that directly\ndrive the hardware design.\n\n\n\n40 3 Requirements Development for Momentum Control Systems\n\nFig. 3.4 Segment transition points\n\n3.1.3 Performance Ratios: Momentum System\n\nWe now recall that for a vehicle slewing about a single axis, H D J! and ? D J?,\nwhere in this context, J is the vehicle inertia about the eigenaxis. So if we define a\nquantity Ka to be the ratio of vehicle !=?, then it is also the ratio H=? . This ratio\nis important because momentum and torque are the key performance parameters of\nthe array of momentum devices. Similarly, as in the annotations of Fig. 3.2, if Kc\nis the ratio of vehicle ?=j, it is also the ratio of the CMG gimbal P?= R?. With these\ngeneral principles in mind, let us examine typical values of these ratios for realistic\nmomentum devices, as illustrated in Fig. 3.5.\n\nThe ratio Kc represents the time the vehicle takes to reach maximum acceleration\n(torque). For an RWA, where achieving the necessary torque requires only applying\ncurrent to the motor, this happens very quickly (Kc is very small). However, for a\nCMG, achieving the necessary vehicle torque requires accelerating the gimbal to\nits maximum rate. For typical CMGs, reaching this peak gimbal rate takes around\n200 ms. This time is driven by the gimbal torque-motor design.\n\nThe ratio Ka represents the time the vehicle takes to reach maximum velocity\n(given maximum acceleration). For an RWA, where torque is limited by power\nconsiderations, this number is typically large (>100 s), i.e., an RWA can take\n\n\n\n3.1 Quantifying Agility Requirements 41\n\nFig. 3.5 Typical performance ratios\n\nminutes to accelerate to its maximum speed. However, a CMG can change its\nmomentum direction over the angular range of interest in seconds. The low values\nof Ka possible using CMGs make agile vehicles practical.\n\nSome caution must be exercised in choosing Ka and Kc to be very far from these\ntypical values. We know that performance is driven by the sum of these two, and Ka\nis generally larger. One might therefore jump to the conclusion that reducing Ka as\nmuch as possible is the right choice, and this might be achieved by increasing gimbal\nrate (more torque). The fallacy here is made evident by recognizing that increasing\ngimbal rate also increases the value of Kc, thus diminishing the return. The H and\n? available at the array level are also influenced by how the array is controlled (see\nChap. 7), and this is another way to influence Ka.\n\n3.1.4 Vehicle Velocity\n\nThe shape of the curve in Fig. 3.4 and the times associated with the different\nsegments are completely determined by the ratios Ka and Kc. The final quantity\nreferred to in Fig. 3.5 is the maximum vehicle velocity. This quantity scales the\nordinate (slew angle) axis of Fig. 3.4, completing the picture. We now have a way to\ndirectly relate these three parameters to the slew angle vs. time requirements.\n\n\n\n42 3 Requirements Development for Momentum Control Systems\n\nIt is useful to note that these relationships hold for spacecraft of similar agility\nregardless of their size. Recalling that H D J!, the chosen vehicle velocity\ncombined with the inertia of the vehicle directly influences the net momentum that\nthe array of CMGs or RWAs must produce. This requirement in turn influences\nthe size of the momentum devices, and thus the size, weight, and power of the\nmomentum system.\n\n3.1.5 Summary\n\nThis section established the general approach for translating vehicle agility into\nmomentum-system requirements. Once we know the momentum and Ka required,\nwe can begin the process of momentum device selection. Other factors will also\nenter into these trades, as explained below.\n\n3.2 Momentum Device Technology\n\nMomentum devices fall into two broad categories. First, the RWA, is a single degree-\nof-freedom device consisting of a rotor and a motor. In this device the rotor speed\nis manipulated, producing a momentum vector of varying length, whose direction is\nfixed in the body frame. The other category, the CMG, is any of various devices\nemploying motorized gimbal mechanisms to redirect the rotor spin axis. In this\ndevice the rotor is typically spun at a constant speed, resulting in a momentum\nvector that has fixed length, but varying direction. Either type of device can be used\nto produce attitude control torques by exchanging momentum with the spacecraft.\nBut we shall see that there are practical advantages to using certain device types for\ncertain applications. This section discusses each of the devices. Subsequent sections\nexamine each of the key trades and offer guidelines for selection.\n\n3.2.1 Torque, Momentum, and De-mystifying Precession\n\nBefore we can discuss these devices, we must digress briefly to review some\nfundamental physics. Of interest is what happens to a body when it experiences\na torque. Chapter 4 provides the foundational mechanics. This section seeks to\ncomplement those mathematics with physical insight.\n\nWe begin with a body at rest, for example, an RWA rotor with zero spin speed.\nIts angular momentum, h, is zero. By definition torque is the rate of change of\nmomentum in an inertial frame, ? D dhdt , and both are vector quantities. If we apply\na constant torque in the y direction for time dt, as shown on the left side of Fig. 3.6,\nthe resulting angular momentum is dh in the y direction. If we continue to apply the\n\n\n\n3.2 Momentum Device Technology 43\n\ntorque for another dt seconds, and then another, the net angular momentum vector\ncontinues to grow in the y direction. Since the angular momentum of a body is\nrelated to its inertia and rate by h D J!, body rate increases by d! for each dt time\nincrement. This increase is an acceleration, ?, following the familiar equation:\n\n? D dh\ndt\n\nD Jd!\ndt\n\nD J? (3.3)\n\nNow, what if the body is not initially at rest? We next consider the case in which\nthe body is initially spinning about the x axis of Fig. 3.6, such as in the gimbal mount\nof a CMG. Its initial angular momentum, hr, is large (relative to the magnitude of\ndh) in the x direction. If we apply a constant torque as before about the y axis for\ntime dt, the resulting angular momentum is the vector sum of the initial hr and the\ndh in the y direction. If we continue to apply the torque for another increment dt,\nand then another, the net angular momentum vector continues to change and begin\nto arc over toward x, as illustrated in the right side of Fig. 3.6.\n\nThe figure shows how the net momentum vector varies for this case. As we can\nsee, the net momentum started in the x direction and is rotating about an axis out of\nthe plane of the page. With the passage of each dt, the net vector rotates through an\nadditional angle d? in accordance with dh D d? ? h. This result says that the torque\nresults in a body rate (not an acceleration as before), and that rate is about an axis\nout of the plane of the page. Specifically,\n\n? D dh\ndt\n\nD d?\ndt\n\n? h D ! ? h (3.4)\n\nFig. 3.6 Increments of momentum\n\n\n\n44 3 Requirements Development for Momentum Control Systems\n\nEquation (3.8) is the classical precession result from undergraduate studies of\ngyroscopic dynamics. For many, the spatial (cross product) and temporal (one time\nderivative) differences between ? D J? and ? D ! ? h are inexplicable and\nsimply taken on faith. But we can now see that both behaviors are the direct result\nof the same dhdt when a torque is applied. This is a recurring theme: when studying\nmomentum devices, it is much more instructive to visualize momentum vectors than\ntorque.\n\n3.2.2 The Reaction Wheel\n\nThis momentum device operates in a single degree of freedom, with the spin axis\nof the rotor fixed to the vehicle structure by spin bearings as illustrated in Fig. 3.7.\nThe output torque is produced directly by the same motor that controls rotor speed.\nThat is, the motor acts on the rotor, and reacts on the spacecraft\u2014hence the name\n\u201creaction wheel.\u201d The action on the rotor causes it to accelerate as ? D J?, as\ndiscussed in the previous section.\n\nIn the production of torque, this machine uses mechanical shaft power equal to\ntorque times the spin speed of the rotor: P D ? ?!. As such, it uses the greatest energy\npossible in changing its angular momentum. Typical large RWAs have maximum\nrotor speeds in the range from 2000\u20136000 rpm, with small RWAs going even higher.\nAt 2000 rpm, 1 Nm of torque (0.74 ft-lb) requires 209 W of power, without even\nconsidering the heat power dissipated in the motor, electronics and bearings. To\nreduce the power, one could modify the rotor design by reducing its speed and\nincreasing its inertia (size, weight), but these trades have disadvantages of their own.\nTherefore reaction wheels capable of greater than 1 Nm of torque are rarely seen.\n\nFig. 3.7 Reaction wheel\n\n\n\n3.2 Momentum Device Technology 45\n\nFig. 3.8 Double-gimbal\ncontrol moment gyroscope\n\n3.2.3 The Double-Gimbal Control Moment Gyroscope\n(DGCMG)\n\nUnlike the RWA, which fixes the spin axis to the vehicle using bearings, this device\nallows the rotor\u2019s spin axis to rotate in the spacecraft reference frame using a double-\ngimbal mount, as illustrated in Fig. 3.8. Also unlike the RWA, the rotor\u2019s spin speed\nis constant during normal operation.\n\nIn this configuration, the rotor acts as a free gyroscope. It has an angular\nmomentum vector h, directed along its spin axis, with magnitude Jr?r. When torque\nacts on the rotor, it precesses in accordance with ? D !?h as derived in Sect. 3.2.1.\n\nAs in the RWA, the output torque of this device (the torque applied to the\nspacecraft) is directly the result of motor reactions. The outer gimbal motor reacts\ndirectly, while the inner gimbal motor reacts through the outer gimbal bearings. As\nsuch, the motors that position these gimbals must be sized to produce the entire\noutput torque for which the device is designed in addition to their own control\ntorques.\n\nHowever, unlike the RWA, the rotation speed of these motors is very low\ncompared to the spin speed of the rotor. We recall that the RWA motor is severely\nlimited in torque capability due to the mechanical power (P D ? ? !). The CMG\ndoes not have this limitation, and can therefore produce greater output torques.\n\nIt can be shown (see Chap. 9) that, holding the power density and KM density\nconstant, both the power and weight of a typical motor increase as the 2/3 power of\ntorque. As the motor size increases, so do the gimbals and their associated structure.\nIntroducing gearing can help. However, eventually it becomes a challenge to design\na double-gimbal CMG with reasonable and prudent structural mode frequencies and\nwe again reach a limitation on torque production. This limit generally falls in the\nrough vicinity of 50\u2013100 Nm. Perhaps the largest DGCMGs ever built are those\nproduced for the International Space Station, which are rated at 300 Nm.\n\n\n\n46 3 Requirements Development for Momentum Control Systems\n\nFig. 3.9 Single-gimbal\ncontrol moment gyroscope\n\n3.2.4 The Single-Gimbal Control Moment Gyroscope\n(SGCMG)\n\nThe single-gimbal CMG (SGCMG), as illustrated in Fig. 3.9, can be thought of as\nthe DGCMG of Fig. 3.8 with the outer gimbal (about ?2, above) removed. As a\nresult, the rotor spin axis is constrained to move in the plane normal to ?. If we torque\non the rotor with this single inner gimbal, we would expect the rotor to precess about\nthe axis of the outer gimbal (?2 in a DGCMG). Since that gimbal has been removed,\na constraint torque arises that eliminates motion in that axis, acting on the spacecraft\nthrough the inner gimbal bearings. This torque performs no mechanical work but is\nsufficient to cause the rotor instead to precess about the gimbal axis at the gimbal\nrate.\n\nThis curious by-product of gyroscopic physics results in a machine that possesses\nsignificant \u201ctorque amplification.\u201d This term describes a device with a relatively\nsmall gimbal motor that can produce very large output torques. Indeed, if such a\ndevice were attached to a fixed test frame and had very stiff gimbals (imposing the\nconstraint), one could not even tell by examining the dynamics of the gimbal axis\nthat the rotor was spinning. The motor torque required is simply that necessary to\naccelerate the gimbal inertia to produce the desired gimbal rate. The output torque\nfelt by the spacecraft is then the constraint torque ? D ? P??h, where P? is the gimbal\nrate and h is the rotor momentum vector.\n\nThis torque-amplification effect makes the single-gimbal CMG the clear power-\nefficient choice for the most agile vehicles, requiring the largest torque output. Large\nSGCMGs are in service in spacecraft applications with output torques well in excess\nof 1000 Nm. Very large CMGs for terrestrial applications exist with output torque\nin excess of 100,000 Nm that only require a few kW to operate.\n\n\n\n3.2 Momentum Device Technology 47\n\nFig. 3.10 Response to\nvehicle base rate\n\n3.2.5 Vehicle Rate and the SGCMG Gimbal Torquer\n\nThe preceding section stated that the dynamics of a SGCMG gimbal is independent\nof rotor momentum for the case of a very stiff gimbal fixed to a test frame. We now\nconsider the implications of having the device mounted to a spacecraft, which can\nbe in motion. We call this spacecraft motion the \u201cbase rate\u201d of the CMG.\n\nSpecifically, we consider the case in which the vehicle is rotating with an inertial\nvelocity !s about the output axis of the SGCMG (dashed black in Fig. 3.10). Those\nsame gimbal bearings that provided the constraint in the earlier discussion must now\nforce the rotor to rotate with velocity !s about the output axis along with the vehicle.\nThis configuration is illustrated in Fig. 3.10.\n\nBecause this is a gyroscope, if the bearings were to torque the rotor about the\n(dashed) output axis, the rotor would precess about the gimbal axis. To prevent this\ngimbal rotation, enough gimbal axis torque must be applied to make the rotor instead\nprecess (along with the vehicle) about the output axis, thus unloading the bearings.\nIf the gimbal torque motor is not strong enough to apply this torque, control of the\ngimbal is lost.\n\nOnly a torque about the gimbal axis can cause the gyroscope to move with the\nvehicle, and this torque must come from the gimbal torque motor. For large, agile\nvehicles, the base rate effect can quickly become the dominant sizing driver, often\nrequiring the torque motor to utilize a gearbox and/or draw a lot of power.\n\nAs we are assuming the worst case, where the vehicle base rate is purely about\nthe CMG output axis, the gimbal must produce a torque of ?g D !sh. Remembering\nthat the momentum of the CMG is sized to produce a desired vehicle momentum\nH D Js!s, we conclude that the requirement for gimbal torque is\n\n?g ? Js!2s (3.5)\n\n\n\n48 3 Requirements Development for Momentum Control Systems\n\nWe use the ? sign above to acknowledge that this equation does not distinguish\nbetween CMG momentum (h) and array momentum (H). However, regardless that\nthe gimbal torque may be somewhat less, the recognition that it varies as the square\nof vehicle rate is the basis for the note about high vehicle rates in the lower-right of\nFig. 3.5.\n\nAs a rule of thumb, gimbal torque less than 5\u201310 Nm can be produced by a\ndirect-drive CMG, i.e., without gears. Above this level, the weight and power of\nthe gimbal usually drives a geared design. Geared CMGs are common on large,\nagile spacecraft, but they are more complex and expensive to produce.\n\n3.2.6 Torque-Amplification Revisited\n\nNow that we have quantified the effect of base rate on the gimbal torque, we can\nquantify the torque amplification. Earlier, it was suggested that the gimbal motor\nneed only be sized to accelerate the gimbal inertia, but we now understand that it\nmust also be sized to oppose the precession from base rate. So\n\n?g D Jg?g C !sh (3.6)\n\nThe output torque from the CMG has already been shown to relate to the gimbal\nrate, !g, as ?o D ?!g ? h. Since these axes are always orthogonal, we have the\nscalar magnitudes\n\n?o D !gh (3.7)\n\nCombining these two equations, and assuming the gimbal acceleration torque is\nsmall compared to precession, we find that for any momentum:\n\ntorque amplification D ?o\n?g\n\n? !g\n!s\n\n(3.8)\n\nThis is a very powerful observation for spacecraft, whose maximum rate rarely\nexceeds a few degrees per second. Gimbals are easily designed with rates of 1 rad/s\nor more, therefore a SGCMG can achieve torque amplification easily over a factor\nof 10 on most spacecraft, and nearly 100 on some.\n\nAlternatively, Eq. (3.8) also explains why CMGs are not often found in applica-\ntions such as aircraft, which might be rolled at 30 deg/s or more. The potential for\nhigh base rate reduces the amplification, drives larger torque motors and negates the\nadvantage of the technology.\n\n\n\n3.3 Momentum Device Technology Tradeoffs 49\n\n3.3 Momentum Device Technology Tradeoffs\n\n3.3.1 Momentum and Torque\n\nAll of the candidate devices can be designed to store similar amounts of momentum.\nThe design needs only a rotor with a certain combination of inertia and maximum\nspeed. Given the same momentum, all the devices can produce similar spacecraft\nvelocity, and/or absorb similar amounts of stored momentum.\n\nHowever, distinctions among the various technologies discussed in Sect. 3.2,\nmake it clear that the range of torque available varies dramatically. The discussion\nof Sect. 3.1, in which Ka is defined as h=? , provides the key insight. A reaction\nwheel, which can have the same momentum as other momentum devices but is\nseverely torque-limited, exhibits the highest Ka. The DGCMG is in the middle, and\nthe SGCMG has the lowest value.\n\nKa defines the time it takes to accelerate the vehicle to maximum rate and thus\ndetermines how much longer a real slew requires than the ideal slew (one not\nconstrained by the device physics). The trade, therefore, comes down to agility.\nFigure 3.11 illustrates the tradespace for the various MCS technologies. The plot\n\nFig. 3.11 Torque, momentum, and agility of MCS technologies\n\n\n\n50 3 Requirements Development for Momentum Control Systems\n\nshows torque vs. momentum and includes dashed lines for various values of the\nagility metric, Ka. For convenience, the abscissa has a second scale showing the\nvehicle inertia that would require the indicated momentum for a slew rate of 3 deg/s.\nReaction wheel designs fall in the region of torque less than 1 Nm, and the torque is\neven less for smaller devices with smaller motors. Because the torque does not drop\nlinearly, lower Ka values are achievable using this technology on small spacecraft.\n\nThe design range for double-gimbal CMGs is generally less than 100 Nm,\nalthough the design mentioned earlier for the International Space Station is plotted\nwith a single dot, illustrating how far out of family it falls. Because of the torque-\namplification principle, devices with more momentum can produce larger torques\nusing similar gimbal rates. This principle results in a linear slope.\n\nFinally, the range suitable for single-gimbal CMGs provides the highest agility\nregardless of the size. Only SGCMGs can reach Ka values approaching 1, and they\ncan do so over the entire tradespace. Recall that the CMG gimbal torque required is\ndriven mostly by vehicle inertia and vehicle velocity squared, while a gimbal rate of\n1 rad/s results in Ka near 1 for any size. This analysis neglects the effects of array\nsteering on Ka, which are discussed in Chap. 7.\n\nThe lowest values on the plot presume that we are referring to traditional\nmechanical systems, fabricated with traditional techniques, and it is understood that\nby using MEMS technologies, even smaller devices are possible.\n\n3.3.2 Power\n\nAs discussed previously, in producing torque the RWA uses mechanical power\napproximately equal to torque times spin speed. Typical large RWAs have maximum\nrotor speeds in the range 2000\u20136000 rpm, with small RWAs going even higher. At\n2000 rpm, 1 Nm of torque requires 209 W of power, without even considering the\nheat power dissipated in the motor, electronics and bearings. However, when not\nproducing torque and at low rotor speeds, RWA \u201cbias\u201d power can be very small.\n\nCMGs, whose output torque is due to a mechanical constraint, require no transfer\nof energy to the rotor. This feature makes them much more efficient in torque\nproduction. One consideration, however, is that because they run continuously at\nhigh speed, they draw steady-state power to maintain that speed. This spin motor\npower (PM) can be approximated as the product of spin-bearing drag torque (?d)\nand rotor speed, scaled up by a factor to account for heat dissipated in the motor\nwindings:\n\nPM D s?d!r\nThe factor s varies nonlinearly as a function of motor design and operating point,\n\nbut can be taken to be roughly 1.1. When PM is combined with the bias power of\nthe electronics, PE, the sum is referred to as \u201cquiescent\u201d power, PQ:\n\nPQ D PM C PE\n\n\n\n3.3 Momentum Device Technology Tradeoffs 51\n\nThe term \u201cquiescent\u201d implies this is power drawn even when the CMG is not\nbeing used to produce torque. Driven predominantly by ?d, PQ is larger when larger\nspin bearings are required, and at higher spin speeds. Increased quiescent power\nimpacts not only the power that the spacecraft bus must supply to the CMG, but also\nincreases the heat dissipated in the spin bearings. This dissipation in turn affects the\nthermal design. These impacts of quiescent power and heat in the cost of optimizing\nan MCS is why larger CMGs tend not be run at speeds in excess of 10,000 rpm.\nSmaller CMGs with smaller bearings are able to more readily take advantage of the\nbenefits of high rotor speed in reducing CMG size. Recent work at Honeywell has\nshown that integrating vibration isolation technology within momentum systems\ncan allow the use of smaller spin bearings by attenuating the launch loads that often\ndrive their design.\n\n3.3.3 Vibration\n\nLike all rotating machines, momentum devices induce vibrations in the structure that\nsupports them. These vibrations have a rich but well-understood spectral content.\nThe spectrum is not broadband \u201cwhite\u201d or \u201ccolored\u201d noise of the type that might be\nexamined using power spectral density (PSD) plots. Instead, it consists of a comb of\ndiscrete frequencies at various multiples of the wheel speed. On a PSD plot, a tone at\na discrete frequency would produce a peak that is infinitely narrow and infinitely tall.\nTherefore PSD plots are inappropriate to the study of these vibrations. Instead, we\nplot the root-mean-square (rms) sinusoidal amplitude of each component frequency,\nsuch as would be obtained from a Fourier analysis. We can calculate the total rms\nnoise in a given band as the root-sum-square of the peaks in that band. Let us\nexamine some of the sources of vibration in these devices.\n\nOne of the key contributors is rotor balance, both static and dynamic. Static\nbalance measures how far the rotor center of mass is displaced from the spin axis.\nThis displacement is responsible for a centripetal force F D Me!2 transmitted\nto the spacecraft structure, where M is the rotor mass and e is the center-of-mass\ndisplacement. As such, the static balance is normally expressed in units of mass\ntimes displacement, for example, oz-in. Dynamic balance expresses how far the\nrotor\u2019s principal axis of inertia is tilted from the spin axis and is generally measured\nin oz-in2. The disturbance that arises is a torque vector, tracing out a cone around\nthe spin axis. Static and dynamic balance effects are generally felt predominantly at\nthe rotor spin frequency, with a small amount of harmonic content.\n\nAnother major contributor is bearing eccentricity. The bearings contribute a\nvariety of frequencies because there are multiple rotation rates within them. The\ninner race of the bearing moves with the shaft at the rotor spin speed. The group\nof balls in their ball carrier rotates at a slower speed. Individual balls rotate at a\nhigher speed. When we begin to track the frequency that results from dimensional\ntolerances or manufacturing flaws on various surfaces, we find these bearing\nfrequencies, their harmonics, and beat (difference) frequencies between these tones.\n\n\n\n52 3 Requirements Development for Momentum Control Systems\n\nAt each frequency, the bearing pushes the shaft off the centerline in a circular\nmotion. For certain frequencies, that circular motion can be \u201cretrograde,\u201d i.e., in\nthe direction opposite the rotor spin.\n\nThere is generally a bearing at each end of a rotor shaft. Further complicating\nthis spectrum is the fact that the tones from these two bearings are never identical.\nConsider the ball group frequency; it is determined by the diameters of the raceways\nand balls, all of which are subject to dimensional tolerance. As a result, while\nthe tones on each end of the shaft are close, they are not exactly equal. The beat\nfrequency between these nearly identical tones can have a period of many seconds\nor minutes. This beat accounts for the slow audible modulation in vibrations that\nwe are accustomed to when listening to a rotating machine. It also makes routine\nmeasurements of the vibrations difficult to repeat unless very long time averages\nare taken and processed. Tones appear to come and go. The relative phase of the\nspinning vectors at each end of the shaft changes, resulting in excitation of different\nstructural tones, etc.\n\nDespite the stochastic nature of these vibrations, it is possible, with some\ncare, to approximate their effect in computer modeling. When attempting to do\nso, the most important thing to recognize is that, unlike many disturbances, the\n\u201cforcing function\u201d arising from bearing rotation is neither a force nor a torque.\nThe balls are much stiffer than anything else in a typical structure, and their\ngeometric imperfections impose a displacement between the spinning shaft and the\nsurrounding structure. In so doing, they are stiff enough to push everything else out\nof the way. They can bend shafts, housings, and support structure, etc., as necessary\nto achieve this end. As a result, the amount of vibration force applied by the bearing\nis determined by the structures to which it is attached. When modeling a bearing\ndisturbance as an input to a finite-element model, we must represent the bearing\nby a very high-stiffness element (orders of magnitude higher than the rest of the\nstructure), and then apply a force differentially across that stiffness of F D kx,\nwhere k is the element stiffness and x is the desired displacement. Typical bearing\ndisplacements vary from tenths to tens of microinches, with each tone having its own\nvalue. For a given bearing design, these values must be determined empirically, and\ntheir statistical nature across a production lot kept in mind.\n\nAll of the tones in the spectrum vary linearly with wheel speed, resulting in a\ncomb of spectral content that shifts along the frequency axis with rotor speed. The\nCMG, whose speed is held constant, exhibits a stable and repeatable set of vibration\nfrequencies. As such it is possible, within reason, to engineer these devices such\nthat their disturbance frequencies do not coincide with the frequencies of certain\nkey spacecraft structural modes. In fact, it is possible to \u201ctune\u201d the system on orbit\nto minimize such excitations by making small adjustments to the rotor speeds.\nBy comparison, the RWA, whose rotor speed varies continually as momentum is\nexchanged, imparts vibration tones that sweep up and down the spectrum. In this\ncase, it is not practical to avoid structure excitation by design.\n\n\n\n3.3 Momentum Device Technology Tradeoffs 53\n\n3.3.4 Torque Accuracy\n\nAs the method of torque production for RWAs differs completely from that of\nCMGs, each must be discussed separately.\n\nFor a reaction wheel, the net output torque experienced by the spacecraft is equal\nto the motor torque less the friction torque of the spin bearings and any other source\nof drag. While the motor torque can be readily estimated from a measurement of\nthe current, the effects of friction are difficult to predict and vary nonlinearly with\nspeed, temperature, lubrication, etc. For a medium-sized RWA, it is not unusual\nfor the friction torque to be 10 % of the full scale output torque of the device.\nTherefore, if the RWA were commanded to 5 % of full scale torque, the friction\ncould be twice the control torque. This effect introduces significant error into the\nattitude control loop, often necessitating the use of a state-estimation strategy to\ndetermine the friction. Such strategies do not perform well when the rotor crosses\nzero speed (reverses direction). This is because friction and stiction variations are\nlargest in this region, and speed measurements are generally poor near zero speed.\nMany spacecraft attempt to bias the RWAs in an array away from zero speed during\nnormal operation. This can be achieved either by operating the spacecraft with a net\nmomentum bias, or by including more than 3 RWAs and biasing them against each\nother, using the null space of the array as discussed in Chap. 6.\n\nLike RWA bearings, the bearings of a CMG also exhibit friction. Because CMGs\noperate at a nearly constant spin speed, the spin-bearing friction is nearly constant.\nSpin-bearing friction is a consideration in system power but has little effect on\nperformance. Because the CMG output torque is determined by gimbal rate, CMG\ngimbals usually employ inner loops controlling the gimbal rate. Therefore gimbal\nbearing friction effects are mitigated by closed loop control to a great extent. Typical\ngimbal rate-loop control bandwidths are on the order of 10\u201315 Hz. While the effects\nof friction on performance are far lower than for an RWA, they still appear as a\nslowly changing torque command passes through zero, i.e., when the gimbal rate\nchanges direction. While the integral feedback in the rate loop \u201cwinds up\u201d to offset\nthe abrupt change in Coulomb friction, the gimbal momentarily stalls at zero rate.\nGeared CMGs exhibit this effect to a lesser degree than direct-drive ones.\n\nAside from friction effects, torque accuracy is generally the result of gain and\noffset errors. In the case of the RWA, the offset torque is low, but gain error can\noccur as a result of changes in motor Kt and the resistance of the current-sense\nresistor, both of which vary with temperature. The CMG performance, because of\nthe closed rate loop, is driven by the performance of the tachometer that measures\ngimbal rate and the tachometer\u2019s electronics. This is often an electromagnetic device\nsuch as a precision generator. Older CMGs with analog electronics did exhibit a\nrate-offset error due to electronics offset. Modern digital CMGs can mitigate this\noffset by monitoring changes in the gimbal position sensor in software and applying\na slow correction. Gain error in an electromagnetic tachometer can still occur due\nto variations in Kt over temperature. Some modern CMGs employ digital encoder\ntechnology to measure gimbal angle and rate. Such devices have effectively zero\nerror.\n\n\n\n54 3 Requirements Development for Momentum Control Systems\n\n3.3.5 Array Control\n\nIn this section, we consider the ease with which a body torque in three dimensions\ncan be produced by an array of momentum devices.\n\nAn array of n reaction wheels is by far the simplest to control. The change in\nnet momentum (in 3 axes) that results from changes in individual rotor momentum\n(n rotors) is a 3? n Jacobian matrix A. Because the RWAs are mounted in fixed\norientations on the vehicle, the coefficients of A are constant. The columns of A are\nthe unit vectors in the direction of the RWA spin axes. By taking the inverse of A\n(for n D 3), or a pseudoinverse (for n > 3), we obtain a constant n?3 control matrix\nAC such that\n\n?RWA D AC?cmd (3.9)\n\nThis matrix allows the attitude control system or the momentum control system to\ncalculate the torque to apply to each wheel to obtain the desired body torque.\n\nFor DGCMG, this mapping becomes more difficult. The output torques from this\ndevice are applied by the gimbals, and the rotor precesses in response. Each device\nhas not only one gimbal fixed in the body frame, but also another whose torque\naxis varies with time. As a result, the Jacobian varies with gimbal angle, which can\nchange quickly. Furthermore, a strategy to avoid gimbal-lock must be incorporated.\n\nFor SGCMG, array control is the most difficult. Again, the Jacobian varies\nwith gimbal angle. In this case, the Jacobian relates changes in net momentum to\nchanges in the CMG gimbal angles. Furthermore, arrays of SGCMGs exhibit a rich\nand complex set of internal singularities, which can make inverting the Jacobian\nimpossible. Singularities and methods for steering arrays of SGCMGs around and\nthrough them are addressed at length in Chaps. 5 and 7.\n\n3.4 Guidelines for Selecting Momentum Device Technology\n\nTable 3.1 offers general guidelines summarizing the trades among various\nmomentum-system technologies.\n\n3.5 Chapter Summary\n\nThis chapter offers metrics for quantifying the agility of a spacecraft that apply\ndirectly to the selection and sizing of momentum devices. The most common\nmomentum device technologies are described, along with various tradeoffs among\nthem. Finally, general guidelines are presented for the selection of a momentum\ndevice for a specific application.\n\n\n\nReferences 55\n\nTable 3.1 Momentum device selection guidelines\n\nRWA DGCMG SGCMG\n\nAgility\n(Fig. 3.11)\n\nBest for station\nkeeping, or slews\nthat take minutes\n\nMidrange Most agile, slews completed\nin seconds\n\nPower Lower quiescent\npower\n\nHigher quiescent power\n\nVery inefficient in\ntorque production\n\nMidrange Very efficient in torque\nproduction\n\nGeartrain N/A Recommended for\noutput torques in\nexcess of 10 Nm\n\nRecommended for gimbal\ntorques in excess of 10 Nm\n[see Eq. (3.5)]\n\nVibration Broad spectrum\nover operating\nspeed range\n\nAdjustable constant speed\nmakes avoiding key modes\npossible\n\nTorque\naccuracy\n\nOpen loop torque\nerrors due to\nfriction\n\nErrors mitigated by inner gimbal\nrate loop errors mitigated further\nby geartrain\n\nMotor Kt, Rsense Tach performance\n\nControl Simplest, with\nconstant control\nmatrix\n\nMore complex,\navoidance of gimbal\nlock\n\nMost complex, internal\nsingularity avoidance\n\nCost $ $$$ $$\n\nReferences\n\n1. B. Hamilton, B. Underhill, Modern momentum systems for spacecraft attitude control. Adv.\nAstronaut. Sci. 125, 57 (2006)\n\n2. B. Hamilton, Turnkey cmg-based momentum control for agile spacecraft, in AAS Advances in\nthe Astronautical Sciences, vol. 149, 2013\n\n\n\nChapter 4\nDynamics of Momentum-Control Systems\n\nIt is not enough to treat the momentum system as a black box, simply receiving\npower and control signals and imparting torque or momentum, as if it were any\nother element in a feedback-control block diagram. A momentum system offers\nunique opportunities to achieve robust and lightweight spacecraft designs, but\ntaking advantage of these opportunities requires careful attention to rigid- and\nflexible-body dynamics. This chapter provides the foundational equations of motion\nfor spacecraft with momentum-control devices and summarizes important flexible\neffects that drive the design of spacecraft that incorporate these actuators.\n\n4.1 Notation\n\nIt may be that dynamics analysis is fundamentally unsuited to being expressed with\nthe simple notation of other areas of physics; but for whatever reason, notation\namong dynamicists varies widely. There is so little universally accepted notation that\nwe find it necessary to explain the approach taken here. The following approach is\nbased on vector-dyadic (or tensor) notation, which recognizes the key distinction\nbetween vectors and matrices. A matrix is a collection of scalars\u2014some say\n\u201cmeasure numbers\u201d\u2014each of which represents the projection of a vector or a\ntensor onto a basis vector. For purposes of this discussion, the basis vectors are of\nunit length and always comprise a right-handed coordinate system as suggested in\nFig. 4.1. In this figure, the three ni are basis vectors ordered so that n1?n2 D n3. All\nvectors we refer to are sometimes known as \u201cfree vectors.\u201d They are mathematical\nobjects with magnitude and direction but are not associated with a coordinate system\nand do not involve a coordinate-system origin of some kind. They are not rays\nemanating from a point. When referring to three numbers in a vertical stack, one\noften casually says \u201cvector\u201d when the more explicit term would be \u201ccolumn matrix.\u201d\nSuch matrices always presuppose a coordinate system. However, in this chapter we\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_4\n\n57\n\n\n\n58 4 Dynamics of Momentum-Control Systems\n\nFig. 4.1 Right-handed\ncoordinate system with three\northonormal basis vectors\n\nTable 4.1 Vector/dyadic\nnotation\n\nScalar a\n\nMatrix v;D\n\nVector v\nDyadic D\n\nemphasize the coordinate-free world of vectors and tensors so that the derivations\nare unencumbered by a choice of coordinate system. Only when a coordinate system\nis helpful do we explicitly define one. A dyadic is a second-order tensor, which gives\nrise to a square matrix when it is projected onto the basis vectors of a coordinate\nsystem. The notation for a dyadic consists of juxtaposing pairs of vectors\u2014simply\nwriting one vector next to another. This placement does not imply multiplication,\nalthough the placement follows the order of operations for multiplication. For\nexample, a dyadic D might be written in terms of two vectors c1 and c2:\n\nD D c1c2 (4.1)\n\nAlgebraically manipulating dyadics uses familiar vector operations, such as cross\nproduct and dot products, on the individual vectors in the dyadics in a way that is\nanalogous to the rules for matrix algebra, as in the examples provided in Table 4.1.\nWe denote vectors and dyadics with boldface type. A scalar is denoted by an italic\nfont. A matrix is written the same way except that it may include a left superscript\nindicating the coordinate system that led to the scalars in the matrix. This indication\nof a coordinate system is often missing when the choice is implicit or irrelevant.\nNote that a scalar is a special case of a matrix, one with dimension 1 ? 1, and the\nchoice of coordinate system is therefore irrelevant. For clarity, often an upper-case\nletter is used to denote a matrix, while a lower-case letter denotes a scalar. Table 4.1\nshows some examples. A matrix is a collection of scalars stacked in an m ? n array.\nExamples include the column matrix, the row matrix, and the m?n matrix, examples\nof which are shown in Table 4.2. Here is an example of a vector. Call it v. Suppose\n\n\n\n4.1 Notation 59\n\nTable 4.2 Example matrix\ndimensions\n\nMatrix type Example\n\n3? 1 (Column) Matrix 2\n6\n4\n\nx1\nx2\nx3\n\n3\n\n7\n5\n\n1? 4 (Row) Matrix h\nx1 x2 x3 x4\n\ni\n\n2? 3 Matrix \"\nx11 x12 x13 x14\nx21 x22 x23 x24\n\n#\n\nthere are three basis vectors fixed in the body of a spacecraft, b1, b2, and b3. Then\nsome scalars vi can be defined such that\n\nv D v1b1 C v2b2 C v3b3 (4.2)\n\nFurthermore, one can extract the vi simply by projecting v onto each basis vector.\nFor example,\n\nv1 D b1 ? v\nD b1 ? .v1b1/C b1 ? .v2b2/C b1 ? .v3b3/\nD b1 ? .v1b1/C 0C 0\nD v1b1 ? b1 C 0C 0\nD v1 (4.3)\n\nConsider another set of basis vectors, a1, a2, and a3. If they differ from the bi, the\nscalars associated with the ai differ from the scalars associated with the bi. Since\none cannot change a vector by choosing a different basis, then the scalars (which are\nbasis dependent) cannot really be equivalent to the vector (the zero vector is a trivial\nexception). Hughes [1] introduced a convenient notation, the \u201cvectrix.\u201d A vectrix is\nsimply a matrix of vectors. For example,\n\nb D ?b1 b2 b3\n?\n\nor a D ?a1 a2 a3\n?\n\n(4.4)\n\nThis object has one row and three columns. It is not a shorthand for a 3 ? 3 matrix\nof scalars. Vectrices are useful when dealing with vectors and bases. They lead to\ncompact expressions such as\n\nv D ?b1 b2 b3\n?\n2\n\n4\nv1\nv2\nv3\n\n3\n\n5 D ?b1 b2 b3\n?\n\nBv (4.5)\n\n\n\n60 4 Dynamics of Momentum-Control Systems\n\nThis matrix multiplication expresses the vector v in terms of a vectrix of basis\nvectors and a column matrix of scalars. That column matrix is specific to the choice\nof basis. So, for clarity we indicate that choice with a left superscript on the column\nmatrix Bv. Vectrices can also be used in vector expressions, such as the dot product\nand the cross product. The vector operation is performed for each element in the\nmatrix that results from standard matrix algebra. For example,\n\nc D ?a1 a2 a3\n? ?\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 D a1 ? b1 C a2 ? b2 C a3 ? b3\n\nC D\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 ? ?a1 a2 a3\n? D\n\n2\n\n4\nb1 ? a1 b1 ? a2 b1 ? a3\nb2 ? a1 b2 ? a2 b2 ? a3\nb3 ? a1 b3 ? a2 b3 ? a3\n\n3\n\n5 (4.6)\n\nVector operations on a dyadic apply to either the first or the second vector,\ndepending on whether the other vector in the operation is pre- or post-multiplied.\nSome common operations with the dyadic D are shown in Table 4.3. A dyadic can\nbe written in terms of vectrices and a matrix. For example, take the tedious-looking\ndyadic\n\nJ DJ11a1a1 C J12a1a2 C J21a2a1 C J13a1a3 C J31a3a1 : : :\n: : : J22a2a2 C J23a2a3 C J33a3a3 (4.7)\n\nIt can be written\n\nJ D ?a1 a2 a3\n?\n2\n\n4\nJ11 J12 J13\nJ21 J22 J23\nJ31 J32 J33\n\n3\n\n5\n\n2\n\n4\na1\na2\na3\n\n3\n\n5 (4.8)\n\nTable 4.3 Examples of dyadic operations. D D a1a2; a1 and a2 are arbitrary\nvectors\n\nOperation Result Description\n\nD ? w D a1.a2 ? w/ Vector: a1 multiplied by the scalar result of\ndotting w onto a2\n\nv ? D D .v ? a1/a2 Vector: a2 multiplied by the scalar result of\ndotting v onto a1\n\nv ? D ? w D .v ? a1/.a2 ? w/ Scalar: scalar result of dotting v onto a1\nmultiplied by the scalar result of dotting w\nonto a2\n\nv ? D D .v ? a1/a2 Dyadic: on the left, the cross product of v\nand a1; on the right, a2\n\nv ? D ? w D .v ? a1/.a2 ? w/ Vector: the cross product of v and a1 multi-\nplied by the scalar result of dotting w onto a2\n\n\n\n4.2 Spacecraft Attitude and Momentum-Device Kinematics 61\n\nNotice that there is no dot-product operation in Eq. (4.8). Carrying out what\nappears to be matrix multiplication merely places the vectors ai and aj next to\none another in the appropriate combinations. The inertia dyadic takes the form\nof J in Eq. (4.7), but with Jij D Jji; i.e., the inertia matrix is symmetric. We also\ndistinguish between \u201ccoordinate system\u201d and \u201cframe of reference,\u201d although, again,\ncasual usage confuses the two. One sometimes says \u201cframe\u201d when \u201ccoordinate\nsystem\u201d would be less confusing. A coordinate system consists of three orthonormal\nbasis vectors ordered according to the right-hand rule. It is used to extract scalar\nand matrix values from vector-dyadic expressions and represent these expressions\nin terms of meaningful directions, such as compass points or the manufacturing\ncoordinate system for a spacecraft. The choice of coordinate system has nothing\nat all to do with the underlying physics. It\u2019s like tilting your head: the choice of\ncoordinates does not affect what you\u2019re looking at. In contrast, a frame of reference\nis a powerful physical concept that establishes the ground rules for how equations\nof motion are written. Such frames are also known as \u201cobservational frames of\nreference.\u201d Ideas of space, time, and motion are central to this concept. Therefore, a\nframe is independent of arbitrarily chosen basis vectors and allows one to establish\na common three-dimensional space for vectors and tensors considered in that frame.\nAs one might expect, the attitude motions of spacecraft do not require that we\ndistinguish among frames of reference with relative motion near the speed of light.\nIf that were necessary, the story would be more complicated. Instead, in the cases\nconsidered here, a frame of reference may be fixed either in a body or in inertial\nspace. An inertial frame is Newtonian, i.e., Newton\u2019s laws can be stated in the\nfamiliar way in any such frame. Body-fixed frames are not necessarily Newtonian.\nOne frame of reference may accelerate or rotate relative to another, and this relative\nmotion can be described with kinematics. So, each rigid body considered here has\na frame of reference associated with it, and rigid-body kinematics describes the\nrelative motion among these frames. A table of symbols found at the beginning of\nthe book defines key variables in these terms.\n\n4.2 Spacecraft Attitude and Momentum-Device Kinematics\n\nAttitude can be understood as the orientation of one set of basis vectors relative\nto another. Spacecraft attitude control seeks to drive this orientation toward some\ncommanded value, for example, aligning the spacecraft\u2019s nadir axis or a payload\nboresight with the vector from the spacecraft to a target on the ground or in space.\nIn practice, spacecraft attitude is parameterized in a number of ways, the most\ncommon of which is the quaternion. It is favored because of its simplicity and\ncompactness. However, direction-cosine matrices are sometimes used and, even\nmore rarely, Euler angles. These and other attitude parameterizations are discussed\nthoroughly in (Stuelpnagel [2], Shuster [3], and Crassidis and Markley [4]).\nAn attitude parameterization stores information about how two coordinate systems\nare related. For example, the direction-cosine matrix [derived in Eq. (4.6)] is an\n\n\n\n62 4 Dynamics of Momentum-Control Systems\n\nattitude parameterization that allows one to transform the representation of any\nvector in one coordinate system to its representation in any other in a conveniently\ndirect way:\n\nBv D BQAAv (4.9)\n\nThis notation places the symbols for the \u201cA\u201d coordinate system\u2014one for the\ndirection-cosine matrix and one for the column matrix\u2014next to one another. This\nplacement helps ensure that coordinate systems are used consistently. Here\n\nBQA D\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 ? ?a1 a2 a3\n?\n\n(4.10)\n\nThis relationship arises because the vector is independent of coordinate system, and\nit can therefore be written in terms of either basis-vector set:\n\nv D ?b1 b2 b3\n?\n2\n\n4\n\nBv1\nBv2\nBv3\n\n3\n\n5 D ?a1 a2 a3\n?\n2\n\n4\n\nAv1\nAv2\nAv3\n\n3\n\n5 (4.11)\n\nProjecting onto the B basis vectors leads to\n\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 ? v D\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 ? ?b1 b2 b3\n?\n2\n\n4\n\nBv1\nBv2\nBv3\n\n3\n\n5 D\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 ? ?a1 a2 a3\n?\n2\n\n4\n\nAv1\nAv2\nAv3\n\n3\n\n5 (4.12)\n\nAfter some simplification,\n\nBv D I3?3\n2\n\n4\n\nBv1\nBv2\nBv3\n\n3\n\n5 D BQAAv (4.13)\n\nwhich is merely Eq. (4.6). While the fundamental physics is independent of coordi-\nnate system, certain traditional choices allow spacecraft engineers to communicate\nwith momentum-device engineers about alignment of the hardware and important\nbehaviors of the momentum system. For the spacecraft, canonical reference axes\ninclude roll, pitch, and yaw, which arose originally from nautical convention,\nthen were applied to aircraft, and then to rockets. Roll, pitch, and yaw are often\nrepresented with x, y, and z, respectively. Sometimes b1, b2, and b3 are used in place\nof x, y, and z, and we adopt this more versatile convention. For many satellites,\nthe pitch axis runs through the solar array (or solar wings), recalling that earlier\naircraft use. Yaw is aligned with nadir or antinadir. The combination comprises a\nright-handed coordinate system, as shown in Fig. 4.2. The convention for specifying\n\n\n\n4.2 Spacecraft Attitude and Momentum-Device Kinematics 63\n\nFig. 4.2 Spacecraft reference coordinate system\n\nthe orientation of a momentum device focuses on its intended angular-momentum\naxis, i.e., the direction of the angular momentum for a perfectly built device. The\nactual angular momentum may vary because of dynamic imbalance, bearing runout,\nmechanical misalignment, and other terms; nevertheless, the coordinate system is\nbased on the intended direction. For a RWA, that axis is a fixed parameter Osi in\nthe spacecraft body reference frame. The other axes are orthogonal to this one and\nmerely specify how connectors and fasteners need to be accommodated in the design\nof the spacecraft bus structure to which the momentum device is mounted. So, an\narray of RWAs is traditionally specified in terms of the various wheels\u2019 Osi directions.\nIn contrast, a control-moment gyros (CMG)\u2019s momentum axis is not fixed in the\nspacecraft structure. The gimbal motor causes it to precess. So, choosing coordinates\nis a little more subtle. For a CMG, it is the gimbal axis, Ogi, that is fixed in the\nspacecraft reference frame. The gyroscopic torque from the CMG, acting upon the\nspacecraft, lies along an output-torque axis Ooi, related to these other axes by\n\nOoi D Osi ? Ogi (4.14)\n\nThe Osi vector changes direction with the gimbal angle ?. So, in the spacecraft\ncoordinates B, its matrix representation BOsi is\n\nBOsi D BOsi.0/cos.?/C B Ooi.0/sin.?/\nD BOsi.0/cos.?/C B Og?i Osi.0/sin.?/ (4.15)\n\nwhere BOsi.0/ and B Ooi.0/ indicate the direction of the rotor momentum and output-\ntorque axes respectively, for ? D 0 as shown in Fig. 4.3. The superscript \u201c?\u201d\n\n\n\n64 4 Dynamics of Momentum-Control Systems\n\nFig. 4.3 CMG momentum in\nterms of reference axes for\n? D 0\n\nFig. 4.4 ? for a four-CMG pyramid and a roof array\n\nindicates the matrix equivalent of the cross-product operation, as described in\nEq. (4.32). This reference configuration is set by the CMG hardware and software.\nFigure 4.3 shows this relationship. An array of CMGs is traditionally described\nwith one or two simple parameters, exploiting symmetry for a compact description.\nFor a SGCMG array, the ? angle specifies the plane within which each CMG\u2019s\nmomentum can lie. A plane is fully described in terms of a normal vector. In the\ncase of a SGCMG, that vector is clearly Ogi. So, ? represents the tilt of Ogi away\nfrom a common reference, e.g., the vector that identifies the vertex of a pyramid or\nthe centerline of a roof. Figure 4.4 shows ? for a four-CMG pyramid and a roof\narray. The single parameter ? is sufficient to specify the geometry of a roof array. A\ncollection of scissored pairs does not even require ? because their common output\n\n\n\n4.3 Equations of Motion for a Gyrostat with Balanced Rotors 65\n\naxis can be specified in the same way as the torque axis for a RWA. However,\nfor a pyramid, one can also specify an angle ? that describes the cant of each Ogi\naround the axis of symmetry. This cant or \u201cclocking\u201d angle is 90? for a regular\nfour-CMG pyramid, 72? for a five-CMG pyramid, 60? for a six-CMG pyramid, and\nso on. However, only regular pyramids are of current interest. So, it is considered\nsufficient to specify ? and the number of CMGs. Representing the alignment of the\noverall array in the spacecraft coordinates enables a Jacobian to be constructed. For\nexample, in spacecraft coordinates, the gimbal axis of any of the four CMGs in the\npyramid shown above is represented as follows:\n\nB Ogi D\n2\n\n4\nsin.?/cos.?.i ? 1//\nsin.?/sin.?.i ? 1//\n\ncos.?/\n\n3\n\n5 (4.16)\n\nThe momentum axis for an arbitrary gimbal angle is\n\nBOsi.?i/ D\n2\n\n4\n?cos.?i/sin.?.i ? 1// ? sin.?i/cos.?/cos.?.i ? 1//\ncos.?i/cos.?.i ? 1// ? sin.?i/cos.?/sin.?.i ? 1//\n\nsin.?i/sin.?/\n\n3\n\n5 (4.17)\n\nTherefore, the output axis is\n\nB Ooi.?i/ D\n2\n\n4\ncos.?i/cos.?/cos.?.i ? 1// ? sin.?i/sin.?.i ? 1//\ncos.?i/cos.?/sin.?.i ? 1//C sin.?i/cos.?.i ? 1//\n\n?cos.?i/sin.?/\n\n3\n\n5 (4.18)\n\nIt may be of some historical interest that ?; ?; ?; ?, and ? were chosen to describe\na general array of CMGs, whether comprised of SGCMGs or DGCMGs. The outer\ngimbal was specified with ?, as is still the case for a SGCMG array. The inner\ngimbal lay in the same plane in the reference configuration, and its orientation was\nspecified with ?. ? specified the cant of this reference plane, and both ? and ?\nspecified the respective gimbal rotations to orient Osi. This more general convention\nis no longer in use. Only the ? and ? angles remain.\n\n4.3 Equations of Motion for a Gyrostat with Balanced Rotors\n\nA gyrostat is an assembly of interconnected rigid bodies whose relative motion does\nnot alter the total inertia dyadic of the assembly. This definition describes many\nspacecraft of practical interest: rigid-body spinners, the simplest configuration,\nconsisting of a single spinning rigid body; dual-spin satellites, which use a single\naxially symmetric rotor connected by a motor to a counterspun or non-spinning\nplatform on which generally a payload is mounted; momentum-bias satellites, which\n\n\n\n66 4 Dynamics of Momentum-Control Systems\n\nincorporate internal wheels to store angular momentum while the central body spins\nabout a single axis or remains fixed in all three axes; zero-momentum satellites,\nwhich nominally have no angular momentum, except for what might be stored\ntemporarily in preparation for momentum dumping, and which typically do not spin\nexcept to remain earth-pointed; and agile spacecraft, which undergo comparatively\nfast large-angle slews as they acquire and scan celestial or terrestrial targets with\nthe help of CMGs. By this definition, the inertia dyadic J of a gyrostat for its mass\ncenter is constant in body axes:\n\nJ D ?b1 b2 b3\n?\n2\n\n4\nJ11 J12 J13\nJ21 J22 J23\nJ31 J32 J33\n\n3\n\n5\n\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 D ?b1 b2 b3\n?B\n\nJ\n\n2\n\n4\nb1\nb2\nb3\n\n3\n\n5 (4.19)\n\nwhere the bi are mutually orthogonal unit vectors constant in a body-fixed reference\nframe FB. The 3 ? 3 matrix in this expression is known as the inertia matrix for\nthe body\u2019s mass center, which we denote as BJ to indicate that this body-fixed basis\nis used to express it. Wheels with perfect static and dynamic balance move in a\nway that does not change the wheel\u2019s contribution to the total inertia dyadic in a\nspacecraft-fixed reference frame. The same is true for CMGs if the combination\nof rotor motion and gimbal motion can be correctly described by the motion of\na uniformly dense sphere whose mass center is fixed in the spacecraft. For these\nspecial (or approximate) cases, the inertia dyadic of the rigid body (Js) combines\nwith that of its constant-inertia rotors\n\nJr D\nnX\n\niD1\nJr;i (4.20)\n\nto produce the sum\n\nJ D Js C Jr (4.21)\n\nThe reason is straightforward and begins with a few definitions. The angular-\nvelocity vector of a spacecraft body-fixed reference frame FB relative to an inertial\nframe FN is written !B/N. Similarly, FRi is a reference frame fixed in the ith rotor,\nand the angular velocity of FRi relative to FB is !\n\nRi=N. For n wheels of inertia Jr;i,\nthe momentum system\u2019s angular momentum is the sum\n\nhr D\nnX\n\niD1\nJr;i ? .!B/N C !Ri=B/ (4.22)\n\nThe total spacecraft angular momentum, H can be written in terms of this wheel\nangular momentum hr:\n\nH D Js ? !B/N C hr (4.23)\n\n\n\n4.4 Relative Equilibria and Stability of Gyrostats 67\n\ni.e.,\n\nH D Js ? !B/N C\nnX\n\niD1\nJr;i ? .!B/N C !Ri=B/ (4.24)\n\nCollecting on !B/N results in\n\nH D\n \n\nJs C\nnX\n\niD1\nJr;i\n\n!\n\n? !B/N C\nnX\n\niD1\nJr;i ? !Ri=B (4.25)\n\nDefining\n\nh D\nnX\n\niD1\nJr;i ? !Ri=B (4.26)\n\nand making a few substitutions results in a compact expression for the gyrostat\u2019s\nangular momentum:\n\nH D J ? !B/N C h (4.27)\n\nThe equations of motion for the gyrostat can be derived simply from the derivative\nof this momentum in FN and application of the Transport Theorem:\n\nNdH\ndt\n\nD Js ?\nBd!B/N\n\ndt\nC\n\nBdh\ndt\n\nC !B/N ? .J ? !B/N C h/ (4.28)\n\nThe left superscript in this vector expression indicates the reference frame with\nrespect to which a vector derivative is taken. It differs from the way in which\nwe indicate the coordinate system used to represent a vector\u2019s components. It is\nunambiguous because this use is exclusive to vectors, while the coordinate-system\nnotation is exclusive to matrices. The fact that a gyrostat\u2019s inertia dyadic is constant\nin a body-fixed frame motivates using the transport theorem to eliminate derivatives\nof the inertia dyadic that would appear if the derivative were taken with respect to\nFN . The kinematics equations might be written in terms of a quaternion, direction-\ncosine matrices, and many other parameterizations of attitude [2, 3, 5].\n\n4.4 Relative Equilibria and Stability of Gyrostats\n\nThe equations of motion are characterized by some simple equilibrium solutions.\nOf interest here are so-called relative equilibria, for which the derivatives in FB are\nzero. Despite that wheel momentum and angular velocity are constant for a gyrostat\nin a relative equilibrium, the spacecraft may still spin. The motion is known as a\n\n\n\n68 4 Dynamics of Momentum-Control Systems\n\nsimple spin, a constant angular velocity along a body-fixed direction. In equilibrium\n(and with no applied moments), the equation of motion is\n\n0 D !B/N ? ?J ? !B/N C h? (4.29)\n\nThe body-fixed torque due to wheel momentum, !B/N ? h, balances the dynamic\ntorque associated with the rigid body, !B/N?J?!B/N. The net torque (the sum) is zero\nin equilibrium, a situation known as dynamic balance. If there were no wheels, the\nrigid-body torque in equilibrium would be zero on its own. The equation of motion\nwould then represent spin about a principal axis of the rigid inertia matrix. For a\ngiven !B/N this equilibrium condition determines the wheel momentum in the plane\nperpendicular to !B/N in equilibrium. It does not constrain the wheel momentum\nparallel to !B/N, momentum which can be used to augment the dynamics in ways\nother than dynamic balance. Let us denote the projection of h along !B/N as the\nscalar hs (spin-axis wheel momentum, also known as superspin). The selection of\nhs for some spacecraft application is generally a design choice and is independent\nof dynamic balance. It is often used to augment the effective moment of inertia,\nstabilizing an otherwise unstable minor-axis spinner. In fact, dual-spin spacecraft,\nwhich are minor-axis rigid bodies due to geometry that allows them to fit well\ninside launch-vehicle fairings, owe their success to this passive approach to attitude\nstability. Such a design choice can be enforced through an additional equation\n\n0 D !B/N ? h D ?hs (4.30)\n\nwhere ? D k!B/Nk. The equilibrium system is described by four scalar equations\nthat are linear in the three components of the 3 ? 1 matrix\n\nh D h ?\n2\n\n4\nb1\nb2\nb2\n\n3\n\n5\n\nThe four scalar equations are\n\nAh D\n?\n!T\n\n!?\n?\n\nh D\n?\n?hs\n!?J!\n\n?\n\n(4.31)\n\nwhere ! is the 3?1matrix of components of !B/N in the b basis, and the superscript\n\u2018?\u2019 indicates the matrix equivalent of the cross-product operation, i.e.,\n\n!? D\n2\n\n4\n0 ?!B/N ? b3 !B/N ? b2\n\n!B/N ? b3 0 ?!B/N ? b1\n?!B/N ? b2 !B/N ? b1 0\n\n3\n\n5 (4.32)\n\n\n\n4.4 Relative Equilibria and Stability of Gyrostats 69\n\nA is a 4?3matrix. Rank.A/ D 3 if ! is nonzero. A simple proof of this statement is\nthat !? is rank 2, and !T cannot lie in its range space. Therefore, a matrix comprised\nof both !? and !T must be rank 3. With this fact about rank(A), h is found from a\nMoore\u2013Penrose pseudoinverse:\n\nh D ?ATA??1 AT\n?\n?hs\n!?J!\n\n?\n\n(4.33)\n\nThe solution is\n\nh D 1\n?2\n\n?\n?! !?!?\n\n?\n?\n\nhs\nJ!\n\n?\n\n(4.34)\n\nor, in terms of the normalized matrix\n\nO! D !\n?\n\n(4.35)\n\nthe result is\n\nh D O!hs C? O!?\n? O!?J O!? (4.36)\n\nThis expression for h is a closed-form solution for the total, embedded angular\nmomentum in a gyrostat for a given equilibrium angular velocity and desired\nsuperspin. It provides the foundation for passive stabilization of a rigid spacecraft\nspinning about any axis O!. It is well known that a spinning rigid body\u2014a gyrostat\nwith zero embedded momentum\u2014has six relative equilibria for a given angular\nmomentum, each corresponding to spin about one of the principal axes of the\ninertia matrix, either in the positive or negative sense. This result arises from the\nequilibrium condition for a rigid body,\n\n0 D !B/N ? J ? !B/N (4.37)\n\nwhich is simply Euler\u2019s equation with the angular-velocity derivative set to zero.\nThis condition implies\n\n!B/Nk ?J ? !B/N? (4.38)\n\ni.e.,\n\n?!B/N D J ? !B/N (4.39)\n\nThe three solutions for ? are the three eigenvalues of the inertia matrix BJ. The\neigenvectors are the directions of the angular-velocity vector for each of these\nequilibria. Since an eigenvector and its negative are both solutions, there are six\n\n\n\n70 4 Dynamics of Momentum-Control Systems\n\nsuch directions. The solution in which ? is the maximum principal moment of inertia\nrepresents a minimum-energy state for a given angular-momentum magnitude. Spin\nabout this maximum axis is therefore stable when kinetic energy can dissipate,\nand this fact is used in many different spacecraft architectures to ensure mission\nsuccess. Syncom 2, launched in 1963, was the first successful geosynchronous\ncommunications satellite. It is an example of a passively stable maximum-axis\nspinner. Spin about the minor axis is a maximum-energy state and is therefore\nunstable, diverging from the equilibrium over time, depending on the rate at which\nkinetic energy is lost. Each of the early Explorer series of spacecraft is an example\nof an unstable, minor-axis spinner. The intermediate axis is a saddle point that can\nbe considered unstable, but in fact any perturbation away from this equilibrium\nrepresents large-angle motion about either the minimum or maximum-inertia axis.\nNo spacecraft intended to be passively stable would be designed to spin about the\nintermediate-inertia axis. The situation is more subtle for a gyrostat with nonzero\nembedded momentum. Hughes [5] provides a detailed assessment of the equilibria\nfor such spacecraft, using a polynomial whose roots can be used to find these\nequilibria. Here we offer a compact approach to finding these equilibria based on\na generalized eigenvalue problem. For small khk compared to kHk, the gyrostat\nsolution resembles that of a single rigid body, as one might expect. Larger values of\nembedded momentum can reduce the number of real equilibria to four or as few as\ntwo. For nonzero H and !B/N, a gyrostat in equilibrium must exhibit\n\n!B/Nk ?J ? !B/N C h? (4.40)\n\nEquivalently,\n\n?!B/N D ?J ? !B/N C h? (4.41)\n\n? here plays a role very similar to how it appears in the case of a single rigid body.\nIt is a scalar that is related to the magnitudes H D kHk and ? by\n\n? D H\n?\n\n(4.42)\n\nProjecting J onto the bi bases leads to the 3 ? 3 inertia matrix BJ (denoted simply\nby J here). In terms of these matrices,\n\n?! D J! C h (4.43)\n\nThis statement is a matrix pencil: almost an eigenvalue problem in ?, but for\nthe presence of h. An expression for six scalars that can be used to compute the\ncorresponding directions of ! for known H; J, and h is\n\ndet\n\n?\n\n?I ?\n?\n2HJ?1 J?2\n\n?\nhhT ? H2I?\n\nI 0\n\n?\t\n\nD 0 (4.44)\n\n\n\n4.4 Relative Equilibria and Stability of Gyrostats 71\n\nwhere \u201cdet\u201d indicates the determinant of a matrix, and I is the 3? 3 identity matrix.\nEach eigenvalue ?k is a scalar angular-velocity magnitude for one of the equilibria.\nOnly the real values correspond to physical solutions, and because the energy and\nmomentum are real numbers, the non-physical solutions must be complex-conjugate\npairs. Therefore, there may be two, four, or six real solutions. The direction of the\nkth angular-velocity vector is then given in terms of its b components as\n\n!k D\n?\n\nH\n\n?k\nI ? J\n\n\t?1\nh (4.45)\n\nThe stability of these equilibria can be assessed in a number of ways, as described\nin Hughes [5]. A fail-safe rule of thumb is that an equilibrium is stable if its value\nof ? is the largest of all six, again analogous to the single rigid-body case. This\nrule applies to any gyrostat and reduces to the maximum-axis rule for the case\nof a single rigid spinning body, for which there are two solutions (positive and\nnegative spin). For a more general gyrostat, it is possible for the stability of positive\nand negative spin to differ. A spacecraft design that is informed by this principle\nbenefits from a guarantee of passive stability as long as the momentum system can\nmaintain constant momentum. Software failures related to the spacecraft attitude-\ncontrol subsystem do not threaten stability as long as the operation of the momentum\nsystem is decoupled in these failure cases. Such a failure response is available\nin many contemporary RWAs, which are designed to hold the most recent speed\ncommand in the event of interrupted commands from the spacecraft databus.\n\n4.4.1 RWA Spacecraft\n\nSuperspin is a technique that augments the open-loop dynamics to achieve passive\nstabilization. The term comes originally from dual-spin spacecraft, which typically\nseparate from the launch-vehicle upper stage with a high spin rate (by today\u2019s\nstandards) of 30\u201360 rpm. After separation, a motor between the rotor and the\nplatform causes one part to spin at a different rate from the other. The higher-\nspeed portion is responsible for \u201csuper\u201d spin. These two counter-rotating bodies\nexhibit gyrostat dynamics. Depending on the amount of energy dissipation in the\nbodies, the faster-spinning portion can stabilize the other, per the Iorillo stability\ncriterion. Contemporary spacecraft can use superspin to stabilize a spacecraft that\nspins during some or all of its operations. Typically the flight software is responsible\nfor establishing this embedded momentum by commanding the momentum system.\nBy analogy to the maximum-axis principle, the simplest approach to superspin\nstabilization is to use the momentum system to make the effective inertia, ?, for\nthat axis the largest among all six possible equilibria. In practice, ? is chosen to be\nat least 20 % greater when possible. For example, to stabilize a rigid body around\none of its principal-inertia axes, the spacecraft design sets the effective inertia to be\n\n\n\n72 4 Dynamics of Momentum-Control Systems\n\n? ? 1:2Jmm (4.46)\n\nwhere Jmm is the maximum principal moment of inertia of the rigid body. Superspin\ncan be used to stabilize a spacecraft meant to spin around any axis, not exclusively\none of these basis vectors. If wheel augmentation does not already provide sufficient\neffective inertia, the spin-axis momentum to achieve superspin would attempt to\nexceed that insufficient value ?max by 20 % through a new value:\n\n? ? 0:2?max? (4.47)\n\nFor the case of a rigid spinner, with ? equal to the rigid inertia for the desired spin\naxis,\n\nhs ? .1:2Jmm ? ?/? (4.48)\n\nWhen the desired spin axis is not a passive equilibrium, it can be made so through\ndynamic balance. This technique consists of placing some of the momentum\nsystem\u2019s momentum vector perpendicular to the desired spin axis. In closed form,\nthis dynamic-balance momentum is\n\nhd D O!?\n? O!?J!? (4.49)\n\nFor example, a spacecraft intended to spin about its b3 axis O! D \u01520 0 1\tT can use its\nmomentum system to dynamically balance the J13 and J23 products of inertia with\nthe following constant angular momentum:\n\nhd D\n2\n\n4\n?J13?\n?J23?\n0\n\n3\n\n5 (4.50)\n\nBoth superspin and dynamic balance require less momentum to be effective when\nthe spacecraft spin rate is low. In the limit, as the spacecraft approaches a non-\nspinning state, the only gyroscopic stiffness becomes that of the wheel. In that limit,\nthe system is a momentum-bias spacecraft.\n\n4.4.2 CMG Spacecraft\n\nSpacecraft with CMGs exhibit the same equilibria as any other gyrostat when the\ngimbal angle of each CMG is held constant, whether by active torque from the\ngimbal motor or by mechanical resistance in the gimbal mechanism. In principle,\nsuch spacecraft can also use dynamic balance and superspin to augment the rigid-\nbody dynamics to achieve a variety of architectural benefits. However, unlike a\n\n\n\n4.4 Relative Equilibria and Stability of Gyrostats 73\n\nspacecraft with RWAs, a CMG exhibits different behavior in the first few moments\nafter attitude control no longer commands the momentum-control devices. This\nopen-loop behavior depends on the friction and stiction in the CMG gimbals, which\nis not simple to predict. Nevertheless, the following general principles provide some\ninsight. As in the reaction-wheel case, the equilibrium condition is\n\n0 D !B/N ? ?J ? !B/N C h? (4.51)\nbut with the added constraint that the gimbal rate is also zero. Furthermore, in\nequilibrium, the spacecraft\u2019s motion does not accelerate any CMG\u2019s rotor about that\nCMG\u2019s gimbal axis. For the ith single-gimbal CMG and in the absence of resistance\ntorques along the gimbal axis, that condition is\n\n0 D ?!B/N ? hc;i\n? ? Ogi (4.52)\n\nwhere hc;i is the ith CMG\u2019s angular momentum. The equilibrium solution therefore\nvaries with the array geometry, and there is a larger family of solutions than in the\ncase of the gyrostat with RWAs. A computer simulation would identify the stable\nconfigurations of CMG gimbal angles and rigid-body angular velocity that meets\nthese constraints in the presence of stiction. Motor cogging, gear-tooth meshing,\nand bearing friction resist free rotation of the rotor about the gimbal axis. In the\nabsence of attitude control, open-loop motion of the gimbals can quickly damp\nkinetic energy and place the spacecraft in an equilibrium spin. This damping effect\nresembles how mechanical gyroscopes have been used to resist and damp out rolling\nand pitching motion of ships at sea. In the space application, this effect can also\nbe beneficial. It is a valuable way to ensure bounded dynamics, resulting in an\nequilibrium spin, during any one of several failures that leave the spacecraft without\nattitude control.\n\n4.4.3 Large-Angle Slews\n\nA conceptually simple way to describe a slew from one attitude to another is through\nEuler\u2019s Theorem for rigid-body motion. A consequence of that theorem is that one\ncan always reorient a rigid body by rotating it about a single axis fixed both in the\nbody and in an inertial reference frame. Let the attitude of the rigid body at the\nstart time of the slew t0 be described by a direction-cosine matrix NQB.t0/, and let its\nattitude at completion time tf be described by NQB.tf /. The change in attitude, again\nparameterized as a direction-cosine matrix, is\n\nB.tf /QB.t0/ D ?NQB.tf /?T NQB.t0/ (4.53)\nThe axis-angle representation of the attitude change is found from an eigenvalue\ndecomposition of B.tf /QB.t0/. It can also be found from the matrix logarithm of\nB.tf /QB.t0/, and then the components of the rotation axis extracted from the resulting\n\n\n\n74 4 Dynamics of Momentum-Control Systems\n\n3 ? 3 skew-symmetric matrix. Specifically, the eigenvector Bc of B.tf /QB.t0/ that is\nassociated with the eigenvalue 1 is the axis of rotation such that\n\nB.tf /QB.t0/ D cos\nI3?3 C .1 ? cos\n/BcBcT ? sin\nBc? (4.54)\n\nThe superscript B on Bc does not specify time simply because the vector c is constant\nthroughout the motion, per Euler\u2019s Theorem. The matrix Bc therefore consists of the\nsame three scalars regardless of the fact that the spacecraft\u2019s attitude is changing. In\nthe case of an eigenaxis slew, the angle of rotation is \n.t/. It starts at \n D 0 and\nreaches a commanded (final) value \n D \nc has the following angular velocity:\n\n!B/N D P\n.t/c (4.55)\n\nThis behavior is also known in kinematics as a \u201csimple spin\u201d because the unit vector\nc does not change. For purposes of this discussion, the definition of \u201cversine slew\u201d\nis the following: an eigenaxis slew for which the angle follows a half-wave versine\npath in time until the end of the maneuver. \u201cVersine\u201d is the name for the following\ntrigonometric function:\n\nversin? D 2sin2 ?\n2\n\nD 1 ? cos? (4.56)\n\nThis function is illustrated in Fig. 4.5. For single-axis motion, let the initial angle\nfor a versine slew be \n1 and the total angle be ?\n. Then the final angle is\n\n\n2 D \n1 C?\n (4.57)\n\nSince the initial angle is arbitrary, let \n1 ? 0. Then\n\n\n2 D ?\n (4.58)\n\nFig. 4.5 Versine\n\n\n\n4.4 Relative Equilibria and Stability of Gyrostats 75\n\nThe kinematics of an angle-versine slew are\n\n\n.t/ D \n2\n2\n.1 ? cosat/\n\nP\n.t/ D a\n2\n2\n\nsinat\n\nR\n.t/ D a2 \n2\n2\n\ncosat\n\n\u00ab\n.t/ D ?a3 \n2\n2\n\nsinat (4.59)\n\nwhere a is the timing parameter (not to be confused with the vector axis of rotation\nc used earlier) and time t is such that\n\n0 ? t ? ?\na\n\n(4.60)\n\nThis function is infinitely differentiable and therefore smooth from the perspective\nof actuation and numerical implementation. The maxima of these functions lead to\nexpressions for the timing parameter a in terms of prescribed kinematic limits:\n\na1 D\nP\nmax\n2j\n2j ; a2 D\n\n R\nmax\n2j\n2j\n\n!1=2\n\n; or a3 D\n \u00ab\nmax\n2j\n2j\n\n!1=3\n\n(4.61)\n\nHere, the indices on a denote the degree of the derivative, not the initial or final\npoint in the slew. The best choice of a is the maximum value (therefore the shortest\nslew time) for which the other two time histories are within their respective limits.\nThat is,\n\nfor a1 D\nP\nmax\n2 j\n2j ; require\n\n?\n?\n?\n?\na21\n2\n2\n\n?\n?\n?\n? ? R\nmax and\n\n?\n?\n?\n?\na31\n2\n2\n\n?\n?\n?\n? ? \u00ab\nmax\n\nfor a2 D\n R\nmax\n2 j\n2j\n\n!1=2\n\n; require\n\n?\n?\n?\n?\na2\n2\n2\n\n?\n?\n?\n? ? P\nmax and\n\n?\n?\n?\n?\na32\n2\n2\n\n?\n?\n?\n? ? \u00ab\nmax\n\nfor a3 D\n \u00ab\nmax\n2 j\n2j\n\n!1=3\n\n; require\n\n?\n?\n?\n?\na3\n2\n2\n\n?\n?\n?\n? ? P\nmax and\n\n?\n?\n?\n?\na23\n2\n2\n\n?\n?\n?\n? ? R\nmax (4.62)\n\nA solution is always possible because each derivative increases monotonically\nwith a. A rate versine is suitable for rate control, not necessarily for attitude control.\nThe rate versine begins with an expression for P\n that is similar to the angle-versine\nexpression for \n. The expression for angle is the integral, with the initial angle as\nthe constant of integration (i.e., 0). The result is\n\n\n\n76 4 Dynamics of Momentum-Control Systems\n\n\n.t/ D 1\n2\n\n?\n? P\n2 C P\n1\n\n?\nt ? 1\n\na\n\n? P\n2 ? P\n1\n?\n\nsinat\n\n?\n\nP\n.t/ D 1\n2\n\n? P\n2 ? P\n1\n?\n.1 ? cosat/C P\n1\n\nR\n.t/ D 1\n2\n\n? P\n2 ? P\n1\n?\n\nasinat\n\n\u00ab\n.t/ D 1\n2\n\n? P\n2 ? P\n1\n?\n\na2cosat (4.63)\n\nThe maximum value of P\n occurs at the beginning or the end of the slew. Since these\nboundaries are given as conditions of the problem, the planning algorithm does not\nneed to implement a means of observing the rate limits during the slew. Some means\nof rejecting infeasible commands in ground software, before such commands reach\nthe spacecraft, would likely be implemented instead. The maximum acceleration\nand jerk provide conditions for the slew duration:\n\na1 D 2\nP\nmax\n\n?\n? P\n2 ? P\n1\n\n?\n?\n; a2 D\n\n \n2 P\nmax\n\n?\n? P\n2 ? P\n1\n\n?\n?\n\n!1=2\n\n(4.64)\n\nAs in the case of the angle-versine slew, the best choice is the maximum, subject to\nthe requirement that the other derivative not exceed its kinematic limit:\n\nfor a1; require\n\n?\n?\n?\n?\n?\na1\n\nP\n2 ? P\n1\n2\n\n?\n?\n?\n?\n?\n\n? R\nmax\n\nfor a2; require\n\n?\n?\n?\n?\n?\na22\n\nP\n2 ? P\n1\n2\n\n?\n?\n?\n?\n?\n\n? \u00ab\nmax (4.65)\n\nOne may prefer to think of \n starting at some nonzero initial condition, \n0. For\nexample, an attitude-control system might autonomously track this angle as a\nlarge error and continuously compute the eigenaxis parameters until the angle is\nsmall enough for the dynamics to be considered linear. In that case, \nc in these\nexpressions can be replaced with a delta angle, ?\n D \nc ? \n0. Regardless of\nhow the initial condition is specified, the results provide a smooth slew from the\ninitial value to the final, commanded value regardless of the sign of these angles.\nThese kinematics provide fundamental insight into the peak momentum, torque, and\ngimbal acceleration (in the case of CMGs) necessary to achieve a desired agility.\nSpecifically, the axis of rotation determines the scalar inertia Je that the momentum\nsystem must move:\n\nJe D c ? J ? c (4.66)\n\n\n\n4.5 Control-Moment Gyroscopes 77\n\nThe actuator\u2019s peak performance derives from the slew kinematics according to\n\nhmax D P\nmaxJe\n?max D R\nmaxJe (4.67)\n\nThe gimbal\u2019s acceleration is driven by the jerk limit (\u00ab\n) and a variety of gimbal rate-\nloop requirements that were discussed in Chap. 3. These simple results do not take\ninto account contingency, margin, and control-related phenomena such as overshoot,\nbut it\u2019s a start. However, an eigenaxis slew is not necessarily the fastest route nor the\nmost power-efficient. Fully optimizing for time and power would take into account\nthe fact that the inertia varies across the range of possible paths. Slewing around an\naxis with lower inertia than that of the eigenaxis might speed up the maneuver.\nThe momentum system torque and momentum envelope also comes into play:\nsome corners of the array\u2019s performance envelope might be exploited for higher\nperformance if an axis other than this geometrically shortest one is chosen. Finally,\nother spacecraft-specific constraints on orientation relative to the sun or the Earth,\nfor thermal or communications reasons, might have to be accommodated, regardless\nof the purely dynamical benefits of a time-optimal slew. Eigenaxis slews provide\nuseful insight, particularly at the early stages of spacecraft design, but a detailed\ndesign for an agile spacecraft\u2019s operations concept may ultimately demand different\nkinematics.\n\n4.5 Control-Moment Gyroscopes\n\nThe dynamics of a CMG includes a wide variety of rigid-body, flexible, and\nnonlinear effects. This section derives the foundational equations for a CMG that\nis statically balanced\u2014i.e., the mass centers of each component do not translate\nin a spacecraft-fixed reference frame during the motion of the CMG. In practice,\nthis static imbalance and dynamic imbalance of the rotor induce vibration in the\nspacecraft structure, as do gear-tooth meshing and bearing-related disturbances.\nThis induced vibration (IV) represents a high-frequency mechanical disturbance that\ncan affect precision payloads. Imprecision in the gimbal motion because of motor\ncogging and the transmission of gimbal-motor torque through gears (among many\neffects) is responsible for so-called output-torque ripple (OTR), which is of lower\nfrequency than IV. However, OTR can be of larger magnitude and influences the\nspacecraft pointing in ways that IV does not, such as excitement of low-frequency\nspacecraft flexible modes. These effects are taken up in Sect. 4.7. Although the\nmultiple-gimbal case is the general one from a theoretical perspective, single-gimbal\nCMGs are preferred in practice because the torque produced by precessing the\nrotor is reacted by structural components rather than the motors on other gimbal\naxes, saving weight, and power. Acknowledging the widespread use of single-\ngimbal CMGs, this derivation assumes that h comprises any number of internal\n\n\n\n78 4 Dynamics of Momentum-Control Systems\n\nFig. 4.6 Single-gimbal CMG (Image Courtesy of Honeywell, Inc.)\n\ncomponents with at most one gimbal axis each. Figure 4.6 shows the components\nof a single-gimbal CMG. Consider a spinning rigid spacecraft whose angular-\nmomentum vector (H) is given by\n\nH D J ? !B/N C h (4.68)\n\nas discussed above. The assumption that the internal components are statically bal-\nanced about their angular-velocity vectors means that the rigid body\u2019s mass center\ndoes not accelerate, that equations for the rotational dynamics alone completely\ndescribe the motion of the system. As in the case of the RWA spacecraft, we lump\nthe momentum of the momentum devices due to the spacecraft\u2019s rotation in with\nthat of the rigid body. That is, the term\n\nJg ? !B/N C Jr ? !B/N (4.69)\n\ndoes not appear here because it is accounted for in the spacecraft bus motion. Then,\nthe remaining momentum of all n CMGs is\n\nh D\nnX\n\niD1\nJ0g;i ? !Gi=B C Jr;i ? !Ri=B (4.70)\n\nin which another simplification is possible. Let the gimbal structure\u2019s inertia be J0g;i\ndefined so that an augmented inertia Jg;i can include the rotor\u2019s inertia:\n\nJg;i D J0g;i C Jr;i (4.71)\n\n\n\n4.5 Control-Moment Gyroscopes 79\n\nThen\n\nh D\nnX\n\niD1\nJ0g;i ? !Gi=B C Jr;i ?\n\n?\n!Gi=B C !Ri=B? (4.72)\n\nbecomes\n\nh D\nnX\n\niD1\nJg;i!Gi=B C Jr;i!Ri=Gi (4.73)\n\nsubstituting the scalar gimbal speed P?i, rotor speed ?r;i, and the unit vectors along\nthe gimbal and rotor-spin directions leads to\n\nh D\nnX\n\niD1\nJg;i ? . P?i Ogi/C Jr;i ? .?r;iOsi/ (4.74)\n\nBecause the gimbal and rotor are taken to be dynamically balanced, their respective\ninertia dyadics include no products of inertia. The inertia for the Ogi and Osi directions\nare Jg;i and Jr;i, respectively. So,\n\nh D\nnX\n\niD1\nJg;i P?i Ogi C Jr;i?r;iOsi (4.75)\n\nThis spacecraft\u2019s dynamics resemble those of the RWA spacecraft. Both begin\nwith the inertial derivative of the total angular momentum. However, for the CMG\nspacecraft, this derivative includes additional terms that result from the gimbals:\n\nNdH\ndt\n\nDJ ?\nBd!B/N\n\ndt\nC\n\nBd\n\ndt\n\n \nnX\n\niD1\nJg;i P? Ogi C Jr;i?r;iOsi\n\n!\n\nC !B/N ?\n \n\nJ ? !B/N C\nnX\n\niD1\nJg;i P?i Ogi C Jr;i?r;iOsi\n\n!\n\n(4.76)\n\nThe first term in parentheses can be made explicit:\n\nBd\n\ndt\n\n \nnX\n\niD1\nJg;i P? Ogi C Jr;i?r;iOsi\n\n!\n\nD\n \n\nnX\n\niD1\nJg;i R?i Ogi C Jr;i P?r;iOsi\n\n!\n\nC\n \n\nnX\n\niD1\nJg;i P?i\n\nBd\n\ndt\nOgi C Jr;i?r;i\n\nBd\n\ndt\nOsi\n!\n\n(4.77)\n\n\n\n80 4 Dynamics of Momentum-Control Systems\n\nThe body-frame derivatives of the gimbal axes and the rotor axes result from the\nkinematics of the CMG. The gimbal axis is fixed in FB. So,\n\nBd\n\ndt\nOgi D 0 (4.78)\n\nFrom the Transport Theorem and our definitions,\n\nBd\n\ndt\nOsi D\n\nGi d\n\ndt\nOsi C !Gi=B ? Osi D 0C P? Ogi ? Osi (4.79)\n\nThis direction is that of the output torque (Ooi). So,\nBd\n\ndt\nOsi D P? Ooi (4.80)\n\nSubstituting this result into Eq. (4.77) leads to a complete expression for the time\nderivative of angular momentum for the CMG spacecraft with rotors that are not\nnecessarily at constant speed:\n\nNdH\ndt\n\nDJ ?\nBd!B/N\n\ndt\nC\n \n\nnX\n\niD1\nJg;i R?i Ogi C Jr;i\n\n\n P?r;iOsi C P?i?r;i Ooi\n?\n!\n\nC !B/N ?\n \n\nJ ? !B/N C\nnX\n\niD1\nJg;i P?i Ogi C Jr;i?r;iOsi\n\n!\n\n(4.81)\n\nIt is instructive to consider these terms individually:\n\n\u2022 J ? Bd!B/Ndt C !B/N ? J ? !B/N\u2014This term represents the rigid-body motion due\nto spacecraft bus angular acceleration and angular velocity, as it would appear in\nEuler\u2019s Equation.\n\n\u2022 !B/N ?\n\nPn\n\niD1 Jg;i P?i Ogi\n?\n\n\u2014This term represents the gyroscopic effect on the\n\nspacecraft of the moving gimbal. While important in a high-fidelity simulation,\nthe gimbal rate is much lower than that of the rotor and may be neglected for first-\norder torque- and momentum-sizing analyses. Neglecting it would be analogous\nto setting Jg;i D 0\n\n\u2022 !B/N ? ?PniD1 Jr;i?r;iOsi\n?\n\u2014This term represents the gyroscopic effect on the\n\nspacecraft of the spinning rotors at some instantaneous orientation. This term\nhas a significant effect on the spacecraft dynamics. For each CMG, it is also a\ntorque that the gimbal motor must react, i.e., the \u201cbase rate\u201d effect. This effect is\none of the design drivers for the gimbal motor.\n\n\u2022\nPn\n\niD1 Jg;i R?i Ogi\u2014This term represents the torque on the spacecraft due to the\ngimbal\u2019s accelerating everything in the inner gimbal assembly, i.e., the rotor and\nthe gimbal structure that supports it. This term is an important one in sizing\nthe gimbal motor, but it may be neglected in simpler analyses that focus on\nmomentum system torque and momentum capability.\n\n\n\n4.5 Control-Moment Gyroscopes 81\n\n\u2022\nPn\n\niD1 Jr;i P?r;iOsi\u2014This term represents the torque on the spacecraft due to spinning\nup or down the rotor. For typical single-gimbal CMGs, this event is rare, but it is\nan important effect for the case of variable-speed CMGs.\n\n\u2022\nPn\n\niD1 Jr;i P?i?r;i Ooi\u2014This term represents the gyroscopic output torque on the\nspacecraft from gimbaling the rotor\u2019s angular momentum. This value dominates\nthe output torque of a single-gimbal CMG.\n\nA very simplistic model of a spacecraft with constant-speed rotors would include\nonly the output-torque effect. In that case, the spacecraft\u2019s dynamics would be\n\nNdH\ndt\n\nDJ ?\nBd!B/N\n\ndt\nC\n\nnX\n\niD1\nJr;i P?i?r;i Ooi\n\nC !B/N ?\n \n\nJ ? !B/N C\nnX\n\niD1\nJr;i?r;iOsi\n\n!\n\n(4.82)\n\nTo construct a model suitable for attitude-control simulations, one can split this\nequation in such a way that the momentum system appears as a separate subsystem\nfrom the spacecraft body:\n\nNdH\ndt\n\nC ?o D J ?\nBd!B/N\n\ndt\nC !B/N ?\n\n \n\nJ ? !B/N C\nnX\n\niD1\nJr;i?r;iOsi\n\n!\n\n?o D ?\nnX\n\niD1\nJr;i P??r;i Ooi (4.83)\n\nThe negative sign reflects the fact that the torque acting on the spacecraft is the\nopposite of what acts on the momentum system. These equations can be written in\nmatrix form and solved for the angular acceleration. Here, the matrices have been\nconstructed via the body-fixed basis vectors bi and are indicated as such with a left\nsuperscript B. In the absence of external torques,\n\nB P! DBJ?1\n\"\n\nB?o ? !?\n \n\nBJ! C\nnX\n\niD1\nJr;i?r;i\n\nBOsi\n!#\n\n(4.84)\n\nB?o D ?\n \n\nnX\n\niD1\nJr;i P?i?r;iB Ooi\n\n!\n\n(4.85)\n\n\n\n82 4 Dynamics of Momentum-Control Systems\n\n4.6 Actuator Jacobians\n\nA Jacobian matrix A, or simply \u201cJacobian,\u201d is an n ? m matrix formed by taking\nthe partial derivative of an m ? 1 real-valued function F.x/ with respect to an n ? 1\ncolumn matrix, x:\n\nA D @F\n@x\n\nD\nh\n@F\n@x1\n\n? ? ? @F\n@xn\n\ni\nD\n\n2\n\n6\n6\n4\n\n@F1\n@x1\n\n? ? ? @F1\n@x/n\n\n:::\n: : :\n\n:::\n@Fn\n@x1\n\n? ? ? @Fn\n@xn\n\n3\n\n7\n7\n5 (4.86)\n\nwhere Fi and xi are the matrix components of the real-valued function and column\nmatrix. A linear, scalar example offers some insight into the physical significance\nof a Jacobian. Consider a function for the output torque of a motor ? D Ki, where\n? is the output torque, K is the scalar gain known as a torque constant, and i is\nthe input current to the motor. The partial derivative of the output torque ?.i/ with\nrespect to the output current i yields a scalar Jacobian in this case and, because K is\na constant and not a function of i, it is the gain K. This gain amplifies the current,\nproducing torque, for any value of i. The case for an array of RWAs is analogous.\nWhere the gain K characterizes the amplification in the scalar example, the singular\nvalues of the Jacobian characterize it in the general case. A zero singular value is\nroughly analogous to zero gain, at least for some directions if not all. The angular\nmomentum of the RWAs is the sum of all of the rotor speeds multiplied by their\nrespective inertias. In the likely case where all RWAs have the same rotor inertia,\nthe array angular momentum is\n\nh D Jr\nnX\n\niD1\n?r;i\n\nBOsi (4.87)\n\nThe output torque is the time derivative of the RWAs\u2019 array angular momentum.\nThe chain rule yields\n\ndh\n\ndt\nD B?o D @h\n\n@?r\nP?r D Jr\n\n?\nBOs1 ? ? ? BOsn\n\n?\n\n2\n\n6\n4\n\nP?r;1\n:::\n\nP?r;n\n\n3\n\n7\n5 (4.88)\n\nand therefore, the Jacobian for the RWA angular momentum with respect to the\nRWA rotor rates is\n\nA D Jr\n?\n\nBOs1 ? ? ? BOsn\n?\n\n(4.89)\n\nLike the linear scalar example for the output torque of a motor, the Jacobian for an\narray of RWAs is constant. Therefore, if a momentum system includes three or more\n\n\n\n4.6 Actuator Jacobians 83\n\nRWAs with linearly independent spin-axes, its Jacobian cannot be singular. The case\nof a Jacobian for an array of CMGs is more complicated because the Jacobian is not\nconstant. It is a function of the gimbal and rotor states. The Jacobian for an array of\nCMGs is\n\nA D @h\n@?\n\nD\nh\n@h\n@?i\n\n? ? ? @h\n@?n\n\ni\n(4.90)\n\nThe rotor angular momentum is likely constant and uniform across all of the CMGs\nin an array. In that case, the Jacobian is a concatenation of all of the output-torque\ndirections in the spacecraft body coordinates, multiplied by the CMG rotor angular\nmomentum:\n\nA D @h\n@?\n\nD hr\n?\n\nB Oo1 ? ? ? B Oon\n?\n\n(4.91)\n\nTherefore, singularities arise when the output-torque directions for the CMGs lie\nin a plane. Mathematically, this condition corresponds to a situation in which the\nmatrix\n\n?\nB Oo1 ? ? ? B Oon\n\n?\nhas rank less than 3. For an array of VSCMGs, the Jacobian\n\nfor the array of CMGs and the array of RWAs are concatenated, but without the\nassumption that the rotor angular momenta are uniform (because VSCMG rotor\nrates vary). The VSCMG array Jacobian is therefore\n\nA D\nh\n@h\n@?\n\n@h\n@?r\n\ni\n(4.92)\n\nand the total output torque from the VSCMG array is\n\nB?o D A\n? P?\n\nP?r\n?\n\n(4.93)\n\nThis Jacobian is always full rank for nonzero rotor velocity if there are at least two\nVSCMGs in the array with linearly independent gimbal axes. However, rank alone\nis not the full story; there are deeper issues with VSCMG arrays, including loss of\ngyroscopic torque, that are discussed in later chapters. For an array of DGCMGs,\nthe Jacobian is similar to that for an array of SGCMGs but contains an additional\nset of columns because of the additional gimbals. This Jacobian is\n\nA D\nh\n@h\n@?1\n\n@h\n@?2\n\ni\n(4.94)\n\nwhere ?1 and ?2 are the column matrices of gimbal angles for the inner and\nouter gimbals. Even with constant and uniform angular momentum among all the\nCMGs, the outer-gimbal Jacobian contribution is not a concatenation of unit vectors\n(Kurokawa [6]). It is often useful to measure the distance from singularity by\nthe rank properties of the Jacobian for an array of momentum devices. In such a\ncalculation, the Jacobian should be normalized (scaled by rotor momentum) before\n\n\n\n84 4 Dynamics of Momentum-Control Systems\n\nit is used in a metric such as the manipulability, m D pdet.AAT/ equal to the\nproduct of the singular values of the Jacobian (as discussed in Chap. 7). For example,\nwith constant uniform angular momentum across all across all CMGs, the metric is\n\nm D\nq\n\ndet. OA OAT/, where A D hr OA. The normalization of the Jacobian provides not\nonly a measure of singularity that is independent of CMG size, but it also serves as\na numerically stable value in studies of singularity avoidance.\n\n4.7 Rotor and Gimbal Structural Dynamics\n\nThe analysis of flexible dynamics on rotating bodies is a specialty discipline.\nThe equations are difficult to formulate, and all but the most trivial cases must be\nsolved numerically. This subtlety motivates some straightforward design principles:\nmomentum devices are designed for high stiffness so that their flexible dynamics\nare decoupled from fundamental vibration modes of the spacecraft structure and\nfrom attitude-control loops. Separating these frequencies simplifies control design\nand improves the predictability of the spacecraft\u2019s flexible response in the context of\nlaunch-vehicle coupled loads analysis, among other advantages. This stiffness also\nis consistent with the need for flight hardware to survive high loads associated with\nlaunch-vehicle dynamics, including acoustic loads and rocket-engine vibrations.\nHowever, it is generally the stiffness, not material stress considerations, that drives\nthe mechanical design of the actuators. RWAs and CMGs achieve stiffness in part\nby maximizing bearing span\u2014that is, the distance between multiple bearings that\nsupport the rotor and (in the case of CMGs) the gimbal. The more widely separated\nthe bearings, the larger the moment they can react, all things being equal. These\ndevices also incorporate high-stiffness rotors, structural elements, and bracketry,\nwhile trying to minimize the mass of these elements. Details of the design are\nspecific to the devices and the application are beyond the scope of this discussion.\nNevertheless, two general behaviors are evident for a wide variety of actuators: (1)\nthe vibration mode of the rotor, where gyroscopic effects couple rigid-body nutation\nto structural deflection of the rotor and (2) a CMG-specific effect in which the so-\ncalled output-axis stiffness increases the torque necessary from the gimbal motor in\nthe form of an augmented inertia. The first effect is evident in a simple model of\na spinning symmetric body on a two degree-of-freedom torsional spring. A body-\nfixed reference frame FB is fixed to this rotor, and a coordinate system consisting\nof the bi basis vectors are also fixed in FB. In this model, the body represents a\nrotor spinning at high speed about the axis b1 shown in Fig. 4.7. The compliant base\npermits the rotor to deflect about any axis in the b2\u2013b3 plane with uniform stiffness.\nThis simplified representation includes an embedded angular-momentum vector, hr\nabout the b1 axis and assumes small-angle motion of the rotor in the transverse\ndirections. For sufficiently small motion, the angular-velocity vector is the derivative\nof a three-parameter attitude representation consisting of a small rotation in each of\nthree axes:\n\n\n\n4.7 Rotor and Gimbal Structural Dynamics 85\n\nFig. 4.7 Rotor on a\ncompliant base\n\n2\n\n4\n?1\n?2\n?3\n\n3\n\n5\n\nB\n\n?\n2\n\n4\n\nR\n!1dtR\n!2dtR\n!3dt\n\n3\n\n5\n\nB\n\n(4.95)\n\nthe left superscript B indicates that the matrix of components is associated with the\nB coordinate system. However, the rotation in b1 is taken to be zero because the\nsprings deflect only in the transverse direction. If the inertia dyadic for the rotor\u2019s\nmass center is Jr D Jrb1b1 C Jt.b2b2 C b3b3/, the equations of motion in matrix\nform are\n\nBJr\nB P!B/N C B!B/N??BJrB!B/N C Bh\n\n? D B?K (4.96)\n\nwhere again, the superscript ? indicates the matrix equivalent of the vector cross\nproduct, and ?K is the torque that results from the transverse deflection of the rotor\non its flexible base. Substituting P? for B!B/N leads to\n\n2\n\n4\nJr 0 0\n0 Jt 0\n0 0 Jt\n\n3\n\n5\n\nB 2\n\n4\n\nR?1R?2R?3\n\n3\n\n5\n\nB\n\nC\n2\n\n4\n0 ? P?3 P?2P?3 0 ? P?1\n\n? P?2 P?1 0\n\n3\n\n5\n\nB 0\n\nB\n@\n\n2\n\n4\nJr 0 0\n0 Jt 0\n0 0 Jt\n\n3\n\n5\n\nB 2\n\n4\n\nP?1P?2P?3\n\n3\n\n5\n\nB\n\nC\n2\n\n4\nhr\n0\n\n0\n\n3\n\n5\n\n1\n\nC\nA\n\nD\n2\n\n4\n0\n\n?k?2\n?k?3\n\n3\n\n5 (4.97)\n\nAgain, the small-angle assumption eliminates coupling of this spring torque into the\nspin axis. The solution is\n\n\n\n86 4 Dynamics of Momentum-Control Systems\n\nR?2 D ? 1\nJt\n.hr P?3 C k P?2/\n\nR?3 D ? 1\nJt\n.hr P?2 ? k P?3/ (4.98)\n\nConverting this second-order, coupled, ordinary differential equation into first-order\nform provides the state-space dynamics matrix\n\nA D\n\n2\n\n6\n6\n6\n4\n\n0 ? hrJt ? kJt 0\nhr\nJt\n\n0 0 ? kJt\n1 0 0 0\n\n0 1 0 0\n\n3\n\n7\n7\n7\n5\n\n(4.99)\n\nwith eigenvalues (natural frequencies)\n\n? D\n ?\n\nhr\n2Jt\n\n\t2\nC k\n\nJt\n\n!1=2\n\n? hr\n2Jt\n\n(4.100)\n\nWith no rotor momentum, these roots are simply the natural frequencies of an inertia\non a torsional stiffness:\n\nlim\nhr!0\n\n? D ?\n?\n\nk\n\nJt\n\n\t1=2\n(4.101)\n\nOne of these vibrational modes is rotational oscillation about one transverse axis,\nand the second is about the other transverse axis, as shown in Fig. 4.8. However\nfor nonzero rotor momentum, these two modes couple and separate. In the limit of\ninfinitely high rotor momentum (or zero stiffness), the eigenvalues approach:\n\nlim\nhr!1\n\n? D 0; hr\nJt\n\n(4.102)\n\nFig. 4.8 Modes with no rotor speed\n\n\n\n4.7 Rotor and Gimbal Structural Dynamics 87\n\nFig. 4.9 Modes with rotor\nspinning\n\nFig. 4.10 Variations in natural frequency with spin speed\n\nThe \u201cprecession\u201d frequency asymptotes to zero with increasing rotor momentum,\nand the \u201cnutation\u201d frequency asymptotes to the rigid-body nutation frequency.\nThese gyroscopically coupled modes exhibit \u201cconing\u201d motion, with the nutation\nmode coning in the same direction as the rotor spin, and the precession mode\nin the opposite direction, i.e., retrograde, as shown in Fig. 4.9. If one of these\nmode frequencies coincides with the spin speed, excitation can result. Variations\nof natural frequency with speed can be seen in Fig. 4.10. The precession mode\nalways intersects at the frequency\n\np\nK=.Jr C Jt/. The nutation mode never crosses\n\nso long as .Jr > Jt/ i.e., the rotor is oblate (a disc), not prolate (a skinny cylinder).\nThe precession mode, which can coincide with the spin frequency, cones in the\nretrograde direction. Retrograde modes exhibit an interesting phenomenon directly\ntraceable to that of pole-zero cancellation. From a simple mathematical model,\none might conclude that spin vibrations cannot excite retrograde modes because\ntheir eigenvectors are orthogonal. However, in a practical context these modes are\nexcited through subtle effects that include imperfections, nonlinearities, and other\nunmodeled features. Rotor-spin vibrations can transmit energy through surrounding\nstructure. The discussion above applies to RWAs. However, in a CMG, the stiffness\n\n\n\n88 4 Dynamics of Momentum-Control Systems\n\nabout X and Y axes is much different (one is the gimbal), resulting in completely\ndifferent behavior. Clearly, the study of modal excitation on a spinning body is not\ntrivial, even when the body is rigid.\n\nThe second flexible effect of general interest considered here is that of augmented\ninertia. This phenomenon arises because of compliance in all structural elements\nthat are meant to constrain the CMG\u2019s momentum vector to move in a plane\nperpendicular to the gimbal axes. These elements include the rotor shell or web,\nthe rotor shaft, rotor bearings, gimbal structure, gimbal bearings, and possibly\nelements of the gimbal drive train. The mechanical fixture between the spacecraft\nbus and the gimbal may also play a role. The combined stiffness of all of these\nelements, whether in series or in parallel, comprises the \u201coutput-axis stiffness.\u201d The\nphrase suggests that the stiffness is associated with the output axis of the CMG.\nSpecifically, it is a stiffness that is responsible for constraining the output axis to\nremain perpendicular to the gimbal axis. One way to estimate the participation of\nthese elements in the output-axis stiffness is to begin with an analytical model or a\nfinite-element representation of this subsystem. Applying a couple M at the rotor rim\nin a direction parallel to the output axis deflects this model by an angle, \n, as shown\nin Fig. 4.11. The stiffness is the ratio of the couple to the angle. The more compliant\nthis subsystem, the more that the rotor can tilt toward or away from the gimbal. As its\nmomentum hr projects along the gimbal axis Ogi, the resulting change in momentum\nrepresents a torque that the gimbal must react. Here, the various parameters are\nshown as scalars because this analysis is much more simple than the general case\nthat would be analyzed with a detailed model. For a given scalar gimbal rate ? and\noutput-axis stiffness, KOA, the output torque is approximately\n\n?o D P?hr\n?o D ?KOA\n (4.103)\n\nFig. 4.11 Conceptual model of output-axis stiffness\n\n\n\n4.7 Rotor and Gimbal Structural Dynamics 89\n\nor\n\n\n D ?\nP?hr\n\nKOA\n(4.104)\n\nhr deflects by an angle \n in proportion to the CMG output torque ?o causing angular\nmomentum hg to appear along the gimbal axis:\n\nhg D hrsin.?\n/ (4.105)\n\nFor small angles,\n\nhg D ?hr\n (4.106)\n\nSome substitutions lead to\n\nhg D\nP?h2r\n\nKOA\n(4.107)\n\nThe time derivative of this momentum is the torque on the gimbal due to the output-\naxis stiffness effect:\n\n?g;K D\nR?h2r\n\nKOA\n(4.108)\n\nThe gimbal must accelerate an inertia Jg;eff that combines the rigid inertia of the\nIGA and this output-axis stiffness effect:\n\n?g D ?g;r C ?g;K D Jg;eff R? (4.109)\n\nSince the rigid IGA accelerates due to a torque\n\n?g;r D Jg R? (4.110)\n\nthe combined effect is the effective inertia\n\nJg;eff D Jg C h\n2\nr\n\nKOA\n(4.111)\n\nThis simple expression conveniently represent the impact of compliant gimbal\nstructure. Low stiffness costs power and ultimately increases the weight of the gear\ntrain and the gimbal. There is also a dynamic effect in addition to this quasistatic\nbehavior: an initial rotation of the gimbal imparts an oscillatory disturbance that\ndegrades spacecraft-pointing performance somewhat. These many impacts typically\nmotivate a CMG design in which the output-axis stiffness is high enough that the\n\n\n\n90 4 Dynamics of Momentum-Control Systems\n\nrigid inertia dominates the gimbal dynamics. Regardless of the stiffness of a specific\ndesign, this effective inertia must be accounted for in estimates of the gimbal torque\nrequired to achieve the attitude-control requirements at the spacecraft level.\n\n4.8 Effects of Scaling CMG Actuators\n\nWith the rise of small satellites, or \u201csmallsats,\u201d for use in a wide variety of missions,\nthe need for attitude actuators that meet volume, mass, and power requirements\nfor precision pointing of these new spacecraft architectures has become immediate.\nSome miniature RWAs for slow-moving spacecraft have been available since the\n1990s. Many contemporary smallsats, such as NASA\u2019s Phonesat, simply incorporate\nbrushless DC motors, using the motor\u2019s own inertia as a rotor. Some small\nRWAs are packaged with attitude determination sensors as turnkey attitude-control\nsubsystems\u2013for example, Blue Canyon Technologies\u2019 XACT unit. Even miniature\nCMGs have been developed to provide CubeSats with agile capabilities. The\nUniversity of Florida\u2019s IMPACT CMGs and Honeybee Robotics\u2019 Microsat CMGs\nare examples. They are shown in Figs. 4.12 and 4.13, respectively. However, the\nperformance of these momentum systems does not necessarily scale well. For small\nrotors, the overhead associated with motors, sensors, bearings, structure, slip rings,\nelectronics, etc., can dominate the size and weight of the device. This overhead, in\nturn, makes the momentum devices a disproportionately larger fraction of the total\nspacecraft than is the case for large satellites. So, dynamics effects considered to be\nnegligible for larger spacecraft must be reconsidered for these smaller ones. Some\nof the detrimental effects of small scale include:\n\n\u2022 Lack of availability of small, high-performance components\n\u2022 Lack of manufacturing procedures to meet alignment and other mechanical\n\ntolerances\n\nFig. 4.12 IMPACT single CMG (left) and IMPACT 4-CMG pyramid array (right) (Courtesy of\nProf. Norman Fitz-Coy, University of Florida)\n\n\n\n4.8 Effects of Scaling CMG Actuators 91\n\nFig. 4.13 Honeybee robotics Microsat CMGs (Image Courtesy of Honeybee Robotics)\n\n\u2022 Less accurate position and rate sensors lead to less precise inner-loop control,\nnecessitating more robust control architectures, unfamiliar operations concepts,\nor simply degraded performance\n\n\u2022 Actuators may be on the same size scale as the spacecraft bus and therefore apply\nmore disturbance (e.g., induced vibration and OTR) for smallsats\n\n\u2022 Smallsats very rarely incorporate precise vibration isolation and have less mass\nwith which to absorb vibration energy, leading to worse pointing performance\n\n\u2022 Dynamics of the gimbal and other components that were once considered to\nbe negligible are now more apparent. Without new, more detailed models and\ncontrol approaches, they may lead to unexpected performance degradation\n\nMiniature RWAs are by far the most common momentum-control actuators for\nsmallsats. The primary drawback of RWAs, their low torque, becomes less impor-\ntant for small spacecraft. Companies such as Dynacon, Sinclair Interplanetary,\nClyde Space, Maryland Aerospace Incorporated, and Blue Canyon Technologies\nin addition to some universities have built such actuators. The promise of higher\nagility through RWAs at the small scale is a benefit. Gimbal dynamics of small\nCMGs must be considered in modeling and control. Neglecting these dynamics\nproduces inaccuracies when an inexact steering algorithm is used to find a solution\nto the gimbal rates to track a desired torque. Also, with the increase in gimbal\ninertia and the higher possible base rate of the smallsat using an array of oversized\nminiature CMGs, the CMG gimbal motors must offset the additional dynamics with\nhigh power draw. These effects lower accuracy and reduce torque amplification.\nFor an in-depth derivation of the equations of motion for a spacecraft containing\nmomentum systems with offset mass, as well as the effects of additional dynamics\non the performance in terms of precision and torque amplification, see Appendix A.\n\n\n\n92 4 Dynamics of Momentum-Control Systems\n\n4.8.1 Torque Amplification Degradation with Scaling\n\nThe performance of small CMGs for smallsat applications suffers from these scaling\nissues. This is due mostly to the lack of high-performance components at this\nscale in the industry base. Disproportionately higher bearing friction in the rotors\nand gimbals, lower torque-per-input-power motors, and higher base rates of the\nsmallsats all threaten to limit the performance of smallsats in the near future.\nConsider the output torque of a SGCMG with constant rotor speed ( P?ri D 0):\n\n?o;i D Jr;i Ooi P?i?r;i C Jg;i R?i (4.112)\n\nwhere Jr;i ? Ooi P?i?r;i is the gyroscopic output torque, and Jg;i R?i the gimbal shaft torque.\nThis simple model represents a case in which the gimbal axis is perfectly aligned\nand in which a negligible rotor torque maintains the rotor speed. Defining an input\ntorque\n\n?i D ?Gfi C Jg;i R?i C Jri ? !B/N ? Ooi?r;i (4.113)\n\nleads to an equation for the torque amplification of a smaller CMG:\n\n?a D ?o\n?i\n\n? jJr;i Ooi\nP?i?r;ij C jJg;i R?ij\n\nj?Gfi j C jJg;i R?ij C jJg;i R?i C Jri ? !B/N ? Ooi?r;ij\n(4.114)\n\nEquation (4.113) may be even further simplified if the gimbal friction, ?Gfi is\nnegligible. With the previously stated assumptions\n\n?a D jhri\nP?ij C jJg;i R?ij\n\njJg;i R?ij C khri!B/Nk\nD\n\njP?ij C j Jg;ihri j R?ij\nJg;i\nhri\n\nj R?ij C k!B/Nk\nD j\n\nP?ij C \"j R?ij\n\"j R?ij C k!B/Nk\n\n(4.115)\n\nThe value \" is a performance parameter that indicates how closely the CMG\u2019s\ngimbal torque resembles RWA torque (but about the gimbal axis): \" ! 0 if\nhri ! 0 when the gimbal behaves as a RWA, and \" ! 1 if the rotor angular-\nmomentum approaches infinity or the gimbal inertia is negligible, approaching an\nideal SGCMG, as is shown in Fig. 4.14 where the scalar !t D !B/N ? Ooi. As gimbal\nfriction increases, torque amplification drops. Similarly, it is reduced when the\nmagnitude of rotor angular momentum is small in comparison to the size of the\ngimbal inertia. These difficulties in fabricating small CMGs that meet the size, mass,\nand power requirements of smallsats make it likely that the torque amplification for\nsuch devices will be severely limited.\n\n\n\nReferences 93\n\nFig. 4.14 Torque\namplification versus\nspacecraft baserate and\nefficiency parameter\n\n4.9 Chapter Summary\n\nThis chapter provides the physical basis for the motion of RWAs and CMGs in\nthe context of spacecraft that use them for attitude control. It has been found that\nrigid-body dynamics successfully captures most of the behaviors of interest in these\nmomentum devices. Accordingly, the chapter focuses on rigid-body models of them.\nIt does so through a very general vector/dyadic representation of the physics. This\ncoordinate-free approach offers compact and unambiguous derivations. Common\ncoordinate systems are also presented. Some flexible effects are considered, specif-\nically the mechanical compliance in the rotor and related structure, which produces\ncoupled flexible/gyroscopic modes and can retard the gimbal acceleration in the\nform of an effective inertia. A momentum system offers unique opportunities to\nachieve robust and lightweight spacecraft designs, but taking advantage of these\nopportunities requires careful attention to rigid- and flexible-body dynamics.\n\nReferences\n\n1. P. Hughes, Spacecraft attitude dynamics (Courier Corporation, 2012)\n2. J. Stuelpnagel, On the parametrization of the three-dimensional rotation group. SIAM Rev. 6(4),\n\n422 (1964)\n3. M. Shuster, A survey of attitude representations. Navigation 8(9), 439\u2013517 (1993)\n4. F. Markley, J. Crassidis, Spacecraft Attitude Determination and Control (Springer, Berlin, 2014)\n5. P. Hughes, Spacecraft Attitude Dynamics (Wiley, New York, 1986)\n6. H. Kurokawa, A geometric study of single gimbal control moment gyros (singularity problems\n\nand steering law). Technical Report 175, Agency of Industrial Technology and Science,\nJapan, 1998\n\n\n\nChapter 5\nSingularities of Control Moment Gyroscopes\n\nA book on spacecraft momentum control systems would not be complete without\na discussion of geometric singularities inherent in CMGs. Therefore, this chapter\nstarts with a discussion of common singularities associated with DGCMGs (e.g.,\ngimbal lock) and then moves on to the more troublesome singularities associated\nSGCMGs. The mathematical structure of these singularities and how it relates to\ndifficulties in avoiding them is also discussed in a way made more accessible to\nthe reader not familiar with the subject matter. Also discussed is the location of\nsingularities associated with an array of CMGs by way of a three-dimensional\nsurface in the momentum space. This chapter concludes with some brief discussion\non techniques to perform zero-momentum spin up of an array of CMGs in the\npresence of singularities at zero momentum.\n\n5.1 Singular Values\n\nAny matrix, whether square or nonsquare, can be decomposed using singular value\ndecomposition as\n\nA D U\u2020VT (5.1)\n\nwhere U and V are unitary matrices and\n\n\u2020 D\n2\n\n4\n?1 0 0 ? ? ? 0\n0 ?2 0 ? ? ? 0\n0 0 ?3 ? ? ? 0\n\n3\n\n5 (5.2)\n\nis a matrix of singular values, ?i that may be arranged largest to smallest, i.e.,\n?1 ? ?2 ? ?3 (Bernstein [1] and Meyer [2]). The rank of a matrix A is the number\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_5\n\n95\n\n\n\n96 5 Singularities of Control Moment Gyroscopes\n\nof nonzero singular values present in the diagonal matrix, \u2020. When a matrix has\none or more zero singular values it is defined as being singular. If singular, it is not\ninvertible. Nonsquare matrices by definition are not invertible and have at most a\nnumber of nonzero singular values equal to the smallest dimension of the matrix.\nTherefore, the maximum rank of a nonsquare matrix is the size of the smallest\ndimension of the matrix. For example the matrix\n\nB D\n?\n1 0 0\n\n0 2 0\n\n?\n\nhas two nonzero singular values. Its rank is 2. The matrix\n\nB D\n?\n1 0 0\n\n0 0 0\n\n?\n\nhas the same dimensions but is only of rank 1 because it has only one nonzero\nsingular value, ?1 D 1.\n\n5.2 Coordinate Singularities Versus Geometric Singularities\n\nThere exist purely mathematical coordinate singularities, i.e., those associated\nwith a possibly poor choice of parameterization. For example, a parameterization\nthat involves tangent, secant, or cosecant functions of the gimbal angles becomes\nundefined at certain values of gimbal angle regardless of the physics. There are also\ngeometric singularities that are fundamentally physical and must show up in any\nmathematical representation of the array\u2019s behavior. The differences between these\ntwo situations are discussed here.\n\n5.2.1 Coordinate Singularities\n\nCoordinates describe the state or configuration of a dynamical system. For example,\nangles and positions serve as coordinates that specify the configuration of many\nmechanical devices. Gimbal angles typically serve this purpose for an array of\nCMGs. The angular coordinate associated with rotation of the rotor is often ignored\nas a cyclic variable, a variable that constantly changes in a way that can be\ncaptured with a static parameter, such as scalar angular momentum hr. Coordinate\nsingularities can occur as the configuration changes and reaches a point where a\nmathematical function of the coordinates changes infinitely fast or is otherwise\nundefined. Such singularities arise because of the choice of coordinates. An analyst\nor a systems engineer makes this choice, for reasons related to convenience or legacy\n\n\n\n5.2 Coordinate Singularities Versus Geometric Singularities 97\n\ndefinitions of the hardware. Therefore, the choice is arbitrary with regard to the\nphysics of the problem and can be altered. Specifically, singular sets of parameters\nmay be replaced with non-singular parameter sets that still describe the same\nsystem. Coordinate singularities can be found in the kinematic differential equations\nthat propagate the system\u2019s evolution as a function of time or in expressions that\nrelate these coordinates to others. Some specific examples follow.\n\nExample 5.1. Consider the case of a three-coordinate attitude representation\nknown as Euler angles that describes the attitude of one set of basis vectors\nrelative to another. This attitude can be described by a sequence of three\nrotations through non-coincident axes. An example is the popular 3-2-1, i.e.,\nyaw-pitch-roll rotation. The sequence begins with a rotation  about the Z\n(or 3) axis, followed by a rotation ? about y000, and finally by a rotation \n\nabout an axis x00 to convert from a coordinate basis consisting of the X, Y , Z\naxes to a coordinate basis in x0, y0, z0 as shown in Fig. 5.1. The three direction-\ncosine matrices (DCMs) that make up the rotation sequence in Fig. 5.1 are\n\nD3. / D\n2\n\n4\nc. / s. / 0\n\n?s. / c. / 0\n0 0 1\n\n3\n\n5\n\nD2.?/ D\n2\n\n4\nc.?/ 0 ?s.?/\n0 1 0\n\ns.?/ 0 c.?/\n\n3\n\n5\n\nD1.\n/ D\n2\n\n4\n1 c.\n/ s. /\n0 c.\n/ s. /\n0 ?s.\n/ c.\n/\n\n3\n\n5\n\nwhere c.?/D cos.?/ and s.?/ D sin.?/. The product of three DCMs is itself a\nDCM because of the algebraic properties of the group of rotation matrices:\n\nD321 D D1.\n/D2.?/D3. /\n\nor expanded as\n\nD321 D\n2\n\n4\nc.?/c. / c.?/s. / ?s.?/\n\ns.\n/s.?/c. / ? c.\n/s. / s.\n/s.?/s. /C c.\n/c. / s.\n/c.?/\nc.\n/s.?/c. /C s.\n/s. / c.\n/s.?/s. / ? s.\n/c. / c.\n/c.?/\n\n3\n\n5\n\n(continued)\n\n\n\n98 5 Singularities of Control Moment Gyroscopes\n\nwhere this 3 ? 3 matrix relates a matrix of the final 0 axes to a matrix of the\ninitial axes as follows:\n\n\u0152x0 y0 z0\t D D321\u0152X Y Z\t\n\nSolving for the angles from this matrix is a step where the singularity can\noccur. The coordinate  is determined from the arctangent (inverse tangent)\nof the ratio D321.1; 2/=D321.1; 1/:\n\n D tan?1\n?\n\nD321.1; 2/\n\nD321.1; 1/\n\n\t\n\n(5.3)\n\nand\n\n\n D tan?1\n?\n\nD321.2; 3/\n\n?D321.3; 3/\n\t\n\n(5.4)\n\nIf either of the divisors in Eqs. (5.3) and (5.4) is zero, the value of  and/or \n\nis/are undefined. Therefore, singularities exist in the extraction of Euler angles\nfrom other parameter sets, in this case from DCMs. Stuelpnagel [3] explains\nthat any three-parameter attitude representation must be singular, non-global,\nor ambiguous. Therefore, any use of a three-parameter attitude representation\nthat is global and unambiguous risks introducing singularities. Consider the\nkinematic differential equations of the 3-2-1 Euler sequence\n\n2\n\n4\n\nP\n\nP?\nP \n\n3\n\n5 D 1\nc.?/\n\n2\n\n4\n0 ?s. / c.\n/\n0 c.\n/c.?/ ?s.\n/c.?/\n\nc.?/ s.\n/s.?/ c.\n/s.?/\n\n3\n\n5\n\n2\n\n4\n!1\n!2\n!3\n\n3\n\n5 (5.5)\n\nwhere !i are the components of the angular velocity ! of one reference\nframe relative to another. Clearly, the kinematic differential equation in\nEq. (5.5) is singular when ? D .2n C 1/?\n\n2\n; n D 0; 1; : : : ;N. Therefore,\n\ncoordinate singularities may be singular not only in their extraction from\nother coordinates but also in their kinematic differential equations used for\npropagating attitude.\n\nOther examples of singular sets of attitude parameterizations are the Gibbs vector\nand Modified Rodrigues parameters. At least four coordinates are needed for an\nattitude description to be singularity free (Shuster [4]). This example illustrates\nthat coordinate singularities can arise from how we chose to describe a system\u2019s\nkinematics. Furthermore, coordinate singularities can be avoided with a different\nchoice of parameters. The next section shows that singularities directly associated\nwith the system\u2019s physical behavior, not merely coordinate singularities, cannot be\navoided with a change of parameters.\n\n\n\n5.2 Coordinate Singularities Versus Geometric Singularities 99\n\nFig. 5.1 Euler rotation\nsequence\n\n5.2.2 Singularities Associated with Geometric Constraints\n\nSingularities associated with geometric constraints (e.g., limited joint motion) are\nindependent of the choice of coordinates. These singularities are fundamental\nproducts of the dynamical system\u2019s physics and cannot be avoided through mere\nmathematics. Caution should be exercised when dealing with systems that exhibit\nthese singularities because coordinates that seem to describe a singularity-free\nsystem must be incorrect; the underlying physics of this system is lost in such\nan attempt, and any such description of its dynamics is incorrect. Some of the\nearliest literature on geometric singularities comes from that associated with robotic\nmanipulators.\n\nExample 5.2. A robotic manipulator system shown in Fig. 5.2 is repre-\nsented as\n\nPx D @x\n@q\n\nPq D A.q/Pq\n\nwhere x is a column matrix of coordinates for the end-effector position and\norientation relative to a fixed frame, Px is a column matrix of the rates (or\ncoordinate derivatives), A.q/ is the Jacobian matrix as a function of the\n\n(continued)\n\n\n\n100 5 Singularities of Control Moment Gyroscopes\n\nconfiguration space q consisting of joint angles, and Pq is a column matrix\nof joint velocities. Typically, A is nonsquare and therefore noninvertible. The\njoint velocities Pq corresponding to a desired Px are found through the Moore\u2013\nPenrose pseudoinverse. In what follows, the rank of A is assumed to be the\nminimum of dim(x), dim(q). This inverse provides the minimum two-norm\nsolution, i.e., the solution that lies entirely in the range space of A. This\nsolution minimizes the joint rates, which is likely a preferred outcome for\nreasons of power and mechanical design. Motion in the null space of A does\nnot influence Px; therefore, null-space motion carries electromechanical cost\nwith no performance benefits. A solution found via this pseudoinverse can\nalso be interpreted as the minimum-error solution in the case of a least-squares\nestimate. The case of dim(x)< dim(q) corresponds to an over-actuated robotic\nsystem. The Moore\u2013Penrose inverse solution for this case is\n\nPq D AT.AAT/?1 Px\n\nOtherwise, if dim(x) > dim(q), i.e., the system is underactuated,\n\nPq D .ATA/?1AT Px\n\nFor the special case where dim(x) D dim(q), the familiar inverse of a square\nmatrix provides the solution:\n\nPq D A?1 Px\n\nFor this case, A is rank deficient when its rank is less than dim(x). Specifically,\nrank.A/ < 6 for translation and rotation of a rigid end effector in a typical\nrobotic arm. In that case, A is not invertible, and inverse that appears in the\nMoore\u2013Penrose pseudoinverse is singular. In such cases, the robotic system\ncontains kinematic singularities. An example of such a singularity is shown\nin Fig. 5.2 where the robot manipulator is maximally extended. Consider the\nthree joint angles of the planar robotic manipulator Fig. 5.2, ?1; ?2, and ?3\nrelative to the horizontal. Assume that its link lengths are equal to 1 and that\nonly the position and velocity of the end effector are controlled. Then the\nposition of the end effector is related to the joint angles by\n\nr D\n?\n\ncos.?1/C cos.?2/C cos.?3/\nsin.?1/C sin.?2/C sin.?3/\n\n?\n\nand the velocity of the end effector is\n\n(continued)\n\n\n\n5.3 Control Moment Gyroscope Singularities 101\n\nFig. 5.2 Three-link robot manipulator at singular configuration of maximum extension\n\nPr D\n??sin.?1/ ?sin.?2/ ?sin.?3/\n\ncos.?1/ cos.?2/ cos.?3/\n\n?\n2\n\n4\n\nP?1P?2P?3\n\n3\n\n5 D A P\u201a\n\nWith the manipulator maximally extended, ?1 D ?2 D ?3 D 0, and\n\nPr D\n?\n0 0 0\n\n1 1 1\n\n?\nP\u201a\n\nClearly, this configuration is singular, i.e., where rank.A/ D 1, of the\nrobotic manipulator with singular direction, u D ?\u01521 0\tT. This singularity\nis analogous to the external or saturation singularities for CMGs discussed in\nsubsequent sections.\n\nA spacecraft with CMGs is a special case of a robotic system of this type, as\nobserved by Bedrossian et al. [5], who relates the singularities associated with\nrobotic manipulators to those associated with SGCMGs. Geometric singularities\nassociated with CMGs are discussed below.\n\n5.3 Control Moment Gyroscope Singularities\n\nThe Jacobian of an array of RWAs is constant in the spacecraft body. In fact its\ngeometry is decided well before launch. The CMG Jacobian, in contrast, varies with\nthe gimbal angles of the CMGs and therefore can become singular as the CMG\ngimbals rotate in flight (see Chap. 4). When the CMG Jacobian is singular, one\nor more directions exist where no torque is available at that instant. The singular\ndirection consists of a single vector when the Jacobian is rank 2\u2014a so-called rank-2\n\n\n\n102 5 Singularities of Control Moment Gyroscopes\n\nFig. 5.3 Momentum vectors\nof three CMGs with parallel\ngimbal axes\n\nY\n\nh2\n\nh1\n\nh3\n\nX\n\nq2\n\nGimbal axes out of\nthe page\n\nsingularity. It consists of a plane of singular directions when the Jacobian is of rank\n1\u2014a rank-1 singularity. However, redundant arrays of CMGs offer additional null\nsolutions or null motion that may provide a means to skirt the singularity while\nmaintaining the required angular momentum.\n\n5.3.1 The Concept of CMG Singularity\n\nAs the Jacobian approaches a singularity, the gimbal rates necessary to produce\na finite torque approach infinity. Near the singularity, the finite capability of the\nhardware makes the array incapable of producing torque in one or more directions.\nA loss of control of the vehicle would follow. So, not only is a CMG array singular\nwhen the Jacobian is rank deficient, the array is also effectively unusable for a\nfinite region around these points. As an example, consider the momentum vectors\nof a planar array of three SGCMGs as shown in Fig. 5.3. All three gimbal axes\nare parallel and point out of the page. This array is not of practical interest on\nits own, but it helps illustrate the principle of interest here. The array is shown in\na zero-momentum state. By rotating the three gimbals the spacecraft can redirect\nthe net h vector anywhere in this plane. Figure 5.4 shows how the gimbals can be\nrotated to produce maximum momentum in either the X or Y directions. The three\nCMGs combine to produce at most 3h momentum in the desired direction. When\nthe array reaches this 3h state, it is impossible to increase the net jhj any further.\nThis condition is known as a \u201csaturation\u201d singularity. Like any physically realizable\nmechanical system, the hardware comprising the array has limits, specifically a\nmaximum gimbal rate. To avoid unexpected consequences of the reduction in torque\nauthority (or analogously loss of feedback-control gain) that arises as the array\napproaches saturation, the attitude-control design must incorporate margin between\nthe required momentum and the array\u2019s limited capability. A more subtle situation\n\n\n\n5.3 Control Moment Gyroscope Singularities 103\n\nFig. 5.4 Maximum momentum states of the array (saturation)\n\nFig. 5.5 A singular state of\nthe array (internal)\n\noccurs when the array is commanded to produce net momentum in the ?X direction\n(see Fig. 5.5). A simple steering algorithm would likely seek to change the gimbal\nangles ?2 and ?3 in the correct direction, but since\n\n@hX\n@?1\n\nD 0 (5.6)\n\nat this point, the algorithm would deduce that there is no value in changing ?1. The\narray momentum is now only 1h in magnitude, but there is no way to produce any\nmore without producing error in the Y-axis. Specifically, no incremental change\nin gimbal angles increases h in the desired direction. This situation is called an\n\u201cinternal singularity\u201d because it occurs within, not on, the saturation boundary of the\navailable momentum volume. When one of the CMGs opposes the rest of the array\nin this fashion, the problematic CMG is known as a \u201chung gyro.\u201d The avoidance of\nsuch singularities has been the subject of considerable research over the years. It has\n\n\n\n104 5 Singularities of Control Moment Gyroscopes\n\nTable 5.1 Singularity\nregions associated with the\nnumber of CMG in an array\n\nCMG number in array Singularity region\n\n2 0h, 2h\n\n3 1h, 3h\n\n4 0h, 2h, 4h\n\n5 1h, 3h, 5h\n\n6 0h, 2h, 4h, 6h\n\nFig. 5.6 Double-gimbal\ncontrol moment gyroscope\n\nbeen shown that an array of three SGCMGs has singularities at 1h and 3h, an array\nof four has singularities at 0h, 2h, and 4h, an array of five at 1h, 3h, and 5h, and\nso on. This is discussed further in Sect. 6.5.2, and Meffe and Stocking [6]. (Unlike\nthis simple planar example, the so-called \u201cnh\u201d singular surface of most CMG arrays\ndoes not have magnitude nh). Table 5.1 lists the combinations of singular surface\nregions for the number of CMGs and their associated regions. Conventional wisdom\nhas established a safe strategy: use a three-SGCMG array to avoid the singularity\nat 0h and size the momentum system such that attitude control never requires\nmore than 1h from the array. In this way, the entire singularity problem is neatly\nsidestepped. However, this book argues against restricting the design to a 1h sphere\nof performance. Singularity-avoidance algorithms enable arrays of four or CMGs\nto achieve considerably larger momentum envelopes and/or reduce the size, weight,\nand power of the momentum system (see Chap. 7).\n\n5.4 Double-Gimbal Control Moment Gyroscope Singularities\n\nDouble-gimbal control moment gyroscopes (DGCMGs), shown in Fig. 5.6, are\namong the most mechanically complex CMGs. This complexity is due to their mul-\ntiple gimbals and the additional drive electronics, slip rings, and sensors needed for\ntheir use. Severe performance limitations or mass penalties arise from the physics of\n\n\n\n5.5 Single-Gimbal Control Moment Gyroscope Singularities 105\n\nFig. 5.7 Gimbal lock in a\nDGCMG\n\nthese nested gimbals. There is also mathematical complexity with implications for\nflight-software development. The columns of the Jacobian for DGCMGs contain n\nvectors that are not in general unit-norm. In addition, parts of the Jacobian associated\nwith the inner and outer gimbal are coupled functions of the inner and outer\ngimbal angles (see Chap. 4). Nevertheless, these mathematical complexities do not\ncompromise the usability of such an array. The geometric singularities associated\nwith an array of DGCMGs are much like those for a SGCMGs array with one\nexception\u2014an array with three or more DGCMGs includes only passable internal\nsingularities (Kurokawa [7]). Passable singularities are easily handled by one of\nvarious algorithms that provide null motion for singularity avoidance (see Chap. 7).\nTherefore, the full momentum volume is available in a singularity-free manner.\n\n5.4.1 DGCMG Gimbal Lock\n\nThe most familiar of the singularities associated with DGCMGs is gimbal lock.\nFigure 5.7 shows this configuration. Gimbal lock for DGCMG occurs when the rotor\nspin axis aligns with the outer gimbal. With the gimbals in this configuration, the\nouter gimbal can no longer redirect the momentum vector. Mathematically, gimbal\nlock represents a loss of one control degree of freedom. In this configuration, the\nbehavior of the DGCMG degrades to that of a SGCMG using the inner gimbal.\n\n5.5 Single-Gimbal Control Moment Gyroscope Singularities\n\nTypically four or more devices (RWAs or SGCMGs) are used for attitude control\nof a spacecraft. Such an array is known as \u201credundant.\u201d In the case of RWAs, the\nredundancy is usually added for fault tolerance. The choice of a redundant SGCMG\narray offers an opportunity to avoid internal singularities, thereby increasing the\nmomentum and torque capability of the array in a mass-efficient way. For all\nredundant arrays, the Jacobian A, is nonsquare and thus noninvertible. Unlike\ncoordinate singularities, geometric singularities inherent in CMG arrays are not\n\n\n\n106 5 Singularities of Control Moment Gyroscopes\n\nonly mathematical but also physical phenomena\u2014there is physically no torque\navailable in a singular direction or plane of singular directions. In addition, external\nsingularities correspond to the maximum allowable angular momentum in any\nsingle direction. It is important to recognize that a CMG array\u2019s singularities are\nphysical because merely preventing a numerical divide-by-zero error is insufficient\nto address the problem. Instead, null motion is required. The effectiveness of\navoiding internal singularities through null motion depends on the form of the\nsingularity. This chapter classifies them as hyperbolic or elliptic. However, in the\nanalysis of CMG singularities, the direction of the singularity is of the utmost\nimportance: if the desired torque has components orthogonal to the singular\ndirection, a proper steering algorithm could exploit this for singularity avoidance.\n\n5.5.1 SGCMG Gimbal Lock\n\nThe case where all components of requested torque are along the singular direction\nis known as gimbal lock. It is impassable when a null-motion solution does not exist\nat the singularity. Unlike gimbal lock for a DGCMG, gimbal-lock for an array of\nSGCMGs occurs at any singularity for which\n\nP? D AC Ph D AT.AAT/?1 Ph D 0; Ph \u00a4 0\n\nwhere ? is a matrix of the gimbal rates P?i. When gimbal lock occurs, the system\nis trapped in this singular configuration. Both hyperbolic and elliptic singularities\ncan encounter gimbal lock depending on the commanded torque. However, unlike\nelliptic singularities, hyperbolic singularities offer the possibility of avoiding gimbal\nlock.\n\n5.6 Classification of Singularities\n\nTwo distinct types of singularities exist, with different classes within them.\nAs discussed previously, singularities for SGCMGs can be classified into the\ngroups/subgroups shown in Fig. 5.8. As discussed above, saturation singularities\nat the limit of the array capability are common to any array. Such singularities,\nalso known as external singularities, are accommodated in the sizing of the control\nsystem and are not germane to the discussion of singularity avoidance. Another\nclass of singularities called internal singularities are of much greater importance.\nThe array in Fig. 5.9 offers a practical example. For purposes of discussion, the\n\u201cshared direction\u201d for this roof array (as discussed earlier) is aligned with the Y\naxis of a reference coordinate system. Suppose that the gimbals in each plane\nwere positioned so the momentum vectors (red) were opposite to one another,\none pointing in the CY direction, the other in ?Y , as shown. All the momentum\n\n\n\n5.6 Classification of Singularities 107\n\nSGCMG Singularities\n\nElliptic\n\nExternal\n\nGimbal-Lock\n\nInternal\n\nHyperbolic\n\nInternal\n\nDegenerate Non-degenerate\n\nGimbal-Lock Gimbal-Lock\n\nGimbal-Lock\n\nFig. 5.8 Classification of SGCMG singularities\n\nFig. 5.9 Shared direction\nsingularity configuration\n\nvectors cancel. The array momentum is zero. No incremental motion of any of the\nfour gimbals can change momentum along the Y axis. Therefore, no collection of\ngimbal rates can produce a Y torque from this configuration. This is an internal\nsingularity\u2014no torque available, and yet the momentum state is far from the limit\nof the array\u2019s capability. If only three CMGs are operating, there is a 1:1 map\nbetween gimbal angle sets and momentum states on R3. Therefore, any internal\nsingularity corresponds to a single momentum state, and the only way to avoid them\n\n\n\n108 5 Singularities of Control Moment Gyroscopes\n\nis not to go there. This absence of alternatives severely restricts how much of the\nmomentum envelope can be used in practice. Thus a three-CMG array often uses\nits capability inefficiently. However, if four or more CMGs are operating, the same\nmomentum state can be achieved through infinite combinations of gimbal angles,\nsome of which may be non-singular. This opens the door to creativity in choosing\nhow to steer the gimbals to avoid singularities.\n\n5.7 Singularity Conditions Defined Mathematically\n\nTypically, differential geometry is used to represent hyperbolic and elliptic internal\nsingularities as surfaces or manifolds. Margulies and Aurbrun [8] and Tokar and\nPlatonov [9] were the first to use differential geometry for analysis of geometric\nsingularities associated with SGCMGs. Margulies and Aubrun derived singularity\ntype conditions from a differential-geometric singularity condition in the form of\na quadratic product. Their results gave the names elliptic and hyperbolic to the\ngeometric singularities associated with SGCMGs. Kurokawa [7] and Bedrossian\net al. [10] compared the geometric singularities of SGCMGs to those of robotic\nmanipulators, and set up the null-motion condition from Margulies [8] to consider\nthe possibility of null motion at singularities. Bedrossian et al. derived a method\nof determining if a hyperbolic singularity is or isn\u2019t degenerate for a specific set of\ngimbal angles. Wie [11] extended the results of Margulies\u2013Aubrun and Bedrossian\net al. to show an example of a degenerate hyperbolic singularity contained at\nthe zero-momentum state of a single scissored pair of SGCMGs. Kurokawa [7]\ninvestigated the singularities for two classes of arrays\u2014those with parallel gimbal\naxes and those without. Through differential geometry and principles of curvature,\nhe showed the properties of singularities for parallel and independent type arrays\nof up to six SGCMGs. The behavior of these internal singularities can also be\nexplained through the use of linear algebra rather than use of differential-geometry.\nWe use the methods presented in [10] to define singularity mathematically. It is\ncustomary to define an orthonormal basis fOsi; Ooi; Ogig shown in Fig. 5.10, where Osi is\nthe spin axis of the flywheel, Ooi is the SGCMG torque direction, and Ogi is the gimbal\naxis direction of a SGCMG. A Taylor series expansion of the SGCMG angular\nmomentum about a singular configuration, to second order, gives\n\nh.?/ ? h.?S/ D\nnX\n\niD1\n\n@hi\n@?i\n\n?\n?\n?\n?Si\n\n@?i C 1\n2\n\n@2hi\n@?2i\n\n?\n?\n?\n?Si\n\n@?2i C H:O:T: (5.7)\n\nwhere h.?S/ is the angular momentum of a SGCMG array at a singular set of gimbal\nangles ?S, @?i D ?i ? ?Si , hi is the angular momentum of the ith SGCMG, n is the\nnumber of SGCMGs in the system, and H:O:T . are the higher-order terms taken\nto be negligible because only admissible null solutions are considered. Therefore,\n\n\n\n5.7 Singularity Conditions Defined Mathematically 109\n\nFig. 5.10 CMG coordinate system fixed in the spacecraft body\n\nthe Taylor series expansion in Eq. (5.7) remains valid, i.e., convergent for the present\ncase. The first term on the right-hand side (RHS) of Eq. (5.7) contains the ith column\nof the Jacobian:\n\nOoi D @hi\n@?i\n\n?\n?\n?\n?Si\n\n(5.8)\n\nassociated with the ith SGCMG\u2019s torque direction. The second term on the RHS of\nEq. (5.7) is a Hessian and contains the partial derivative of the Jacobian\u2019s ith column\nwith respect to the ith gimbal angle\n\n@2hi\n@?2i\n\nD @Ooi\n@?i\n\nD ?hri Osi D ?hi (5.9)\n\nNext, Eq. (5.9) is substituted into Eq. (5.7). The inner product of the result with the\nsingular direction u, obtained from null.AT/, yields\n\nuT\u0152h.?/ ? h.?S/\t D 1\n2\n\nnX\n\niD1\nuThi@?\n\n2\ni (5.10)\n\nThe first term on the RHS of Eq. (5.7), uT Ooi has zero contribution because of the\ndefinition of the singular direction. Equation (5.10) can be written more compactly\nin matrix form as\n\nuT\u0152h.?/ ? h.?S/\t D 1\n2\n@?TP@? D 0 (5.11)\n\n\n\n110 5 Singularities of Control Moment Gyroscopes\n\nwhere P is the singularity projection matrix defined as P D diag.uThi/. By\ndefinition, null motion does not affect the total system angular momentum, which\nrequires that h.?/ D h.?S/. Consequently, the left-hand side (LHS) of Eq. (5.11) is\nzero, i.e., @?TP@? D 0. As in [10], null motion is expressed in terms of the basis\nN D null.A/, concatenated in matrix form as\n\n@? D\nnX\n\niD1\n?i\ni D N? (5.12)\n\nwhere ? is the column matrix of the scaling components of the null-space basis\nvectors \ni. In this concatenation step, the \ni are columns representing the null-space\nbasis. So, N 2 Rn?.n?rank.A// is a n ? .n ? rank.A// real matrix for any system\nof SGCMGs. Substituting Eqs. (5.12) into (5.11) while observing the null-motion\nconstraint, yields\n\n?TS? D 0 (5.13)\n\nAs a result of this analysis, the singularity-definition matrix S is defined as\n\nS D NTPN (5.14)\n\nTherefore, it is always true that S 2 Rn?rank.A//?.n?rank.A//. The eigenvalues of S\ndetermine whether a singularity is hyperbolic or elliptic. If S is definite, i.e., has all\npositive or negative eigenvalues, it contains only a trivial nullspace because only a\n? D 0 satisfies Eq. (5.13). Therefore, situations where the S is definite constitute\nelliptic singularities. They are so named because of the ellipsoidal nature of the\nquadratic in Eq. (5.13). For example, it can be rewritten as the equation of an ellipse\nfor a rank 2 singularity:\n\nau21 C bu22 D r2 (5.15)\n\nwhere u1 and u2 are components that are a function of the eigenvectors of S and\nnull-space coefficients, ?, a, and b, are the eigenvalues of S or semimajor axes of\nthe ellipse/ellipsoid/hyperellipsoid, and r2 is the value of the result in Eq. (5.13) for\narbitrary ?. When S is semi-definite, i.e., it has at least one ? \u00a4 0 at the point ?S,\nthen the null space is non-trivial. That value of ? satisfies Eq. (5.13). Singularities\nthat are semi-definite are known as hyperbolic in the literature even though they\nproduce quadratic products that are paraboloids in Eq. (5.13) with one or more of\nthe eigenvalues zero. If S is indefinite, the eigenvalues are positive, negative, and/or\nzero. In that case, Eq. (5.14) may equal zero even though S itself may not have a null\nspace. For example, consider the case\n\nS D NTPN D ?1 1?\n??1 0\n0 1\n\n? ?\n1\n\n1\n\n?\n\n\n\n5.7 Singularity Conditions Defined Mathematically 111\n\nIn this example the solution happens to equal zero, but that fact is unrelated to the\nrank of P. By analogy, non-trivial null motion or at least a null solution to the gimbal\nangles is possible near singularity and the possibility of singularity avoidance may\nhold for all S, semi-definite or indefinite. These singularities are named hyperbolic\nsingularities due to the hyperboloid shape of the quadratic in Eq. (5.13). It should be\nnoted that \u201cpossibility\u201d is stressed because additional null solutions do not constitute\na sufficient condition for the singularity to be passable, or avoidable through null\nmotion. An example, which is discussed below, is the case of degenerate-hyperbolic\nsingularities discussed in Bedrossian et al. [10].\n\n5.7.1 Determination of Singularity Degeneracy\n\nThe authors in [10] were the first to include the null-space basis as part of\ndetermining whether a specific point of angular momentum offers null solutions, as\nshown in the preceding analysis. They also provided an analytic way to determine\nif all of such null solutions are singular, i.e., that the singularity is a degenerate\nhyperbolic singularity. When the Jacobian is rank 1, more terms are needed from the\nTaylor series expansion in Eq. (5.10) to determine if null solutions exist. Degenerate\nsolutions of null motion in the vicinity of singularity lie on a local curve along which\nthe Jacobian is less than full rank. Therefore, null motion at a degenerate hyperbolic\nsingularity satisfies the null-motion condition in Eq. (5.13) and does not change the\narray angular momentum. Although the individual output-torque directions of the\nCMGs, (the columns of the Jacobian) may change, the Jacobian instantaneously\nremains less than full rank. To define a hyperbolic singularity as degenerate we first\ndefine the commonly used metric for the distance from singularity. This singularity\nmetric is m D pdet.AAT/ which is the product of the Jacobian singular values\n(Yoshikawa [12]). The objective is to find the hyperbolic-singularity null solutions\nfor which m.?/ > 0, thereby showing that there may exist null motion that can\nmove the system away from singularity. To accomplish this objective we first need to\nfind the nonzero, i.e., non-trivial admissible null solutions ? that satisfy Eq. (5.13).\nHaving found ?, we then determine if any of these null solutions meet the constraint\nm.?/ > 0. The analysis begins with a Taylor series expansion of m about a\nspecific ?:\n\nm.?S C?/ D m.?S/C\nnX\n\niD1\n\n@m\n\n@?i\n\n?\n?\n?\n?\n?\n?Si\n\n@?i C 1\n2\n\nnX\n\njD1\n\nnX\n\niD1\n\n@2m\n\n@?j@?i\n@?j@?i\n\n?\n?\n?\n?\n?\n?Si\n\nC H:O:T:\n\n(5.16)\nIt is clear that m.?S/ D 0 by the definition of singularity and\n\n@m\n\n@?i\n\n?\n?\n?\n?Si\n\nD 0\n\n\n\n112 5 Singularities of Control Moment Gyroscopes\n\nbecause it is an unconstrained stationary point of m. Therefore, neglecting the\nH.O.T., Eq. (5.16) in matrix form is\n\nm.?S C?/ D 1\n2\n@?T\n\n@2m\n\n@?@?T\n@? (5.17)\n\nwhere the null solutions ? are incorporated as a linear combination of null-space\nbasis vectors, and\n\nW D NT @\n2m\n\n@?@?T\nN D NTMN (5.18)\n\nwhere M is the Hessian of m. The fact that near singularity m > 0 8 ? implies\nthat M and W are also positive definite. Therefore, a sufficient condition for null\nmotion to permit the array to escape singularity, i.e., the hyperbolic singularity is\nnot degenerate if M > 0. However, if W is singular and thus contains a null-space,\nsolutions ? exist to keep the quadratic form in Eq. (5.17) zero. If these are the same\nsolutions to the quadratic result in Eq. (5.13), the test for degeneracy is inconclusive.\nWhen this occurs, either no null solutions exist to move the system away from\nsingularity or the H.O.T in the quadratic forms in Eqs. (5.13) and (5.17) must be\nconsidered. Here, degeneracy of a hyperbolic singularity is found either through\na local analysis and searching the entire set or through globally searching all of\nthe null-space trajectories that produce the same angular momentum. Neither is a\nstraightforward process. Some cases may arise, such as the four-CMG roof array,\nwhere null motion may be available at a singularity but where a connected set of\nnull motions can reach a non-singular angular momentum in finite time.\n\n5.8 Hyperbolic Singularities\n\nThe previous section defined singularities mathematically by the ability of null\nmotion to pass through or avoid them. All such singularities lie inside the angular-\nmomentum envelope shown in Fig. 5.19, and all points on the internal singular\nsurface shown in Fig. 5.20 that correspond to a hyperbolic singularity have null\nsolutions or null motion that has the possibility of being used for singularity\navoidance. This section offers some examples of hyperbolic singularities.\n\n5.8.1 Non-degenerate Hyperbolic Singularities\n\nNon-degenerate hyperbolic singularities have a continuum of non-singular null\nsolutions at singularity, where null motion is possible for singularity avoidance.\nThe four CMG pyramid array has both hyperbolic and elliptic singularities (see\n\n\n\n5.8 Hyperbolic Singularities 113\n\nChap. 6). The following example considers a four CMG pyramid array and uses\nthe tools developed in the previous section to classify singular configurations for\nan array of CMGs. Consider the example for a four CMG pyramid array at a skew\nangle ? taken from Bedrossian [13]. The \u201cskew\u201d angle is the angle of the plane of\nangular momentum of the rotor, spanned by rotating the gimbal, with respect to the\nhorizontal axis of the SGCMG array. The skew angle is therefore the complement\nof the \u201cinclination\u201d angle (see Sect. 4.2).\n\nExample 5.3. The angular momentum of this array is\n\nh D hr\n2\n\n4\n?c.?/s.?1/\n\nc.?1/\ns.?/s.?1/\n\n3\n\n5Chr\n2\n\n4\n?c.?2/\n\n?c.?/s.?2/\ns.?/s.?2/\n\n3\n\n5Chr\n2\n\n4\nc.?/s.?3/\n?c.?3/\n\ns.?/s.?3/\n\n3\n\n5Chr\n2\n\n4\nc.?4/\n\nc.?/s.?4/\ns.?/s.?4/\n\n3\n\n5\n\nA D hr\n2\n\n4\n?c.?//c.?1/ s.?2/ c.?//c.?3/ ?s.?4/\n\n?s.?1/ c.?/c.?2/ s.?3/ c.?/c.?4/\ns.?/c.?1/ ?s.?/c.?2/ s.?/c.?3/ s.?/c.?4/\n\n3\n\n5\n\nFor a four CMG pyramid array with zero angular momentum, a set of gimbal\nangles ? D \u015290 180 ? 90 0\tT deg is a hyperbolic singularity that has the\nfollowing Jacobian\n\nA D hr\n2\n\n4\n0 0 0 0\n\n?1 c.?/ ?1 c.?/\n0 ?s.?/ 0 s.?/\n\n3\n\n5\n\nand singular direction\n\nu D\n2\n\n4\n1\n\n0\n\n0\n\n3\n\n5\n\nThe resultant projection matrix is\n\nP D hrdiag.?c.?/; 1;?c.?/; 1/\n\nand the null space of the Jacobian, concatenated in matrix form, is\n\nN D\n\n2\n\n6\n6\n4\n\n?1 2c.?/\n0 1\n\n1 0\n\n0 1\n\n3\n\n7\n7\n5\n\n(continued)\n\n\n\n114 5 Singularities of Control Moment Gyroscopes\n\nThe resulting singularity-definition matrix is\n\nS D 2hr\n??c.?/ c.?/2\n\nc.?/2 1 ? 2c.?/3\n?\n\nThe determinant of the singularity definitions matrix is 4hrc.?/.c.?/3 ? 1/.\nIf 0 ? ? ? ?=2, c.?/ > 0, the term 4hrc.?/ can be neglected. Also,\nc.?/3 ? 1. So, S is either indefinite or semi-definite, and therefore this\nsingularity is a hyperbolic singularity.\n\n5.8.2 Degenerate Hyperbolic Singularities\n\nDegenerate hyperbolic internal singularities occur when all of the null-space\nsolutions for a particular point of angular momentum correspond to a singular\nJacobian, leaving no room for instantaneous singularity avoidance. Hyperbolic\nsingularities that are degenerate are also considered impassable and therefore may\nbe handled in a manner similar to elliptic singularities. Consider the example of a\ndegenerate hyperbolic singularity from Wie [11] for a pair of two SGCMG with\nparallel gimbal axes.\n\nExample 5.4. The angular momentum and Jacobian for a set of two\nSGCMGs with parallel gimbal axes is\n\nh Dhr\n?\n\ns.?1/\nc.?1/\n\n?\n\nC hr\n?\n\ns.?2/\nc.?2/\n\n?\n\nA Dhr\n?\n\nc.?1/ c.?2/\n?s.?1/ ?s.?2/\n\n?\n\nFor this array, the singularity measure m is\n\nm D s.?1 ? ?2/\n\nNow, there are two singular configurations for this array: one in which\n?1 ? ?2 D 0 , which is the saturation singularity at 2h, and one that\noccurs internally at h D 0, when ?1 ? ?2 D ? . Because all hyperbolic\nsingularities are internal, the latter case is of interest for degenerate hyperbolic\nsingularities. By inspection, all 0h configurations must have ?1 ? ?2 D ?\n\n(continued)\n\n\n\n5.9 Elliptic Singularities 115\n\nFig. 5.11 Degenerate\nhyperbolic singularity\n\nand thus are singular. This singular configuration is shown in Fig. 5.11. In\naddition, the singular condition continues to be in force when both gimbals\nare moving using null motion. Therefore, this point of angular momentum\nhas only null-motion solutions that are always singular. Furthermore, any set\nof gimbal angles at this point of angular momentum is a degenerate hyperbolic\nsingularity.\n\n5.9 Elliptic Singularities\n\nElliptic singularities are those in which null motion does not exist for a specific\nvalue of array angular momentum. Since elliptic singularities do not permit null\nmotion, the only way to escape singularity is for the array\u2019s angular momentum to\nbe perturbed. This perturbation induces error in the spacecraft\u2019s motion relative to\nwhat the attitude-control subsystem attempts to achieve.\n\n5.9.1 External Elliptic Singularities\n\nElliptic singularities comprise both external and internal singularities. As explained\nabove, external singularities occur on the surface of the array angular-momentum\nenvelope as shown in Fig. 5.20. Consider again the example of a four CMG pyramid\narray with skew angle ?.\n\n\n\n116 5 Singularities of Control Moment Gyroscopes\n\nExample 5.5. For a four CMG pyramid array, the set of gimbal angles ?S D\n\u015290 90 90 90\tT is an external elliptic singularity with angular momentum and\nJacobian\n\nA D hr\n2\n\n4\n0 1 0 ?1\n\n?1 0 1 0\n0 0 0 0\n\n3\n\n5\n\nand singular direction\n\nu D\n2\n\n4\n0\n\n0\n\n1\n\n3\n\n5\n\nThe resultant projection matrix is\n\nP D hrdiag.s.?/; s.?/; s.?/; s.?//\n\nand the null space of the Jacobian concatenated in matrix form is\n\nN D\n\n2\n\n6\n6\n4\n\n0 1\n\n1 0\n\n0 1\n\n1 0\n\n3\n\n7\n7\n5\n\nThe resulting singularity definition matrix is\n\nS D 2hr\n?\n\ns.?/ 0\n0 s.?/\n\n?\n\nThe determinant of the singularity definitions matrix is 2hrs.?/2 which is\nobviously positive meaning that S is definite and corresponds to an elliptic\nsingularity. Therefore, no null motion can exist in the vicinity of ?S, and this\nsingularity is elliptic and impassable. Also, note that a definite P proves the\nsingularity to be an external singularity, i.e., maximum projection of angular\nmomentum. S is always definite when P is definite, proving that external\nsingularities are all elliptic.\n\n\n\n5.9 Elliptic Singularities 117\n\n5.9.2 Internal Elliptic singularities\n\nElliptic singularities that lie on the internal singular surfaces, such as those shown\nfor the four CMG pyramid array in Fig. 5.20, are referred to as elliptic internal\nsingularities. Unlike external singularities, these singularities are not a simple matter\nof sizing a CMG array; furthermore, since they occur instantaneously, they cannot\nbe avoided by a naive algorithm on the fly. Consider the example for an internal\nsingularity of a four CMG pyramid array.\n\nExample 5.6. For a four CMG pyramid array, the set of gimbal angles ?S D\n\u0152?90 0 90 0\tT is an internal elliptic singularity with angular momentum and\nJacobian\n\nh Dhr\n2\n\n4\nc.?/\n0\n\n?s.?/\n\n3\n\n5C hr\n2\n\n4\n?1\n0\n\n0\n\n3\n\n5C hr\n2\n\n4\nc.?/\n0\n\ns.?/\n\n3\n\n5C hr\n2\n\n4\n1\n\n0\n\n0\n\n3\n\n5\n\nA Dhr\n2\n\n4\n0 0 0 0\n\n1 ?c.?/ 1 c.?/\n0 s.?/ 0 s.?/\n\n3\n\n5\n\nand singular direction\n\nu D\n2\n\n4\n1\n\n0\n\n0\n\n3\n\n5\n\nThe resultant projection matrix is\n\nP D hrdiag.c.?/;?1; c.?/; 1/\n\nand the null space of the Jacobian concatenated in matrix form is\n\nN D\n\n2\n\n6\n6\n4\n\n?1 2c.?/\n0 ?1\n1 0\n\n0 1\n\n3\n\n7\n7\n5\n\nThe resulting singularity definition matrix is\n\nS D 2hr\n?\n\nc.?/ c.?/2\n\nc.?/2 2c.?/3\n\n?\n\n(continued)\n\n\n\n118 5 Singularities of Control Moment Gyroscopes\n\nThe determinant of the singularity definitions matrix is 2hrc.?/4 which is\npositive and therefore, the singularity is defined as elliptic. Therefore, no null\nmotion can exist in the vicinity of ?S, and this singularity is elliptic and\nimpassable. Also, P is indefinite and therefore, it is an internal singularity.\n\n5.10 Passability and Impassability of Singular Points\n\nHaving defined and categorized the types of singularities encountered in CMG\narrays, we can now discuss an important property of singular points which has\ndirect practical applicability to the choice of array architectures and controls. The\nconcept of passability for a singular point is neither consistent nor clearly explained\nin the literature. This probably has to do with the fact that there has been no set\nstandard in defining passablity in terms that are understood by more readers than\nthe mathematically inclined. Therefore, here we will define in our own terms the\npassability of points of angular momentum and their corresponding singularities.\nDefining passability of points of angular momentum, provides a means for the user\nof a CMG-based spacecraft momentum control system to map out troublesome parts\nof the angular momentum workspace (see Sect. 5.11). In this discussion we must\ndistinguish between a point in gimbal space (a specific set of n gimbal angles),\nand the corresponding point in momentum space (a vector in 3 axes). Any array of\ngreater than three CMGs has many possible combinations of gimbal angles that map\nto the same point in momentum space. Some of these combinations of gimbal angles\nmay be singular, others not. Passability is a characteristic of a point in momentum\nspace, and it derives from an examination of the entire family of gimbal angle sets\nthat map to that point. The concepts discussed in this section are not based on\nlocal analysis and therefore are different from those shown in [10, 14]. A point\nin momentum space is called passable if it is possible to change the point from\nsingular to non-singular using only null rotations of the gimbals. Subcategories of\nimpassable and passable singularities are shown in Fig. 5.12. Note that we cannot\n\nImpassable\nSingularities\n\nDirectionally\nPassable Gimbal Lock\n\nPassable Singularities\n\nLocally\nPassable\n\nGlobally\nPassable\n\nFig. 5.12 Impassability and passability types\n\n\n\n5.10 Passability and Impassability of Singular Points 119\n\nFig. 5.13 Saturation\nsingularity (elliptic)\n\nsimply extend the categories of singularities presented in Fig. 5.8. This is because\npassability is a property of the momentum point, and the singularities of Fig. 5.8\nare properties of a specific gimbal angle set. In the rest of this section, we shall\nexamine each of the different types described in Fig. 5.12. To illustrate, examples\nwill be provided using simple planar arrays of CMGs with parallel gimbal axes.\nThese arrays offer a convenient way to visualize the distinctions among the various\ncategories of singularity.\n\n5.10.1 Impassable Singular Points\n\nFirst, consider a point in momentum space characterized as an elliptic singularity\n(see Sect. 5.9). As this point has no null motion, it must be impassable by definition.\nAn example would be any point on the saturation boundary, such as shown in\nFig. 5.13. There may be multiple gimbal angle solutions (e.g., mirror images) for\nthis point of angular momentum, all corresponding to elliptic singularities, but\nthey are not connected; and hence null motion does not exist between them. Next,\nwe consider a point in momentum space characterized as a degenerate hyperbolic\nsingularity (see Sect. 5.8.2). This point has possible null motion, but all possible\ngimbal angle sets are singular. Therefore this point must also be impassable by\ndefinition. An example is the origin of a two-disc, as shown in Fig. 5.14. The fact\nthat these points are impassable does not imply that they are inescapable. However,\ntraversing these points will, in general, result in torque error, i.e., the net momentum\nof the array must deviate from the intended momentum trajectory. Whether a torque\nerror results depends upon the instantaneous direction of the commanded torque,\nand the singular direction of the gimbal set. Consider the following possibilities.\nTorque command is in exactly the singular direction: This case is referred to as\n\u201cgimbal lock\u201d. It is impossible to move in the intended direction. Torque command\nhas some components in the singular direction: In this case, called \u201cdirectional\n\n\n\n120 5 Singularities of Control Moment Gyroscopes\n\nFig. 5.14 Degenerate hyperbolic singularity\n\nFig. 5.15 \u201cDirectional\u201d passability\n\npassability,\u201d some of the desired torque can be provided, but there will be error.\nNevertheless, the act of providing this torque moves us to a different momentum\npoint, and may facilitate singularity escape. The practice of employing trajectories\nin the range space for singularity escape is discussed by Yamada and Jikuya [14].\nTorque command has no component in the singular direction: In this case, despite\nthe fact that the point is singular, we can traverse it with no torque error. This unusual\ncase, illustrated in Fig. 5.15, is also referred to as \u201cdirectional passability\u201d and is\npossible for any singularity. Note how we can follow the indicated momentum\ntrajectories exactly despite the singularities. The odds of the requested torque\nhappening to fall precisely in the non-singular subspace of the Jacobian where no\ntorque error is accumulated are vanishingly small. No practical system would be\ndesigned in the hope that this situation would occur; any torque required along the\nsingular direction leads to attitude-control error. Therefore, a spacecraft would likely\nbe designed to operate only in a situation with passable internal singularities.\n\n\n\n5.10 Passability and Impassability of Singular Points 121\n\nY\n\nX\n\nY\n\nZ\n\n1 2 3 4 5\n\nFig. 5.16 Null space at the origin of the four-CMG roof array\n\n5.10.2 Passable Singular Points\n\nA point in momentum space may have gimbal angle sets characterized by non-\ndegenerate hyperbolic singularity (Sect. 5.8.1). This point has a null space, and it\nis possible, using only null motion, to move from a singular to a non-singular set\nof gimbal angles. It is therefore passable by definition. Passable singular points fall\ninto two subcategories, referred to as local or global. Unlike the subcategories of\nimpassable points discussed previously, which depended upon the instantaneous\ntorque command, local or global passability is a characteristic of the momentum\npoint only. Categorizing the types of passability of \u201clocal\u201d and \u201cglobal\u201d has some\nsymmetry with the controls community\u2019s viewpoint of locally and globally stable.\nLocal passability: Consider the four-CMG roof array. This array consists of two of\nthe two-CMG discs discussed earlier. The internal singular surfaces for the four-\nCMG roof array are shown in Fig. 6.8 as blue-green discs. These discs correspond\nto the origin of one pair of CMGs being swept by the 2h disc of the other pair.\nWe can visualize the motion of the four CMGs in this array by drawing the two\ndisks. In Fig. 5.16, the top row shows the disk in the XY plane, and the bottom\nshows the disk in the YZ plane. The shared axis of the array is \u201cY\u201d in this example.\nFigure 5.16 illustrates the null space at the origin of the four-CMG roof array.\nExamination of snapshots 1\u20135 verifies that all of these gimbal angle sets map to\nthe net momentum \u01520 0 0\tT, therefore motion between them occurs in null space.\nSnapshot 1 is singular, unable to produce torque in the Y direction. Snapshots 2 and\n3 are non-singular. Snapshot 4 is singular again, and it is interesting to note that this\nis a \u201crank 1\u201d singularity\u2014the array can produce torque ONLY in the Y direction.\nSince four CMGs have rank 1, 3 degrees of freedom of null space are available.\nThey could move to return to snapshot 3, or either of the disks could rotate in pairs to\narrangements such as those shown in snapshot 5. Once the array has reached any of\n\n\n\n122 5 Singularities of Control Moment Gyroscopes\n\nFig. 5.17 Three parallel CMGs with globally passable singularities\n\nthe arrangements depicted by snapshot 5, it is again rank 2\u2014each disc can produce\ntorque in one direction. Thus it has two degrees of freedom of null space, and the\nCMGs in each disc can rotate in pairs, independently. However, note that there is\nno way (using only null-space motion) to get from one of these configurations back\nto the (non-singular) snapshot 3 without first passing through the arrangement of\nsnapshot 4. Such difficulties earn this point in momentum space the characteristic\nof \u201clocal\u201d passability. Specifically, while it is possible using only null space to\nreturn to a non-singular state (passable), it cannot be done instantaneously. It takes\na finite amount of time to navigate the CMGs to arrangement 4, then 3. Of course,\nsingularities such as those shown in snapshot 5 can be escaped instantaneously by\nusing range space, but doing so results in torque error, as discussed earlier. This is\nwhy steering through the entire momentum envelope of a four-CMG roof array may\nrequire torque error at some points. The steering law design can influence where\nthese errors occur, for example, moving them well away from the origin. Global\npassability: If all singular combinations of gimbal angles at a point in momentum\nspace can instantaneously move in null space to a non-singular arrangement, the\npoint is globally passable. An example of global passability is the 1h singular circle\nfor three parallel CMGs, as illustrated in Fig. 5.17. From symmetry, we can see that\nany point on the 1h internal singular surface above is globally passable. It can then\nbe shown that a six-CMG roof array, comprised of two sets of three parallel CMGs,\nhas all of its internal points of angular momentum globally passable (see [7, 9]).\nSuch an array can avoid all internal singularities with proper steering.\n\n5.11 Singular Surfaces for SGCMG\n\nIt is beneficial to understand where in the angular momentum space singularities\narise. The satellite attitude-control designer may wish to know all angular momenta\nthat risk a singular Jacobian a-priori so that he or she may design an algorithm to\nescape or avoid such points. Typically, arrays of SGCMGs are redundant for the\n\n\n\n5.11 Singular Surfaces for SGCMG 123\n\npurpose of dealing with singularities by use of null motion. This redundancy and\nthe fact that the Jacobian elements are nonlinear functions of the SGCMG gimbal\nangles make it difficult to visualize a unique relationship between the solution of\ngimbal angles and the angular momentum. However, it is still possible to construct\nthree-dimensional surfaces that represents the full extent of singular surfaces for\nthe n-dimensional case. This is done by first constructing a basis for the singular\ndirections u 2 R3 in terms of angular momentum. In terms of the orthonormal basis\nshown in Fig. 5.10, the singular direction is\n\nu 2 R3 W u ? Ooi D 0; i D 1; 2; : : : ; n (5.19)\n\nIn this basis, all torque vectors lie in a plane, and u is orthogonal to that plane.\nThis constraint constitutes a maximum (or minimum) projection of Osi onto u.\nFor simplicity, this development is restricted to the common case where the\nmagnitude of angular momentum is the same for all SGCMGs in the array. For a\ngiven singular direction u \u00a4 Ogi where u D Ogi occurs for DGCMGs and for roof\narrays (see Chap. 6). The conditions for singularity are\n\nu ? Osi > 0 and u ? Osi < 0 (5.20)\n\nwhere the definition of the singular direction u? Ooi D 0must also hold, i.e., a singular\ndirection must exist for singularity. From the orthonormal basis in Fig. 5.10,\n\nOsi D Ooi ? Ogi\nOoi D Ogi ? Osi\nOgi D Osi ? Ooi; i D 1; 2; : : : ; n (5.21)\n\nDefine the projections \"i , u ? Osi which are the projections of the P matrix in Eq.\n(5.11). Then the torque axis is\n\nOoi D \"i Ogi ? ujjOgi ? ujj ; u \u00a4 Ogi; i D 1; 2; : : : ; n (5.22)\n\nwhich satisfies Eqs. (5.19) and (5.21), for all torque vectors. The resulting spin\naxis is\n\nOsi D \"i .Ogi ? u/ ? OgijjOgi ? ujj ; u \u00a4 Ogi; i D 1; 2; : : : ; n (5.23)\n\nBecause there are two singular directions\u2014along the positive and negative direc-\ntions, i.e., \"i ? 1\u2014at each point of singular momentum, there are 2n singular con-\nfigurations of gimbal angles of n SGCMGs, for any singular direction. Therefore,\nadding more SGCMGs does not necessarily provide better singularity avoidance.\nAn example of a singular direction projected onto a CMG\u2019s axes is shown in\n\n\n\n124 5 Singularities of Control Moment Gyroscopes\n\nFig. 5.18 Example of the\nsingular direction in terms of\nCMG coordinate frame\nreconstructed from (Yoon and\nTsiotras [15])\n\nFig. 5.19 External\n(saturation) and internal\nsingular surfaces for four\nCMG pyramid array (external\nsurface shown in red)\n\nFig. 5.18 in the coordinate system of a single SGCMG. In Fig. 5.18, the singular\ndirection shares a plane with the ith gimbal axis, and the ith torque vector is always\northogonal to the ith spin axis. This geometry is consistent with the definitions\nin Eqs. (5.19) through (5.23). Summing Eq. (5.23) results in the total normalized\nangular momentum from the SGCMGs:\n\nh D\nnX\n\niD1\nOsi D\n\nnX\n\niD1\n\"i\n.Ogi ? u/ ? Ogi\n\njjOgi ? ujj ;u \u00a4 Ogi; i D 1; 2; : : : ; n (5.24)\n\nWhen u D Ogi for any of the gimbal axes, Eqs. (5.22) through (5.24) corresponding\nto those gimbal axes are indeterminate. The locus of total normalized angular\nmomentum h, from Eq. (5.24), for all u 2 R3 and all \"i \u00a4 0, i.e., u not collinear to\nOgi produces the external singular surface known as the angular momentum envelope\n\n\n\n5.12 Characteristics of Singular Surfaces 125\n\nFig. 5.20 Internal singular\nsurfaces for a four CMG\npyramid array\n\nand the internal singular surfaces. Typically, the sequence of signs of \"i corresponds\nto the singularity region of the associated singular surface. For example, for a four\nCMG array with \" D fC;C;C;Cg or \" D f?;?;?;?g corresponds to a 4h\nsaturation-singularity region. \" D fC;C;C;?g , \" D fC;?;?;?g or any other of\nthe 16 combinations of \" with just one sign different, correspond to 2h singularity\nregions. The angular momentum envelope in Fig. 5.19 represents the case where the\nset of all \"i \u00a4 0 of the array have equal sign. Similarly, each of the four internal\nsingular surfaces shown in Fig. 5.20 for a four CMG pyramid array can be found by\nsetting the sign of one of the \"i to be different from the others. This process yields\npoints inside the momentum envelope that may be singular. The subset of these\npoints for which the rank of the Jacobian is less than 3 are the true singularities.\n\n5.12 Characteristics of Singular Surfaces\n\nThe internal and external singular surfaces consist of the locus of points derived\nfrom all the singular angular-momentum points identified via Eq. (5.24). The\nexternal surface is the set of all singular momentum states corresponding to the\nmaximum array angular momentum, i.e., \" D fC;C;C;Cg or \" D f?;?;?;?g.\nThis limit makes sense physically: null motion cannot provide angular momentum\nbeyond the array\u2019s capability. Within the saturation limit lie the internal singular\nsurfaces. They are shown in Fig. 5.20 for the case of a four CMG pyramid. All\npoints on this surface correspond to the possibility of internal elliptic or hyperbolic\nsingularities. These surfaces are connected smoothly to the external singular surface\nin Fig. 5.19 by trumpet-like dimples. They are also sometimes referred to as \u201clily\npads.\u201d These dimples are tangent to the plane orthogonal to a CMG\u2019s gimbal\naxis, along which none of that CMG\u2019s momentum can lie. There are four of these\nsurfaces, each corresponding to one of the four CMGs in this array. Note that the\n\n\n\n126 5 Singularities of Control Moment Gyroscopes\n\nsurface of the angular momentum envelope in Fig. 5.20, is almost a spheroid but\nfor the dimples and the flat parts of the angular momentum envelope near them. A\ncommonly cited choice of skew angle is ? D 54:74? for this array because this angle\nproduces the symmetry needed for the array to be as close to a spheroid as possible.\nHowever, only in the rare case where a spherical angular momentum envelope is of\npractical use would this angle be implemented: for example, an unlikely spacecraft\nwith identical inertia and identical agility requirements in all axes. More commonly,\nthe momentum envelope would be biased to maximize agility in the one or two\ndirections where it has operational value (see Sect. 6.8). As more SGCMGs are\nadded, the external singular surface becomes more spherical. However, adding more\nSGCMGs to most arrays does not eliminate the singularity problem. Actually, the\nnumber of singular combinations of gimbal angles for any singular direction goes\nup as 2n. Therefore, it is incorrect to assume that more SGCMGs always offer more\neffective singularity avoidance. In addition, research has shown that it is beneficial to\noptimize the shape of the singular surface as well as to maximize the usable angular\nmomentum. Such an approach can maximize the use of the angular momentum for\nattitude control instead of devoting gimbal activity to avoiding singularities (see\nChaps. 6 and 7). Leve et al. [16] and Sands et al. [17] choose the orientation of\nSGCMG gimbal axes in the context of spacecraft inertia properties to maximize\noverall attitude-control performance. The singular surfaces discussed and those in\ngeneral for SGCMGs are found by projecting the angular momentum from an n-\ndimensional set of gimbal angles to 3-D space. Therefore, the surfaces are usually\nsubtle and hard to visualize. Techniques by Dominguez and Wie [18] and Meffe and\nStocking [6] construct cross sections of the singular surfaces to show attachments\nof the internal to external singular surfaces as well as the singularity-free angular\nmomentum.\n\n5.13 Numerical Sensitivity in the Vicinity of a Singularity\n\nAccording to Eq. (5.19), a SGCMG array singularity occurs when a singular\ndirection u exists that is orthogonal to all output-torque directions Ooi. However, this\nresult is theoretical and neglects hardware limitations and imprecision. In reality,\nrather than points of singularities, singularity regions exist where the array cannot\nproduce the torque requested due to finite gimbal-rate limits. Accommodating these\nlimits requires revisiting Eq. (5.19) with the following modification\n\nu 2 R3 W ju ? Ooij ? ?. P?max/; i D 1; 2; : : : ; n (5.25)\n\nwhere ?. P?max/ is a parameter that limits the distance to singularity based on the\nmaximum gimbal rates achievable. If the condition in Eq. (5.25) for all CMG torque\nvectors is less than ?. P?max/, the Jacobian is close enough to singularity that at least\none of the CMG cannot produce the gimbal rate needed to match the requested\ntorque. The condition in Eq. (5.25) depends to some extent upon the steering\n\n\n\n5.14 Variable-Speed Control Moment Gyroscope Singularities 127\n\nlaw. A simple planar case describes what is meant here by region of singularity.\nConsider the scissored pair of SGCMGs in Example 5.4. This pair of SGCMGs has\nsingularities at 0h and 2h, where the singularity at 0h is just a point. The Jacobian is\n\nA D hr\n?\n\nc.?1/ c.?2/\n?s.?1/ ?s.?2/\n\n?\n\nAt the 0h singularity, the Jacobian and singular direction are\n\nA D hr\n?\n1 ?1\n0 0\n\n?\n\nu D\n?\n1\n\n0\n\n?\n\nFor this system, let hr D 1 and assume a 1? departure of the torque and angular\nmomentum vectors from their original angle along the gimbal axis. The Jacobian\nfor this case is\n\nA D\n?\n0:9998 ?1\n\n?0:0175 0\n?\n\nTherefore, the requested torque is achieved by\n\n? D A?1 Ph D 1\ndet.A/\n\nadj.A/Ph\n\nwhere adj.A/ is the adjoint of A or the cofactor transpose of the A matrix, and\n\n1\n\ndet.A/\nD ?57:2987 (5.26)\n\nEquation (5.26) shows that a gain of approximately 57 to the gimbal rates needed\nto achieve the requested torque Ph. It is clear that as the array approaches singularity,\neven without encountering it, det(A) becomes smaller. Therefore, the gain that\nmultiplies the torque may lead to unachievable gimbal rates.\n\n5.14 Variable-Speed Control Moment Gyroscope\nSingularities\n\nA variable-speed control moment gyro (VSCMG) differs from a SGCMG in that it\noffers an extra control degree of freedom in the form of the rotor torque. This speed\nvariation can be used for singularity avoidance, in principle. So, it is possible for\n\n\n\n128 5 Singularities of Control Moment Gyroscopes\n\na set of two VSCMGs with linearly independent gimbal axes to provide full three-\naxis control to a spacecraft without a singular Jacobian (Yoon and Tsiotras [15]).\nHowever, the torque does not scale linearly to power. RWAs, like VSCMGs, also\nhave variable-speed rotors that produce torque through rotor accelerations. They\noffer at best a 1:1 ratio of output to input torque. SGCMGs produce torque through\na gyroscopic effect that amplifies the torque input to the gimbal axis to produce a\nmuch higher output torque. In practice, the VSCMG rotor torque is considerably\nlower than the CMG output torque\u2014sometimes one or more orders of magnitude.\nBeyond about three orders of magnitude (as is the case in typical SGCMGs),\nthis difference between rotor-torque capability and CMG output-torque capability\nmakes any benefits of variable speed largely irrelevant. Enabling a large VSCMG\nto provide comparable torque through its rotor requires a comparatively heavy\nspin motor, introduces thermal challenges, stresses bearing design, and ultimately\ncreates a less-than optimal system design. It may be that very small CubeSat\nCMGs (CSCMGs)\u2014of a scale suitable for CubeSats\u2014exhibit a more successful\nbalance of rotor torque and gyroscopic output torque. To reduce the amount of RWA\naccelerations used for singularity avoidance, and therefore the input power used by\nVSCMGs, Schaub and Junkins [19] developed a mathematically elegant weighted\nMoore\u2013Penrose pseudoinverse approach that used a local gradient to steer away\nfrom singularities and as well as tracking a desired rotor rate. Schaub\u2019s and Junkins\u2019\nalgorithm shows promise in converging to a set of desired rates or accelerations,\nthereby reducing the rotor accelerations needed for singularity avoidance. However,\nsuch approaches do not address the problem of the SGCMG Jacobian contribution\nthat depends on the speed of the rotors. As the VSCMG rotor speed decreases,\nthe contribution of the gyroscopic torque from the SGCMG is reduced linearly.\nTherefore, the fact that the rotor speed is often lower sacrifices output-torque\ncapability. Even worse, if the CMGs\u2019 rotor momenta vary too widely, voids can\nappear in the momentum envelope that resemble saturation singularities but within\nthe interior. Such voids are not necessarily reflected in a singular Jacobian, but\nnevertheless these configurations are impassable by gimbal motions alone and\nrepresent angular-momentum values that cannot be achieved even for non-singular\ngimbal-angle configurations. These many issues explain why VSCMGs are not\nwidely adopted in practice.\n\n5.15 Zero-Momentum Spin Up\n\nDuring launch, momentum devices are turned off. There are many reasons, includ-\ning that the launch vehicle typically prohibits spacecraft actuators from operating\nuntil after separation. Also, many rotors are tied down to manage launch loads.\nThose tiedowns are released only after spacecraft separation. Thus, the momentum\ndevices have zero gimbal and rotor speed, i.e., zero momentum at the beginning\nof mission operations. Specific procedures prevent the spacecraft from tumbling\nduring on-orbit checkout and spin-up of the RWA or SGCMG. These procedures\n\n\n\n5.15 Zero-Momentum Spin Up 129\n\nspin up CMG rotors to maximum momentum capacity within power constraints\nwhile staying at zero momentum and keeping the array far from singularities.\nThese requirements demand that zero-momentum spin up is performed in the null\nspace of the momentum control system. There may be an infinite continuum of\nspin-up profiles that can be used to spin up the momentum control systems while\nkeeping the array at zero momentum. Also, the generally low-torque rotor spin\nmotors and power limitations within the momentum device mean that a spin-up\nmaneuver in reality can take many hours. For example, the ISS CMGs spin up at\napproximately 17 rpm per minute, requiring about 6.5 h to reach their full speed\nof 6,600 rpm. In addition, uncertainties in actuator parameters such as alignments,\ngimbal and rotor inertias, and friction may impact spacecraft attitude during spinup.\nKim et al. [20] addressed these parametric uncertainties and provided an asymptotic\nresult to de-tumbling and zero-momentum spin up after launch tip-off of a four\nCMG pyramid array in their presence.\n\n5.15.1 RWA Zero-Momentum Spin-Up\n\nRWAs do not typically spin up to full speed during on-orbit checkout. Unlike\nSGCMGs, they have the ability to spin down to lower speeds, where viscous friction\neffects are less and therefore quiescent power is lower (see Chap. 3). Nevertheless,\nsome RWAs may normally operate at a speed well away from zero in order to\navoid imprecise torque that occurs at zero speed. For such RWAs, the initial spin-up\nmaneuver is quite straightforward. They do not contain an extra degree of freedom\nin the gimbals, and RWA arrays involve no singular configurations as long as the\narray contains at least three independent RWA rotor axes. At least four RWAs are\nrequired if a RWA array is to be spun up in the null space to a set of speeds that\nminimizes zero crossings. Such a spin-up maneuver is typically quick: on the scale\nof minutes because the bias speeds of the rotors are usually a small fraction of full\nspeed.\n\n5.15.2 Four-CMG Roof Zero-Momentum Spin-Up\n\nThe strategy employed for spinning up the CMGs in a roof array involves biasing\nthe momentum of one pane of the roof against the other along the axis they share.\nThis allows both panes of the roof to be well separated from their 0h singularity at\nthe origin. This singularity is discussed in Sect. 7.4.3.4, and illustrated in Fig. 7.8.\nIf the four CMGs do not spin up with equal torque, whether due to spin motor\ntolerances or power-saving measures, the gimbal angles are adjusted as necessary to\nkeep the net momentum from each pane of the roof equal in magnitude and opposite\nin direction.\n\n\n\n130 5 Singularities of Control Moment Gyroscopes\n\nFig. 5.21 Non-singular\nzero-momentum\nconfigurations for a four\nCMG pyramid array\n\n5.15.3 Four CMG Pyramid Zero-Momentum Spin-Up\n\nThere are two popular, mirror-image configurations for the four CMG pyramid that\ncan be used for zero momentum and are far from singularity. These configurations\nplace all of the angular momentum vectors in a plane (torque vectors not coplanar)\nas shown in Fig. 5.21. It is possible that the power needed to spin up all four\nCMGs simultaneously while maintaining zero momentum is infeasible. Therefore,\nthe CMG rotors can spin up at least two at a time, with the anti-parallel spin axes, so\nas to minimize attitude perturbations and achieve the maneuver in a timely manner.\n\n5.16 Chapter Summary\n\nThis chapter discusses one of the major issues inherent in control moment\ngyroscopes, known as singularities. What may appear as a purely mathematical\nphenomenon in the literature turns out to have important physical consequences for\nspacecraft design. Classifying singularities helps identify options for attitude-\ncontrol architectures, such as the choice of arrays that lend themselves to\nsingularity avoidance. The thorough understanding that these classifications make\npossible may help new momentum-control systems evolve more successfully into\nviable technology. This systems-engineering activity can benefit from creating\nvisualizations of the singular surfaces in angular-momentum space. They help\nestablish a common vocabulary for communicating the risks and opportunities\nthat momentum systems offer. Balancing the optimistic enthusiasm of rigorously\nmathematical academic literature with the practical implications of dealing with\nsingularities can provide insight that is sometimes lacking in new space-system\nconcepts.\n\nReferences\n\n1. D. Bernstein, Matrix Mathematics: Theory, Facts, and Formulas (Princeton University Press,\nPrinceton, 2009)\n\n2. C. Meyer, Matrix Analysis and Applied Linear Algebra (SIAM, Philadelphia, 2000)\n\n\n\nReferences 131\n\n3. J. Stuelpnagel, On the parametrization of the three-dimensional rotation group. SIAM Rev.\n6(4), 422 (1964)\n\n4. M. Shuster, A survey of attitude representations. Navigation 8(9), 439\u2013517 (1993)\n5. N. Bedrossian, Classification of singular configurations for redundant manipulators, in 1990\n\nIEEE International Conference on Robotics and Automation, 1990. Proceedings. (IEEE, 1990),\npp. 818\u2013823\n\n6. M. Meffe, G. Stocking, Momentum envelope topology of single-gimbal cmg arrays for space\nvehicle control, in Guidance and Control 1987, vol. 1, 1987, pp. 19\u201332\n\n7. H. Kurokawa, A geometric study of single gimbal control moment gyros (singularity problems\nand steering law). Technical Report 175, Agency of Industrial Technology and Science, Japan,\n1998\n\n8. G. Margulies, J. Aubrun, Geometric theory of single-gimbal control moment gyro systems.\nAAS J. Astronaut. Sci. 26(2), 159 (1978)\n\n9. E. Tokar, V. Platonov, Singular surfaces in unsupported gyrodyne systems. Cosm. Res. 16, 547\n(1979)\n\n10. N.S. Bedrossian, J. Paradiso, E.V. Bergmann, D. Rowell, Redundant single gimbal control\nmoment gyroscope singularity analysis. AIAA J. Guid. Control. Dyn. 13(6), 1096 (1990)\n\n11. B. Wie, Singularity analysis and visualization for single-gimbal control moment gyro systems.\nAIAA J. Guid. Control. Dyn. 27(2), 271 (2004)\n\n12. T. Yoshikawa, Dynamic manipulability of robot manipulators, in 1985 IEEE International\nConference on Robotics and Automation. Proceedings. , vol. 2 (IEEE, 1985), pp. 1033\u20131038\n\n13. N. Bedrossian, Steering law design for redundant single gimbal control moment gyroscpoes.\nMaster\u2019s Thesis, MIT, 1987\n\n14. K. Yamada, I. Jikuya, Directional passability and quadratic steering logic for pyramid-type\nsingle gimbal control moment gyros. Elsevier Acta Astronaut. 102, 103 (2014)\n\n15. H. Yoon, P. Tsiotras, Singularity analysis of variable-speed control moment gyros. AIAA J.\nGuid. Control. Dyn. 27(3), 374 (2004)\n\n16. G. Leve, F. Boyarko, N. Fitz-Coy, Optimization in choosing gimbal axis orientations of\noptimization in choosing gimbal axis orientations of a cmg attitude control system, in AIAA\nInfotech@Aerospace Conference, Seattle, WA, 6\u201310 April 2009)\n\n17. T. Sands, J. Kim, B. Agrawal, 2h singularity-free momentum generation with non-redundant\nsingle gimbaled control moment gyroscopes, in 45th IEEE Conference on Decision and\nControl, 2006, pp. 1551\u20131556\n\n18. J. Dominguez, B. Wie, Computation and visualization of control moment gyroscope singular-\nities, in AIAA Guidance, Navigation, and Control Conference and Exhibit, 2002\n\n19. H. Schaub, J. Junkins, Singularity avoidance using null motion and variable-speed control\nmoment gyros. J. Guid. Control. Dyn. 23(1), 11 (2000)\n\n20. D. Kim, F. Leve, N. Fitz-Coy, W. Dixon, New startup method using internal momentum\nmanagement of variable-speed control moment gyroscopes. AIAA J. Guid. Control. Dyn.\n35(5), 1472 (2012)\n\n\n\nChapter 6\nMomentum-Control System Array Architectures\n\nThis chapter provides the analysis tools and fundamental theory for the design\nof an array architecture consisting of momentum devices. First, the properties of\nthe actuator alignments and their effect on shaping the performance envelope of\nthe momentum-control system are discussed. A survey of common array types for\nRWA, CMG, and mixed arrays follows. A discussion of performance metrics and\nmethods used to optimize the array architecture concludes the chapter.\n\n6.1 The Nature of Momentum Devices\n\nThrusters apply external forces to a spacecraft at a point where the thruster expels\npropellant. The combination of the thruster force vector and position relative to\nthe center of mass results in an external torque on the spacecraft. Like thrusters,\nthe performance envelope for an array of momentum devices depends explicitly on\ntheir alignment with respect to the spacecraft body. However, unlike thrusters, the\nlocation of momentum devices with respect to the spacecraft\u2019s center of mass is\nunrelated to its ability to influence the attitude. This is entirely due to rigid-body\ndynamics: all points on a rigid body experience the same angular velocity and\nangular acceleration. So, a torque applied to the rigid body accelerates all of its\ninertia in the same way, regardless of what mechanical means applies that torque.\nThis must be the case\u2014otherwise, the body would twist and warp in a non-rigid\nfashion. The fact that momentum devices apply torque, not force, to the spacecraft\nallows them to be placed anywhere on the body.\n\nMomentum devices impart internal torque, which conserves angular momentum\nof the combined spacecraft and momentum-control system. The torque is transferred\nthrough the structure of the actuator to the spacecraft body. Along with mechanical\ndesign considerations (e.g., bearing and motor choices, rotor shapes and size),\nactuator alignment for an array of momentum devices is critical to system-level\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_6\n\n133\n\n\n\n134 6 Momentum-Control System Array Architectures\n\nperformance. The following sections describe best practices in choosing alignments\nfor momentum-control actuators in their array. Sources of these requirements are\ndescribed in Chap. 3, and the dynamics of these actuators is discussed in Chap. 4.\n\n6.2 Momentum and Torque Capability of an Array of RWAs\n\nThe momentum and torque capability of an array of RWAs depends on the actuators\u2019\nalignment with respect to the spacecraft body as well as the rate and acceleration\nlimits of the rotors. It is customary to assume that the RWAs in an array are identical;\ntherefore, the rate and acceleration limits are uniform across all RWAs in the array.\nThis assumption provides a straightforward means to visualize the performance\ncapability of the array. Consider an array of three orthogonal RWAs. The momentum\nand torque envelopes for this array are box-shaped. For the momentum capacity, the\nsides of this box are of length 2hmax, which results from the positive and negative\nmomentum limits for each of the three wheels. For torque, the sides are of length\n2?max. Therefore, the maximum angular momentum and torque for this array lies\n\nalong the direction h D\np\n3\n3\n\u01521 1 1\tT, with a maximum momentum of\n\np\n3hmax and\n\ntorque of\np\n3?max along one of the vertices, as shown in Fig. 6.1. For a general array\n\nof three RWAs, not necessarily mutually orthogonal, the torque and momentum\nenvelopes are parallelepipeds.\n\nOne of the two commonly implemented RWA arrays, an early favorite at NASA,\nis the three-orthogonal and one-skew (ortho-skew) RWA array shown in Fig. 6.2.\nIn this array, the skew RWA can be used in one of two ways. First, it can act as a\ndormant spare which, because it has components in all three axes, can allow three-\naxis control to be retained in the event that any other single RWA fails. Second, it can\nbe used to as part of a four RWA array. The simultaneous use of all four introduces\na degree of freedom of null space, which allows operations such as avoiding zero\nwheel speeds (where friction can be troublesome), as discussed in Chap. 3.\n\nFig. 6.1 Angular momentum\nenvelope for a\nthree-ortho-skew RWA array\n\n\n\n6.3 Momentum and Torque Capability of an Array of CMGs 135\n\nFig. 6.2 Ortho-skew RWA\narray\n\nFig. 6.3 Four-RWA pyramid\narray\n\nThis array of RWAs has one disadvantage. If any wheel other than the skew rotor\nfails, the resulting torque authority will be unequal among the three axes, with very\nlittle capability in the direction of the lost RWA.\n\nThe other common use of four RWAs is the four-pyramid array shown in Fig. 6.3.\nIn this array, any single RWA failure leads to the same sort of angular momentum\nand torque envelope. This array still does not have equal control authority about\nevery axis following a failure, but the capability is far better in any axis than the\northo-skew array, no matter which actuator fails. Markley et al. [1] offers more\ninsight into optimizing momentum via the choice of an RWA array.\n\n6.3 Momentum and Torque Capability of an Array of CMGs\n\nUnlike an RWA, a CMG typically has constant-magnitude rotor angular momentum.\nThe maximum angular momentum, or performance envelope, of CMG arrays\nconsists of a surface where all points correspond to a singular Jacobian (see Chap. 5).\n\n\n\n136 6 Momentum-Control System Array Architectures\n\nThe envelope for an array of SGCMGs is determined by the alignment of all\nCMG gimbal axes. The locus of all possible angular momentum states of any single\nSGCMG is a circle (but not the points inside, i.e., not a disc) in the plane normal to\nits gimbal axis. The combination of these one-dimensional loci comprises the range\nof possible configurations. Therefore, a minimum of three SGCMGs is required for\nlinear, three-axis attitude control.\n\nThe locus of angular momentum states of a single DGCMG is a sphere (but\nnot the points inside, i.e., not a ball). Therefore, a minimum of two DGCMGs\nis required for full three-axis control, representing four independent degrees of\nfreedom. The single redundant degree of freedom may be used for optimization\nor failure tolerance.\n\n6.4 Double-Gimbal CMG Arrays\n\nDGCMGs were used on the first US space station, known as Skylab.\n\nSkylab was the first manned spacecraft to utilize large CMGs for momentum storage and\nattitude control, the first to utilize vehicle maneuvers for CMG momentum desaturation,\nthe first to utilize a fully digital control system with in-orbit reprogramming capability and\nextensive automatic redundancy management, and the first to utilize an attitude reference\nsystem based on a four-parameter strapdown computation which allowed utilization of an\nall-attitude eigenaxis maneuvering scheme [2].\n\nSkylab flew three orthogonal DGCMGs, shown in Fig. 6.4, with a momentum\ncapability of approximately 3000 Nm-s (2200 ft-lb-s). Two modes of CMG control\nexisted, two- and three-CMG control. After the initial sizing of the CMG momen-\ntum, the vehicle moments of inertia increased tenfold. Consequently, the two CMG\ncontrol mode became hopelessly ineffectual, unable to handle the secular torques\nand maneuvers in addition to the cyclic torques. On the ninth day into the third\nmanned mission, CMG no. 1 showed evidence of failure, and the mode was changed\nto two-CMG control. After the failure of CMG no. 1, CMG no. 2 began to show\nsigns of distress as well, and the CMG control allocation and maneuver choice for\nSkylab was altered to prolong the life of CMG no. 2 until the end of the mission.\n\nThe International Space Station also uses DGCMGs. These CMGs were built by\nBendix Corp, now part of L3 Space and Navigation. Each provides 4760 Nms of\nangular momentum with stainless-steel rotors that spin at 6600 rpm. The four-CMG\narray can store about 19,000 Nms in any direction. With two attitude-control degrees\nof freedom available each DGCMG, at least two CMGs are necessary to provide\nattitude control for the ISS. NASA\u2019s ISS program has six such CMGs: four on ISS\nand two spares. One of the spares replaced a CMG failed in June 2002. Another\nCMG was shut down because of high vibrations, suggesting bearing failure. So,\ncurrently three are operating on ISS.\n\nWhile there are points in a DGCMG momentum envelope where higher gimbal\nrates are required for a certain torque to be achieved, a DGCMG array is not used for\nhigh torque. Its advantage over SGCMG arrays is its ability to distribute momentum\n\n\n\n6.5 Single-Gimbal CMG Arrays 137\n\nZy\n\nOUTER GIMBAL\nTOROUER\n\nZ CMG\nMOUNTING PLANE OUTER GIMBAL\n\nTOROUER\n\nOUTER\nGIMBAL\n\nTOROUER\n\nYv\n\nY CMG MOUNTING PLANE\n\nX CMG MOUNTING PLANE\n\n?1(3)\n\n?3(1)\n\n?1(1)\n\n?3(2)\n\n?1(2)\n\n?3(3)\n\nFig. 6.4 Skylab\u2019s array of three orthogonal DGCMGs (Image Courtesy of NASA)\n\nefficiently in any direction. This distribution is achieved at low gimbal rates, with\nattention paid to avoiding gimbal lock on any single CMG. This steering is a form of\nsingularity-avoidance, but the challenges for DGCMGs in this regard are generally\nless demanding than in the case of SGCMGs.\n\n6.5 Single-Gimbal CMG Arrays\n\nThis section discusses typical arrays of multiple CMGs and heterogeneous arrays of\nCMGs and RWAs.\n\n\n\n138 6 Momentum-Control System Array Architectures\n\nFig. 6.5 A scissored pair of\nCMGs\n\nY\n\nX\n\nHnet\nh1h2\n\nd d\n\n6.5.1 Scissored Pairs of CMGs\n\nPerhaps the most intuitive array of CMGs for three-axis attitude control is an array of\nthree orthogonal scissored pairs (Carpenter and Peck [3]). A scissored pair consists\nof two CMGs with parallel gimbal axes and a linear constraint that keeps the gimbal\nangles equal in magnitude. Without this constraint, these two CMGs could produce\nmomentum anywhere within a disc of radius 2h. However, for the scissored pair,\nthe two gimbals are moved in such a way that the locus of net momentum forms a\nline. This configuration is illustrated in Fig. 6.5, in which the gimbal axes are out\nof the page. Since both CMGs sweep through the same angle, ?, at all times, the\nnet momentum along the X-axis in the figure is always zero. The net momentum\nalong Y is 2hr sin.?/. The torque produced about the Y axis for a gimbal rate, P?, is\n2 P?hr cos.?/.\n\nThis constraint is, perhaps, the simplest form of steering law. It is so simple\nthat it can be imposed by a gear train or mechanical linkage in place of algorithms\ninvolving feedback control. The 1970s era Astronaut Maneuvering Unit, which\nincorporated three scissored pairs, adopted this mechanical solution. Mathemati-\ncally, the constraint requires gimbal rates of ?=.2h cos.?// in opposite directions\nto produce output torque ? . A single scissored pair offers full access to every\nmomentum state on the line and encounters no singularities (aside from, of course,\nsaturation at 2h). Without the constraint, a singularity exists at the origin of the disc,\ncomplicating the steering of even these two simple devices.\n\nUsing a mechanical linkage to impose the constraint is of particular value in\nthe presence of base motion. For example, consider the case in which the array of\nFig. 6.5 is nearly saturated (? is near 90?), and the base to which the CMGs are\nmounted is instantaneously rotating about the X axis. Gyroscopic precession tries to\nrotate both gimbals in the same direction. If the gimbals are controlled separately,\neach gimbal motor would have to dissipate power to oppose this motion. However,\nif a mechanism forces the gimbals to rotate only in opposite directions, this\nmechanism maintains the constraint without mechanical work or power dissipation.\n\nBecause of their inherent simplicity, scissored pairs have been used in many\napplications such as robotic manipulators, astronaut maneuvering, and automobiles\n(Carpenter and Peck [3], Cunningham and Driskill [4], and Litmotors [5]). In one\nexample, a scissored pair is aligned to produce roll torque to stabilize a ship at sea.\n\n\n\n6.5 Single-Gimbal CMG Arrays 139\n\nBecause only one axis of torque is required, this application does not carry any\npenalty from the absence of transverse momentum that the constraint imposes.\n\nThis simplicity extends to the general case of three-axis attitude control. A set\nof three orthogonal scissored pairs of CMG has a maximum angular momentum\nenvelope similar to that of the RWA array in Fig. 6.1 except that the sides of the\ncube-shaped envelope have length 4h. However, the ease and simplicity of use of\nthree orthogonal sets of scissor pairs comes with a cost: the spacecraft must operate\nsix CMGs at all times for a ? 2h cube of angular momentum. A single failed CMG\nhalves the capability in one axis and couples some transverse torques into the others,\nfurther reducing the capability in those directions. Therefore, if this array of CMGs\nis used, the satellite designer has chosen to trade complex steering algorithms for\nadditional volume, mass, and power.\n\n6.5.2 Collinear (Multiple-Type) Arrays\n\nScissored pairs are only one of a family of array types characterized by the use\nof two or more CMGs with common gimbal axes. The most popular of these\nso-called collinear arrays in the literature are the roof arrays. These arrays have\ntwo common gimbal-axis directions. The angular momentum and torque for CMGs\nwith a common gimbal axis reside in a plane (\u201croof side\u201d) shown as blue surfaces\nin Fig. 6.6 for the six-CMG and four-CMG roof arrays. Roof arrays are also known\nas \u201cmultiple-type\u201d arrays in the literature (Kurokawa [6]). An older term for the\ntwo-triplet architecture shown in the figure is \u201csingle-gimbal double-trident,\u201d which\ndates from 1980 or earlier (Rodden [7]).\n\nBecause roof arrays have only two planes of angular momentum and torque,\nthey may experience rank-1 singularities. At a rank-1 singularity, torque is available\nin only a single direction. Nevertheless, roof arrays of four or more CMGs are\n\nFig. 6.6 Six-CMG roof array (left) and four-CMG roof array (right)\n\n\n\n140 6 Momentum-Control System Array Architectures\n\npreferred over other CMG array architectures such as skew, pyramid, or symmetric\ntype arrays because they have no elliptic internal singularities (see Chap. 5) and\nTokar and Platonov [8]. Therefore, all roof arrays can provide a non-singular\ngimbal-angle solution at every point of angular momentum internal to the momen-\ntum envelope. This feature enables roof-array steering laws to achieve non-singular\nangular momentum close to the edges of the envelope. However, the fact that the\ninternal singularities are hyperbolic does not guarantee that null motion is sufficient\nto pass a singularity for all combinations of gimbal angles. The null-space motion\nmay have to be preplanned so that certain gimbal-angle combinations are avoided.\nFor such cases, gradient methods are ineffective (Kurokawa [9]).\n\nAt this juncture, we digress briefly to introduce the subject of characterizing\nand plotting singular surfaces. Chapter 5 discussed singularities in detail and\nconstruction of singular surfaces, but here we introduce a common convention for\ndescribing the various singular structures and how to visualize them.\n\nIn general, arrays of CMGs are intended to provide momentum in a three-\ndimensional envelope. Because the direction of output torque from a SGCMG varies\nwith gimbal angle, sets of gimbal angles may exist for which torque is not possible\nin all three axes. When this occurs, the array is said to be singular. Consider the\nfour-CMG roof array of Fig. 6.6. With the gimbals positioned as shown, all spin\naxes, i.e., momentum vectors are parallel with the peak of the roof, which we call\nthe shared axis. A small change to any gimbal angle in the array produces dH=dt\nin a direction orthogonal to the shared axis, and there is no small change of gimbal\nangles that can produce a dH=dt, i.e., a torque along the shared axis. Thus this set\nof gimbal angles is singular.\n\nOnce a set of gimbal angles like this is encountered, rotating any CMG gimbal\nangle 180? also results in a singular state. This gives rise to a convention for\ndescribing which of these singular states is present. In Fig. 6.7, if all four of the\nmomentum vectors were not necessarily parallel, but pointing in the same direction,\nwe would refer to this as a 4h singularity. For an n-CMG array, the nh singularities\nwill always be on the saturation surface of the array. Next, if one of the CMGs was\npointed oppositely from the other three, this would be referred to as a 2h singularity.\nThe names derive from the \u201cnet\u201d momentum in a simple configuration like this, but\n\n4h\n\n3h 3h1h 1h\n\n4h2h 2h0h\n\nFig. 6.7 Singularity designations\n\n\n\n6.5 Single-Gimbal CMG Arrays 141\n\nthe reader is cautioned that the \u201cnh\u201d singular surfaces do not always have momentum\nmagnitude of nh. Finally, if two CMGs point opposite the other two, the condition is\nknown as a 0h singularity. These combinations are illustrated in Fig. 6.7. In general,\nwe can determine this designation by projecting the momentum vectors onto the\nsingular direction and examining their sign.\n\nIt follows from this definition that an array with an even number of CMGs can\nhave 0h, 2h, . . . , nh singularities, and an array with an odd number can have 1h,\n3h, . . . , nh singularities (see Table 5.1 for locations of singularities for arrays with\ntypical numbers of CMGs). All the array momentum states corresponding to all of\nthe singular gimbal sets are referred to as the singular surface or the set of singular\nsurfaces. Examination of these surfaces can be useful in understanding the nature of\nsingularities for a given array architecture.\n\nThe singular surfaces for the four-CMG and six-CMG roof arrays are shown\nin Figs. 6.8 and 6.9. Blue and cyan indicates internal singular surfaces, which\nfor roof arrays of six or more CMGs are globally passable by null motion at all\nsingularity points within the angular momentum envelope. Recall from Sect. 5.10,\nthat passability is a local property; despite that null motion may be unable to escape\na singularity associated with a specific set of gimbal angles instantaneously, such\nsolutions may still be reached in finite time. In orange and red, the outer surfaces\nrepresent the external or saturation singular surfaces that are never passable through\nnull motion, regardless of how much gimbal-angle motion occurs.\n\nIn general, these 0h, 2h, . . . , nh surfaces, when plotted together, form a con-\ntinuous connection between all possible singular momentum states. It is important\nto recognize, however, that points on the internal surfaces are shown in terms of\nthree-dimensional angular momentum, not n-dimensional gimbal angles. So, such a\n\nFig. 6.8 Four-CMG\nroof-array singular surfaces\n\n\n\n142 6 Momentum-Control System Array Architectures\n\nFig. 6.9 Six-CMG\nroof-array singular surfaces\n\nFig. 6.10 Box-90 CMG\narray\n\npoint is not necessarily singular: it may be that some gimbal-angle sets are singular\nfor that momentum, and some are not. Many of these points can be reached by\ncombinations of gimbal angles that keep the array well conditioned. Choosing these\ncombinations is the central challenge of steering algorithms that enable spacecraft\nto utilize an array effectively.\n\nAn example of the four-CMG roof array that has a 90? angle between the two\nsets of gimbal axes is also known as the box-90 array. The box-90 array is shown in\nFig. 6.10.\n\n\n\n6.5 Single-Gimbal CMG Arrays 143\n\nFig. 6.11 3/4-CMG box\narray singular surfaces\n\n6.5.3 3/4 (3 of 4) Box Array\n\nWhenever a single CMG fails in a box-90 array, the consequence is the 3/4 box\narray. Therefore, in the likely case that fault tolerance is required, the performance\nrequirements must be met by a 3/4 box. Consequently, during typical operations,\nonly three CMG out of four are active, with a dormant spare. The singular surfaces\nfor the 3/4-CMG box array are shown in Fig. 6.11.\n\nIn Fig. 6.11, there are no singularities within a 1h sphere about zero angular\nmomentum (Sands et al. [10]). The use of this 1h singularity-free sphere is one\nof the reasons this array is one of the first to have been used and has been the\narray of choice for many spacecraft. With three CMGs, there is no way of avoiding\nsingularities through null motion because there is no null space (see Chap. 5).\nTherefore, any spacecraft-level performance requirements must be met within the\nsingularity-free region of the momentum envelope.\n\n6.5.4 Pyramid Arrays\n\nPerhaps the most commonly discussed array architecture is the pyramid array. It\nfrequently appears in the academic literature. It is also one of the most complex. The\nfour-CMG pyramid array shown in Fig. 6.12 has independent gimbal axes, unlike\n\n\n\n144 6 Momentum-Control System Array Architectures\n\nFig. 6.12 Four-CMG pyramid array\n\ncollinear roof arrays. The figure shows that pyramid arrays of four or more CMGs\nnever have a rank-1 singularity.\n\nA four-CMG pyramid array at a skew angle, i.e., angle from horizontal to angular\nmomentum plane of 54.74? produces a somewhat spherical three-axis symmetric\nangular momentum envelope. The envelope is indicated in orange and red, with\ninternal singular surfaces in cyan and blue, in Fig. 6.13. The internal singular\nsurfaces are smoothly connected to the angular momentum envelope. They contain\ntrumpet-like funnels or tubes in which no angular momentum is available. These\ntube structures are smoothly connected to the angular momentum envelope through\nsurfaces that resemble lily pads (orange). The circular outer edge of each lily pad is\nformed by sweeping the momentum vector of the CMG whose gimbal axis passes\nthrough it (Yoon and Tsiotras [11]). We recall that a SGCMG cannot access the\npoints inside this circular locus.\n\nThis somewhat spherical momentum envelope provides roughly equal control\nauthority in angular momentum and torque about any axis and provides a large\nvolume of accessible momentum. Perhaps this uniformity in angular momentum\nand torque is the reason the four-CMG pyramid array initially became an object\nof academic study. The nature of academic publication encouraged many follow-\non studies of this particular architecture. However, from a practical perspective, the\nangular jerk, acceleration, and velocity are of primary importance for many agile\nspacecraft, not this uniform distribution of momentum and torque. These agility\nmetrics are calculated by inverting the spacecraft inertia onto the control authority\n(see Chap. 3). Therefore, equal momentum and torque about three axes does not\ncorrespond to equal agility about these axes. Moreover, many Earth-observing\nspacecraft, for example, those that perform push-broom imaging (sweeping the\nimager back and forth through small angles throughout the orbit). Such satellites\n\n\n\n6.5 Single-Gimbal CMG Arrays 145\n\nFig. 6.13 Four-CMG\npyramid array singular\nsurfaces\n\nrequire high torque and momentum about one or two axes, with less capability\nneeded about the boresight axis of the imaging payload. An example of an\napplication that takes advantage of agility in the third degree of freedom is described\nby Karpenko et al. [12] and Ross et al. [13]. They seek optimal slew trajectories that\ncan exploit the reduced inertia axis to reduce overall slew time when compared with\nan eigenaxis slew.\n\nThe uniformity of the angular momentum envelope comes at a cost: the very\ncomplex internal singular surfaces shown in Fig. 6.13, which contain both passable\nnon-degenerate hyperbolic singularities and impassable elliptic singularities. Recall\nfrom Chap. 5, in the case of impassable elliptic singularities, no null motion exists\nfor singularity avoidance; therefore, passing through points of angular momentum\nnear an elliptic singularity sacrifices accuracy in torque for attitude control. Also,\nunlike collinear arrays, the internal singular surfaces for a pyramid array are\nscattered throughout the angular momentum envelope. Therefore, the pyramid array\nhas a smaller non-singular (or singular-but-passable) angular momentum envelope\nto offer the attitude control system.\n\n6.5.5 Dynamic Arrays\n\nSome have proposed making the gimbals of a CMG dynamic , in the sense that\nreorienting them can change the angular momentum envelope and corresponding\nsingular surfaces during operations. Kojima [14] suggests frequent reconfiguration\n\n\n\n146 6 Momentum-Control System Array Architectures\n\nas a singularity-avoidance approach. However, approaches that involve frequent\nreconfiguration during maneuvers ignore the influence of additional torque during\nreconfiguration. Essentially, such methods make the array of CMGs act as a semi-\nstatic DGCMG array and therefore come with a similar increase in volume, mass,\npower, and mechanical complexity as well as the loss in performance (see Chap. 3).\nThis disadvantage can be overcome in the case where the CMG gimbals can be\nreconfigured with the CMG despun, and the new configuration locked into place\nwith a mechanical constraint, as suggested by Bonn et al. [15], where it is a response\nto failures or infrequent changes in mission requirements.\n\n6.6 Blended Arrays and Other Designs\n\nThe early days of CMG technology saw efforts to create heterogeneous arrays of\nmomentum devices, or \u201cblended arrays\u201d. These arrays combine reaction wheels of\nvarious sizes, single- and double-gimbal CMGs, and some less-familiar devices.\nNone have caught on, the most likely reason being that parts count, reliability, and\nrelated cost penalties motivate arrays of identical devices. Nevertheless, these early\ninnovations deserve some recognition. And there still may come a day when one of\nthem proves useful in a spacecraft architecture.\n\n6.6.1 Double-Gimbal/Single-Gimbal Scissored Pairs\n\nA pair of DGCMGs provides four independent control degrees of freedom, one\nfor each gimbal axis. This number is sufficient for three-axis control of attitude,\nwithin the limits imposed by gimbal-lock singularities. In fact, it is more than\nenough (by one), but certain failures of one of the DGCMG\u2019s components prevents\nthe entire array from serving the needs of a three-axis attitude-control system.\nAdding a scissored pair as shown in Fig. 6.14 adds a degree of freedom\u2014only one,\nbecause the gimbal-angle constraint subtracts one from what would otherwise be\ntwo independent SGCMGs. The result is an array that is single-fault tolerant, any\nsingle CMG failure leading to a momentum system capable of providing torque\nin three axes, again within the limits imposed by singularities. The steering law is\nstraightforward, but this momentum system is considered to have high weight and\nvolume for its performance (Rodden [7]). It is also suited primarily to a system with\nsingle-axis agility, since the scissored pair might apply torque along its axis that is\nhundreds of times as much as torque from one of the DGCMGs in the transverse\naxes.\n\n\n\n6.6 Blended Arrays and Other Designs 147\n\nFig. 6.14 Two DGCMGs\nand one scissored pair of\nSGCMGs\n\nFig. 6.15 Three DGCMGs\nuniformly distributed in a\nplane\n\n6.6.2 Langley \u201cSix-Pac\u201d\n\nA combination of three DGCMGs provides similar failure tolerance. This architec-\nture has been referred to as the \u201cLangley Six-Pac\u201d see Rodden [7], in the specific\ncase where the momentum vectors for zero gimbal angle lie in a plane and are\nseparated by 120?, as shown in Fig. 6.15. A failure of any DGCMG results in an\narray with four remaining degrees of freedom, but the complex control law and high\nweight and volume has made it an unpopular choice.\n\n\n\n148 6 Momentum-Control System Array Architectures\n\nFig. 6.16 Six GAMS pyramid array\n\nFig. 6.17 Six-CMG pyramid\narray singular surfaces\n\n6.6.3 Single-Gimbal Six GAMS (Six-CMG Pyramid Array)\n\nSix SGCMGs can be arranged so that each CMG momentum vector sweeps out a\nplane that forms one of the faces of a six-faceted pyramid. This so-called gimbaled-\naxis momentum system (GAMS) is known as the six-GAMS shown in Fig. 6.16, as\ndescribed by Cornick [16] and Rodden [7]. Like any six-CMG array, this one offers\nactive, multiple redundancy but represents lower weight and volume than DGCMG\narrays for a given torque requirement.\n\nThe singular surfaces of the six-CMG pyramid array in Fig. 6.17 differ from\nthe four-CMG pyramid array Fig. 6.13. The addition of two CMGs provides a\n\n\n\n6.7 Variable-Speed CMG Arrays 149\n\nmore nearly spherical momentum envelope, with a significantly larger momentum\ncapacity at the expense of a more complex set of internal singular surfaces. These\ninternal singular surfaces appear throughout the volume of the momentum envelope\nand also have more lily pads that connect internal structures to the edges of the\nenvelope. Therefore, unlike the six-CMG roof array, the six-pyramid\u2019s increased\nmomentum capacity and spherical symmetry alone does not eliminate geometric\nsingularities. Nevertheless, Cornick describes this array as one in which an internal\nenvelope can be exploited through an appropriate steering law.\n\n6.6.4 Scissored Pair with High-Torque Reaction Wheels\n\nA single scissored pair of variable-speed control-moment gyroscopes (VSCMGs)\nrepresents a three degree-of-freedom system with minimal hardware. Such an array\nmay be suitable for applications in which single-axis agility is required, with limited\ncontrol authority in the transverse directions. Such a design suggests severe volume\nconstraints. In such circumstances, further simplifications may be motivated. For\nexample, the gimbal angle might be limited to a finite range, eliminating the need\nfor continuous rotation and thereby saving the mass and complexity of slip rings\nand related electronics.\n\nLimiting the gimbal angle can be based on some straightforward sizing princi-\nples, as suggested in the following example. High-torque reaction wheels (such as\nGoodrich\u2019s TorqWheel) can provide about 2 Nm of torque about their spin axes.\nWith 16.6 Nms of angular momentum and a 1 rad/s gimbal rate, this array can\nproduce about 1/10 the torque in the transverse axes as it can along the spin axis,\nup to a gimbal angle of about 45?. The momentum and torque performance of this\nexample are shown in the Fig. 6.18.\n\n6.7 Variable-Speed CMG Arrays\n\nThe perennial search for new options for SGCMG singularity avoidance motivates\nthe case of an array of VSCMGs. Basically, at the values of angular momentum\nwhere an array of SGCMGs would be singular, the VSCMG relies on rotor accel-\neration as a control DOF to provide the needed torque along the singular direction.\nAs a consequence, an array of two or more VSCMGs with linearly independent\n\n\n\n150 6 Momentum-Control System Array Architectures\n\n0\n0\n\n20 40 60 80 100\n\nGimbal Angle (deg)\n\n35\n\n30\n\n25\n\n20\n\n15\n\n10\n\n5\n\nM\nom\n\nen\ntu\n\nm\n (\n\nN\nm\n\ns)\n a\n\nnd\n M\n\nax\nim\n\num\n T\n\nor\nqu\n\ne \n(N\n\nm\n) Torque at maximum\n\ngimbal rate\n\nTorque matches\nMomentum at 22.06 Nms\n\nM\nax\n\nim\num\n\n g\nim\n\nba\nl a\n\nng\nle\n\nm\nom\n\nen\ntu\n\nm\n\nFig. 6.18 Single-axis torque and momentum performance of a scissored pair with limited gimbal\nangles, for a factor of 10 greater momentum in one axis than in the axes transverse to it\n\ngimbal axes sufficiently far from rotor-speed saturation is non-singular,1 i.e., has\nthe non-singular Jacobian shown in Eq. (6.1).\n\nPh D \u0152A.?;?/ B.?/\t\n? P?\n\nP?\n?\n\nD D PX (6.1)\n\nAs explained in Chap. 4, one of the major disadvantages of RWAs also impacts\nVSCMGs: their ratio of input power to torque is high. They require direct shaft\npower because their torque is proportional to the acceleration of the rotor. A\nfew successful algorithms for minimizing rotor accelerations while avoiding CMG\nsingularities can be found in Yoon [11] and Schaub [17]. Even neglecting the\nhardware and systems-engineering issues, the singularity-avoidance algorithms\nalone dramatically compromise the performance of a VSCMG array.\n\n1The avoidance of SGCMG singularities for an array of two or more VSCMGs with linearly\nindependent gimbal axes assumes that the rotors do not reach their maximum speed or zero. With\nsufficiently many rotors at maximum speed, the array can no longer provide rotor accelerations to\naid in SGCMG singularity avoidance. Similarly, when enough rotors have very little momentum,\nthe gyroscopic torque vanishes, worsening the singularities.\n\n\n\n6.8 Energy Storage 151\n\nThe chief drawback of VSCMGs is that they sacrifice rotor speed to avoid\nsingularities or for power management. Reducing rotor speed reduces torque\namplification, and yet that amplification is the reason for using a CMG in the first\nplace.\n\nThere are several other reasons why VSCMG arrays have not been used in\nattitude control on-board contemporary satellites. Some of these reasons arise from\nsystem-level concerns:\n\n1. The spacecraft\u2019s jitter response varies with frequency. A constant rotor speed\n(as in a SGCMG) may permit the spacecraft to be designed to minimize\nstructural amplification of the rotor-frequency disturbance. In contrast, variable\nrotor speeds make this approach infeasible.\n\n2. Larger rotor motors are needed for rotor accelerations. This mass increases inner-\ngimbal inertia, thereby requiring a larger gimbal motor. The mass, volume, and\npower is therefore increased in such systems.\n\n3. These systems demand more powerful motor electronics because the rotors\nrequire higher-bandwidth speed control than SGCMGs.\n\n4. Singularity avoidance for arrays of SGCMGs is becoming well understood and\nproven on many systems, eliminating the motivation for more exotic solutions.\n\n5. Higher bearing wear and shorter lifetime results from the heat introduced by\nhigher rotor power.\n\nThese many reasons motivate contemporary spacecraft designs to maintain constant\nrotor speeds.\n\n6.8 Energy Storage\n\nAn additional benefit of an array of VSCMGs is its ability to use the flywheels\nin RWA mode to provide not only CMG singularity avoidance, but also electrical\npower. Some of the earliest literature on using flywheels to store energy on space-\ncraft in the form of kinetic energy appeared as far back as the early \u201960s (Roes [18]).\nBatteries alone cannot generally provide large current to their connected loads;\nsome form of capacitance usually complements batteries for this reason. Spacecraft\nthat require very high, instantaneous power\u2014perhaps satellites whose payloads\ninvolve directed energy\u2014may realize mass savings by implementing flywheels\nwhose kinetic energy can be converted to electrical energy (Babuska et al. [19]).\nContemporary technology for flywheel energy storage is roughly competitive with\nsatellite batteries, with power density around 100 W/kg. However, to achieve this\nenergy storage and extraction efficiently, the flywheels typically require very high\nspeeds, along with additional electrical circuitry for the conversion of kinetic energy\ninto electrical energy. Magnetic bearings can reduce frictional losses and extend\nlifetime in the presence of these high speeds for such systems but also consume\nconsiderable power on their own in maintaining a stiff constraint. And they are\nunstable if power to the bearings is lost. Furthermore, high rotor speed comes with\n\n\n\n152 6 Momentum-Control System Array Architectures\n\nFig. 6.19 Honeywell\nFACETS CMG\n\nhigh mechanical stress in the flywheels. Therefore, an array of VSCMGs for energy\nstorage and attitude control would have to trade the additional mass, electronics, and\ncomplexity for these modest power benefits. More traditional power subsystems are\nlikely still the best choice.\n\nNASA and the Air Force Research Laboratory (AFRL) have performed consid-\nerable research and development in the area of integrated power and attitude control\n(IPACS) (Notti et al. [20]). A popular program that looked at the use of flywheel\nenergy storage and energy control is the Flywheel Attitude Control and Energy\nTransmission System (FACETS) formerly at AFRL in Kirtland AFB New Mexico\n(Fausz et al. [21]). In this program, three VSCMG were designed by Honeywell for\nAFRL (see Fig. 6.19) and were tested at AFRL on the ASTREX air-bearing satellite\nsimulator by AFRL, Honeywell, and its contractors.\n\nDuring this study, algorithms were developed to be validated on FACETS and\npublished in the literature (Tsiotras et al. [22] and Yoon and Tsiotras [23]). NASA\ncontinued to study IPACS at their Glenn Research Center (McLallin et al. [24]).\nThe programs were eventually cut, and there has been little applied research in this\narea since.\n\n6.9 Optimization and Arbitrary Array Configurations\n\nIf the spacecraft\u2019s inertia and the statistics of its expected pointing time history are\nknown a priori, then optimizing the CMG array geometry can take advantage of this\nknowledge. Such optimization seeks to increase the amount of non-singular angular\nmomentum, the size or shape of the angular momentum,or some combination of the\ntwo. Examples of optimization for these mission-specific parameters may be found\nin Leve [25] and Sands [10].\n\nA fairly intuitive example of a optimizing the shape of the angular momentum\nenvelope is shown in Figs. 6.20 and 6.21. The objective of this optimization is to\n\n\n\n6.9 Optimization and Arbitrary Array Configurations 153\n\nFig. 6.20 Singular surfaces for a four-CMG pyramid array ? D 54:74? (top) and ? D 30?\n(bottom)\n\nmaximize the angular momentum about two of the three axes, i.e., to make the\nenvelope more oblate. Reducing the CMG array skew angle ? (See Chap. 4) has\nthis effect, providing more angular momentum in the pitch/yaw plane. However,\nFig. 6.20 shows that the internal singularities still appear throughout the angular\nmomentum envelope and are both elliptic and hyperbolic for the four-CMG pyramid\narray. In contrast, the internal singularities for the six-CMG roof array in Fig. 6.21\nare merely hyperbolic, offering the possibility of a non-singular solution for angular\nmomentum value within the envelope.\n\nAs Figs. 6.20 and 6.21 show, the internal singular surfaces for both arrays\ndiffer, and those for the four-CMG pyramid array are spread throughout the entire\nmomentum envelope including passable and impassable singularities. Therefore,\neven when the spacecraft inertia and its jerk, acceleration, and rate requirements are\nnot considered in the optimization process, the location of internal singularities and\ntheir type is of higher importance than the volume of useable angular momentum.\nThis example makes it clear that the shape and size of the angular momentum\nenvelope is not the only driver of CMG array architecture. The architecture must\nalso offer a workable singularity structure.\n\n\n\n154 6 Momentum-Control System Array Architectures\n\nFig. 6.21 Singular surfaces for a four-CMG roof array ? D 45? (top) and ? D 15? (bottom)\n\n6.10 Chapter Summary\n\nThis chapter discussed how the performance of RWA and CMG arrays depend on\nthe momentum devices\u2019 orientation within the spacecraft. Performance envelopes\nwere generated for RWA and CMG arrays in terms of maximum angular momentum\nsurfaces and, for the case of CMG arrays, internal singular surfaces. The geometry\nand the physical significance of these surfaces was discussed. Some common arrays\nused in practice were also introduced. It was shown that although it may seem\nbeneficial to optimize an array of CMG for the shape of the angular momentum\nenvelope, the more important requirements are vehicle rate and acceleration, which\nare driven by vehicle inertia. The types of internal singularities limit the array\nmomentum that can be used to meet these agility requirements.\n\nReferences\n\n1. F. Markley, R. Reynolds, F. Liu, K. Lebsock, Maximum torque and momentum envelopes for\nreaction wheel arrays. AIAA J. Guid. Control. Dyn. 33(5), 1606 (2010)\n\n2. W. Chubb, H. Kennel, C. Rupp, S. Seltzer, Flight performance of skylab attitude and pointing\ncontrol system. AIAA J. Spacecr. Rocket. 12(4), 220 (1975)\n\n\n\nReferences 155\n\n3. M. Carpenter, M. Peck, Reducing base reactions with gyroscopic actuation of space-robotic\nsystems. IEEE Trans. Robot. 25(6), 1262 (2009)\n\n4. D. Cunningham, G. Driskill, A torque balance control moment gyroscope assembly for\nastronaut maneuvering, in NASA. Ames Research Center 6th Aerospace Mechanics Symposium\n(SEE N72-26377 17-15), 1972, pp. 121\u2013126\n\n5. C-1 - Lit Motors, Lit Motors C1 (2013), http://litmotors.com/c1/. Accessed 13 Sept 2015\n6. H. Kurokawa, A geometric study of single gimbal control moment gyros (singularity problems\n\nand steering law). Technical Report 175, Agency of Industrial Technology and Science, Japan,\n1998\n\n7. J. Rodden, Attitude control system lectures. Lecture Notes (1980)\n8. E. Tokar, V. Platonov, Singular surfaces in unsupported gyrodyne systems. Cosm. Res. 16, 547\n\n(1979)\n9. H. Kurokawa, Survey of theory and steering laws of single-gimbal control moment gyros.\n\nAIAA J. Guid. Control. Dyn. 30(5), 1331 (2007)\n10. T. Sands, J. Kim, B. Agrawal, 2h singularity-free momentum generation with non-redundant\n\nsingle gimbaled control moment gyroscopes, in 45th IEEE Conference on Decision and\nControl, 2006, pp. 1551\u20131556\n\n11. H. Yoon, P. Tsiotras, Singularity analysis of variable-speed control moment gyros. AIAA J.\nGuid. Control. Dyn. 27(3), 374 (2004)\n\n12. M. Karpenko, S. Bhatt, N. Bedrossian, I. Ross, Flight implementation of shortest-time\nmaneuvers for imaging satellites. AIAA J. Guid. Control. Dyn. 37(4), 1069 (2014)\n\n13. I. Ross, M. Karpenko, A review of pseudospectral optimal control: from theory to flight. Annu.\nRev. Control. 36(2), 182 (2012)\n\n14. H. Kojima, Singularity analysis and steering control laws for adaptive-skew pyramid-type\ncontrol moment gyros. Elsevier Acta Astronaut. 85, 120 (2013)\n\n15. J.J. Bonn, M.A. Peck. Dynamic cmg array and method. US Patent 7,561,947, 2009\n16. D. Cornick, Singularity avoidance control laws for single gimbal control moment gyros, in\n\nAIAA Guidance, Navigation and Control Conference, 1979\n17. H. Schaub, J. Junkins, CMG singularity avoidance using VSCMG null motion (variable speed\n\ncontrol moment gyroscope), in AIAA/AAS Astrodynamics Specialist Conference and Exhibit,\nBoston, MA, 1998, pp. 213\u2013220\n\n18. J. Roes, Electro-mechanical energy storage system for space application. Prog. Astronaut.\nAeronaut. 3 (1961)\n\n19. V. Babuska, S. Beatty, B. deBlonk, J. Fausz, A review of technology developments in flywheel\nattitude control and energy transmission systems, in Proceedings of the IEEE Aerospace\nConference, vol. 4, 2004\n\n20. J. Notti, A. Cormack, W. Klein, Integrated power/attitude control system (ipacs). AIAA J.\nSpacecr. Rocket. 12(5), 485 (1975)\n\n21. J. Fausz, D. Richie, Flywheel simultaneous attitude control and energy storage using a\nvscmg configuration, in Proceedings of the 2000 IEEE International Conference on Control\nApplications, 2000, pp. 991\u2013995\n\n22. P. Tsiotras, H. Shen, C. Hall, Satellite attitude control and power tracking with\nenergy/momentum wheels. AIAA J. Guid. Control. Dyn. 24(1), 23 (2001)\n\n23. H. Yoon, P. Tsiotras, Singularity analysis and avoidance of variable-speed control moment\ngyros\u2013part ii: power constraint case, in AIAA Guidance, Navigation, and Control Conference,\nProvidence, RI, 2004\n\n24. K.L. McLallin, R.H. Jansen, J. Fausz, R.D. Bauer, Aerospace flywheel technology develop-\nment for ipacs applications. Technical Report TM-2001-211093, NASA, 2001\n\n25. G. Leve, F. Boyarko, N. Fitz-Coy, Optimization in choosing gimbal axis orientations of\noptimization in choosing gimbal axis orientations of a cmg attitude control system, in AIAA\nInfotech@Aerospace Conference, Seattle, WA, 6\u201310 April 2009\n\nhttp://litmotors.com/c1/\n\n\nChapter 7\nSteering Algorithms\n\nThis chapter discusses the methods of CMG torque allocation\u2014techniques for\nfinding CMG gimbal rates to provide a commanded torque. The literature often\nrefers to these allocation techniques as steering algorithms or steering laws, of which\npseudoinverse solutions are the most commonly discussed. The chapter surveys\nmany of the classes of steering algorithms, starting with pseudoinverse methods,\ncontinuing with the more conservative methods based on limited gimbal angles\nand angular momentum, and ending with the less conventional and state-of-the-art\noptimal methods.\n\n7.1 CMG Steering Algorithms\n\nCMG steering algorithms allocate inputs to the actuators (gimbal speed and/or rotor\nacceleration) to provide a commanded torque on the spacecraft. Thruster allocation\nand magnetic torquer allocation are examples of similar problems on spacecraft, in\nwhich the actuators create an external torque on the spacecraft (force and torque\nin the case of thrusters). In contrast, steering algorithms for momentum devices\nwork with limited angular momentum and abide by the constraint of conservation\nof angular momentum. RWA steering is rarely more sophisticated than a simple\npseudoinverse of a constant matrix, the Jacobian discussed in Chap. 4. CMG steering\nis vastly more involved because the Jacobian changes in ways that depend on the\npast usage of the CMGs. It is one of the most challenging aspects of momentum\nsystems and consequently the topic of primary interest in the literature.\n\nA CMG steering algorithm serves as an interface between the attitude com-\npensation and the individual actuators. The attitude-control system calculates a\ntorque needed to accelerate the spacecraft toward a commanded attitude and\nangular velocity. The steering algorithm transforms this torque into individual CMG\ngimbal-rate commands. These commands are sent to the gimbals, which track the\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_7\n\n157\n\n\n\n158 7 Steering Algorithms\n\nSteering\nAlgorithms\n\nSingularity\nAvoidance\nAlgorithms\n\nLG GISL\nConstrained\n\nSteering\nLogics\n\nLinear\nConstraint\nMethods\n\nConstrained\nMomentum\n\nSingularity\nEscape\n\nAlgorithms\n\nSR GSR SDA\n\nSingularity\nAvoidance and\n\nEscape Algorithms\n\nOptimal\nSteering\n\nHSL FSL AMAPS\n\nDPRC\nPseudospectral\n\nOptimal Control\n\nFig. 7.1 Steering algorithms for SGCMGs\n\nrate commands through closed-loop control as discussed in Chap. 8. However, it\nis very rarely the case that the command sent to the gimbals produces exactly\nthe commanded gimbal rate or acceleration. Some reasons include uncertainty in\ngimbal-bearing friction and losses in the gear train, as well as the inherent limits of\nmotors, which cannot respond with arbitrarily high or fast speed changes. Therefore,\ninner-loop control may be accompanied by feedforward: a known, time-dependent\nopen-loop input. The gimbal\u2019s rate loop then rejects any remaining (unknown)\ndisturbances. Such a control system can settle faster (be higher in bandwidth)\nwithout risking saturation due to overshoot. This architecture is common in CMG-\ndriven spacecraft.\n\nCMG steering algorithms may be considered successful when they accurately\nmap spacecraft-level torque into actuator behaviors while avoiding singularities\nand thus high gimbal rates and accelerations. Successful algorithms comprise three\ncategories, as shown in Fig. 7.1: singularity escape algorithms, singularity avoidance\nalgorithms, and singularity avoidance and escape algorithms. Other approaches also\nappear in the literature, but this chapter is limited to these three types.\n\nSingularity avoidance and inner-loop control are separate phenomena, but both\nimpact feedback-control performance of a spacecraft with momentum control\ndevices. For arrays of both RWAs and CMGs, saturation can occur on the array\nlevel as limits on array angular momentum (see Chap. 5) or at the actuator level as\nlimits on the rotor and gimbal rates and accelerations. Chapter 8 discusses these\nissues in detail.\n\nFor the likely case in which rotor angular momentum is identical for all\nCMGs in an array, the location and form of singularities depends solely on the\nCMGs\u2019 alignments relative to one another. As discussed in Chap. 6, the behavior\nof momentum systems is independent of the devices\u2019 location within the spacecraft.\n\n\n\n7.1 CMG Steering Algorithms 159\n\nSteering laws enable the array to impart a commanded output torque, Ph by\n\u201cinversion\u201d of the Jacobian A to compute P?:\n\nPh D A P? (7.1)\n\nDecomposition of A into its range and null spaces is central to an understanding of\nsteering algorithms. The gimbal-rate solutions can be decomposed as\n\nP? D P?f C P?n (7.2)\n\nwhere P?f is a column of gimbal rates in the range space of A, so that Ph D A P?f .\nWith four or more CMGs, an array can exhibit the so-called null motions. This\nmotion consists of non-zero gimbal-rate combinations that neither produce torque\non the spacecraft nor (equivalently) change the array\u2019s angular momentum. These\ncombinations correspond to P? D P?n. The quantity P?n lies entirely in the nullspace\nof A, so that A P?n D 0.\n\nWith this nomenclature in place, we can state three objectives for the majority\nof steering algorithms in terms of forced and null motion: (1) impart a commanded\ntorque, (2) escape singularity through the addition of torque error ?e and/or avoid\nsingularity through null motion P?n, and/or (3) follow a commanded gimbal-rate\ntrajectory P?d while simultaneously achieving (1) and/or (2). A cost function that is\noften used to assess a steering law\u2019s success in meeting these objectives is\n\nJ D 1\n2\n?Te R?e C\n\n1\n\n2\nP?Te Q P?e (7.3)\n\nwhere Q and R are positive definite, symmetric matrices,\n\n?e D Ph ? A P? (7.4)\n\nand\n\nP?e D P?d ? P? (7.5)\n\nMost published steering algorithms are known as pseudoinverse methods. They\nare found from taking the first variation of Eq. (7.3) and setting it equal to zero,\nat which point the solution for gimbal rates is a minimum-norm column matrix\nof values (i.e\u201e when the matrices R > 03?3 and Q ? 0n?n) . Most steering\nalgorithms do not consider constraints on the gimbal rates and accelerations. These\nconstraints are typically considered in the inner-loop controllers after the fact, where\ninput power and accuracy may be sacrificed at the boundaries of the constraint, or\nthey are accommodated in the trajectory-planning step, where the only permissible\nmaneuvers are those that never cause the momentum devices to reach these limits.\n\n\n\n160 7 Steering Algorithms\n\n7.2 Origin of Pseudoinverse Methods\n\nPseudoinverse methods are generally analytic solutions for a set of gimbal rates or\naccelerations that produce a commanded torque. They are all based on pseudoin-\nverses of a nonsquare matrix, giving them their name.\n\n7.2.1 Blended Inverse\n\nTaking the first variation of Eq. (7.3) and setting it equal to zero leads to\n\nP? D .Q C ATRA/?1.ATRPh C Q P?d/\nD .Q C ATRA/?1ATRPh C .Q C ATRA/?1Q P?d (7.6)\n\nwhich has been given the name Blended Inverse (Tekinalp and Yavuzoglu [1]).\nEquation (7.6) is a steering law that achieves singularity escape through the addition\nof torque error, singularity avoidance through the addition of null motion, and\ntracking of commanded gimbal rates. While mathematically convenient, the torque\nerror and indeterminacy near singularity may make such an approach unappealing in\npractice. However, typically A has at most full row rank. The most common case is\nn ? 3 for CMGs to control three axes of torque, where the column size is n and the\nrow size is 3. Only in the case of three CMGs could the resulting Jacobian (a 3 ? 3\nmatrix) have both full row rank and full column rank. Therefore, from here on out,\nthat where it is best suited, we will choose Q 2 R3?3 over Q 2 Rn?n and R 2 Rn?n\nover R 2 R3?3 separately for both parts of the RHS of Eq. (7.6). Therefore, in an\neffort to use the minimum-norm solution, i.e., use ATRT.QCARTAT/?1 Ph rather than\n.Q C ATRA/?1ATRPh, the inverted quantities of the first term on the RHS of Eq. (7.6)\nwill always be 3 ? 3.\n\n7.2.2 Moore\u2013Penrose Inverse\n\nThe simplest and possibly the most prevalent pseudoinverse in the literature is\nknown as the Moore\u2013Penrose inverse and it is found through the first variation of\nEq. (7.6) with parameters (Q D 03?3, R D In?n, and P?d D 0):\n\nP? D AT.AAT/?1 Ph (7.7)\n\nThe Moore\u2013Penrose pseudoinverse in Eq. (7.7) has but one objective, which is\nobvious from the choice of (Q D 03?3, R D In?n, and P?d D 0). This objective is to\nfollow the torque command, sometimes known as perfect \u201ctorque tracking.\u201d Another\nconsequence of the Moore\u2013Penrose solution is that the norm of P? is minimized\n\n\n\n7.3 Singularity-Escape Algorithms (Torque-Error Algorithms) 161\n\nif a solution exists. But its simplicity also comes with limitations: the Moore\u2013\nPenrose pseudoinverse is incapable of avoiding or escaping singularities and does\nnot accommodate constraints on gimbal angles, rates, or accelerations.\n\n7.3 Singularity-Escape Algorithms (Torque-Error\nAlgorithms)\n\nSingularity-escape algorithms have the goal of passing through singularities and\nrecovering with minimal (but not necessarily zero) deviation from the commanded\ntorque. The addition of a scalar or matrix whose only purpose is to maintain\nnumerical conditioning of a matrix inverse gives these methods the name \u201cdirty\ninverses:\u201d they are inexact mappings from commanded torque to gimbal rates. This\napproach to numerical conditioning constitutes the \u201cdirt\u201d that can cause inaccuracy\nin the calculation near singularity.\n\n7.3.1 Singularity Robust Inverse\n\nOne of the earliest singularity-escape methods is the singularity-Robust (SR)\ninverse (Bedrossian et al. [2]). This pseudoinverse is found through substitution of\nthe parameters (Q D ?I3?3, R D In?n, and P?d D 0) in Eq. (7.6) as\n\nP? D AT.AAT C ?I3?3/?1 Ph (7.8)\n\nwith a possible choice of a singularity parameter\n\n? D ?0e??m (7.9)\n\nwhere ?0 and ? are positive constants. The term m D\np\n\ndet.AAT/ is known as the\nsingularity measure or manipulability in the field of robotics (Yoshikawa [3]). The\nsingularity measure is the product of the singular values of the Jacobian. Therefore,\nit provides a measure of the distance of the CMG array from singularity.\n\nThe SR-inverse is effective in escaping most singularities, and the escape time\ncan be traded against the torque error through the choice of tuning parameters,\n?0 and ?. Specifically, a system that can accept high torque error can escape the\nsingularities quickly. Nevertheless, this escape time is not deterministic and must be\nbounded through Monte Carlo analysis. This non-determinism may be unacceptable\nfor spacecraft architectures where delay in following a specified trajectory adversely\nimpacts data collection.\n\nThe objective of the singularity parameter is to regularize the singular values\nof the matrix AAT at singularity so that the matrix to be inverted remains positive\n\n\n\n162 7 Steering Algorithms\n\ndefinite, rather than losing rank. The solution, of course, is not exact when ? \u00a4 0. It\ntherefore achieves a torque that deviates from the command when the array is nearly\nsingular. In fact, the singularity parameter ? adds torque error in all directions,\nwhich is clear from an SVD of Eq. (7.8):\n\nP? D AT.AAT C ?I3?3/?1 Ph D V\n\n2\n\n6\n6\n6\n6\n4\n\n?1\n?21C? 0 0\n0 ?2\n\n?22C? 0\n0 0 ?3\n\n?23C?\n0 0 0\n\n3\n\n7\n7\n7\n7\n5\n\nUT Ph D ASR Ph (7.10)\n\nThe torque error resulting from singularity escape for many pseudoinverse methods\nis ?e D Ph ? A P?. For the SR-inverse this error is\n\n?e D Ph ? A P? D Ph ? AAT.AAT C ?I3?3/?1 Ph D U\n\n2\n\n6\n6\n6\n6\n4\n\n?\n\n?21C? 0 0\n0 ?\n\n?22C? 0\n0 0 ?\n\n?23C?\n0 0 0\n\n3\n\n7\n7\n7\n7\n5\n\nUT Ph D ? Ph\n\n(7.11)\n\nwhere ? is a torque error amplification parameter that approaches zero as the\nsingularity parameter ? goes to zero.\n\nEquation (7.11) clearly shows that the torque error is scaled not only by the size\nof the singularity parameter but also by the size of the torque command. Therefore,\nthe attitude-control subsystem cannot assume a fixed amount of torque error at every\nsingularity.\n\n7.3.2 Singularity Direction Avoidance Pseudoinverse\n\nTo reduce the torque error introduced for singularity escape, the singularity direction\navoidance (SDA) pseudoinverse localizes torque error to the singular direction only\n(Ford and Hall [21]). The SDA pseudoinverse does so by regularizing only the\nsmallest singular value. The parameters defining SDA from Eq. (7.6) are (Q D X,\nR D In?n, and P?d D 0), giving the expression\n\nP? D AT.AAT C X/?1 Ph (7.12)\n\nwhere X D Udiag.0; 0; ?/UT and ? is the same singularity parameter from Eq. (7.9).\nSubstitution of X into Eq. (7.12), taking the SVD, and sorting the singular values\nleads to\n\n\n\n7.3 Singularity-Escape Algorithms (Torque-Error Algorithms) 163\n\nP? D AT.AAT C X/?1 Ph D V\n\n2\n\n6\n6\n6\n4\n\n1\n?1\n0 0\n\n0 1\n?2\n\n0\n\n0 0 ?3\n?23C?\n\n0 0 0\n\n3\n\n7\n7\n7\n5\n\nUT Ph D ASDA Ph (7.13)\n\nwith torque error\n\n?e D U\n\n2\n\n6\n6\n6\n4\n\n0 0 0\n\n0 0 0\n\n0 0 ?\n?23C?\n\n0 0 0\n\n3\n\n7\n7\n7\n5\n\nUT Ph D ? Ph (7.14)\n\nCompared to Eqs. (7.11), (7.14) clearly reduces torque error in an overall sense.\nNumerically stable and computationally efficient methods exist to compute the\nSVD. Therefore, real-time implementation of the SDA pseudoinverse in determin-\nistic flight code is feasible. Also, a by-product of the SVD is that there is no need to\ninvert AAT: the inverse can be reconstructed from the product of the unitary matrices\nU and V and the singular values once the SVD has been performed as shown in\nEq. (7.13).\n\nLike the Moore\u2013Penrose inverse and the SR inverse, the SDA pseudoinverse is\nsusceptible to gimbal lock (see Chap. 5). This weakness becomes clear when one\ntakes the SVD of MP, SR, and SDA pseudoinverses. At singularity, all of these\npseudoinverse solutions for gimbal rates take the form\n\nP? D V\n\n2\n\n6\n6\n4\n\n\t 0 0\n0 \t 0\n0 0 0\n\n0 0 0\n\n3\n\n7\n7\n5U\n\nT Ph (7.15)\n\nwhere \t indicates a nonzero number. Now if the array is singular, Ph || u D u3,\nthe third column of the unitary matrix U for a rank 2 singularity. At singularity,\nEq. (7.15) gives a zero result for the MP, SR, and SDA pseudoinverse methods,\neven when Ph \u00a4 0 (see Chap. 5). As discussed in Chap. 6, for parallel-type (roof)\narrangements, there is a possibility of a rank-1 singularity where there is a plane of\nsingular directions and u is in that plane.\n\n7.3.3 Generalized Singularity Robust Inverse\n\nIn an effort to mitigate the risk of gimbal lock in a pseudoinverse-based steering\nalgorithm, the generalized singularity robust (GSR) inverse has been proposed (Wie\net al. [4]). The parameters for Eq. (7.6) that define the GSR inverse are (Q D E,\nR D In?n, and P?d D 0). They yield\n\n\n\n164 7 Steering Algorithms\n\nP? D AT.AAT C ?E/?1 Ph D AGSR Ph (7.16)\n\nwhere ? can be chosen as in Eq. (7.9), and\n\nE D\n2\n\n4\n1 ?0 sin.!3t C \n3/ ?0 sin.!2t C \n2/\n\n?0 sin.!3t C \n3/ 1 ?0 sin.!1t C \n1/\n?0 sin.!2t C \n2/ ?0 sin.!1t C \n1/ 1\n\n3\n\n5 > 0 (7.17)\n\nwhere ?0 is a positive amplitude, and !i and \ni are the frequencies and phase shifts\nof the dither used to nudge or wiggle the array out of the local minimum of gimbal\nlock. Because this pseudoinverse is an explicit function of time, dithering may be\nsuccessful in driving the array out of a singularity at gimbal lock. However, there is\nno guaranteed upper bound on the time required for escape. The time is impacted\nby uncertainty in the Jacobian due to unavoidable measurement noise, delay, and/or\nquantization in gimbal angles. Also, the effect of gimbal lock escape is embedded in\nthe pseudoinverse non-linearly. Therefore, although this technique may be assessed\nwith statistical modeling of slews and found to be successful in a large fraction of\ncases, using GSR or any torque error/singularity escape methods for CMG array\nsteering is likely impractical when guaranteed accuracy in tracking a specific torque\ntrajectory is of primary importance.\n\nIf some torque error is acceptable, a more deterministic way to escape gimbal\nlock is to perturb the commanded torque along directions orthogonal to the singular\ndirection. Consider the commanded torque as a projection along the basis created\nby the unitary matrix U from the SVD of A as\n\nPh D ?1u1 C ?2u2 C ?1u3 (7.18)\n\nwhere\n\n?i D PhTui (7.19)\n\nIn a gimbal-lock singularity, Ph D u3, and the majority of pseudoinverse solutions\nprovide an improper result as shown in Eq. (7.15). Therefore such a method perturbs\nthe commanded torque in Eq. (7.18) as\n\nPh D ??1 u1 C ??2 u2 C ?1u3 (7.20)\n\nwhere the parameters ??1 and ??2 are nonzero away from singularities. The appropri-\nate choice of these parameters ensures that gimbal-lock is impossible analytically,\nbecause at singularity, the commanded torque always has components orthogonal\nto the singular direction (Leve [5] and Leve et al. [6]). Away from singularity, the\nsingularity parameters in Eq. (7.20) approach their true values ?1 and ?2 . However,\n\n\n\n7.4 Singularity Avoidance Algorithms 165\n\nthe method in Eq. (7.20) is still a torque-error method and does not track accurately\nthe commanded torque trajectory near a singularity.\n\n7.4 Singularity Avoidance Algorithms\n\nSome singularities, i.e., non-degenerate hyperbolic singularities, offer the possibility\nof avoidance without the use of torque error (see Chap. 5). Such methods can\nbe posed as pseudoinverse solutions with the addition of null motion used solely\nfor singularity avoidance. These solutions are considered exact solutions and are\nprecise, i.e., zero torque error except at saturation singularities. Developing this\nsteering-law software goes hand-in-hand with defining the array architecture so that\nonly hyperbolic singularities are encountered. Some of the most popular singularity-\navoidance methods in literature are the local-gradient methods, as discussed in this\nsection.\n\n7.4.1 Generalized Inverse Steering Law\n\nThe generalized inverse steering law (GISL) is found through substitution in\nEq. (7.6) of the parameters (Q D BTA, R D I3?3, and P?d D Q?1BT Ph) and made\nto be the minimum-norm solution as\n\nP? D \u0152.A C B/TA\t?1.A C B/T Ph H) .A C B/T\u0152A.A C B/T\t?1 Ph D AGISL Ph (7.21)\n\nwhere B is a 3 ? n matrix of torque directions (sine and cosine functions of gimbal\nangle), the ith column of which is orthogonal to the corresponding column of A,\ni.e., BTi Ai D 0 8 i D 1; : : : ; n and not BTi Aj D 0 j \u00a4 i and 8 i; j D 1; : : : ; n.\nPre-multiplying both sides of Eq. (7.21) by A yields\n\nA P? D Ph (7.22)\n\nTherefore, the GISL provides an exact solution for gimbal rates to deliver\nthe commanded torque. The matrix B is responsible for this exactness because it\nadds null motion within the pseudoinverse. However, even for a GISL there is no\npossibility of escape from elliptic singularities because null motion does not exist\nfor those cases. Therefore, GISL is classified as a singularity-avoidance algorithm\nas shown in Fig. 7.1.\n\n\n\n166 7 Steering Algorithms\n\n7.4.2 Local Gradient (LG) Methods\n\nEquation (7.6) provides the general form of pseudoinverse steering algorithms.\nDecomposing it with the Matrix Inversion Lemma (see [7]) separates range-space\nfrom null-space terms:\n\nP? D .Q C ATRA/?1ATRPh C .Q C ATRA/?1Q P?d (7.23)\n\nApplying the Matrix Inversion Lemma yields\n\n.Q C ATRA/?1 D \u0152Q?1 ? Q?1AT.R?1 C AQ?1AT/?1AQ?1\t\n\nNow if the commanded gimbal rate, P?d is within the null space, so as to provide\nsingularity avoidance, the gimbal rates are P?d D ?\u0152In?n ? ACA\td, where ? is a\nsingularity parameter of the same form as Eq. (7.8), and \u0152In?n ? ACA\t is a matrix\nthat projects any vector d onto the null space of A. Substituting into Eq. (7.23) the\nquantity P?d D ?\u0152In?n ? ACA\td and the second part of Eq. (7.23) provides\n\nP? D .Q C ATRA/?1ATRPh C ?\u0152In?n ? ACA\td (7.24)\n\nNote that the second term on the RHS of Eq. (7.24) is invariant to choice of Q and\nR with the constraint that P?d lies in the nullspace of A. The local gradient is derived\nfrom substituting the parameters (Q D 03?3, R D In?n, and P?d D ?\u0152In?n ? ACA\td)\ninto Eq. (7.23):\n\nP? D AT.AAT/?1 Ph C ?\u0152In?n ? ACA\td (7.25)\n\nThe gradient-search direction d in Eq. (7.26) can be chosen to minimize a function\nthat maximizes the array\u2019s distance from singularity. A convenient function to use\nin this optimization is f D ?m2, where\n\nd D @f\n@?\n\n(7.26)\n\nThe gradient-search direction in Eq. (7.25) has been shown to be effective in\navoiding non-degenerate hyperbolic singularities for SGCMGs and singularities for\nDGCMGs in the literature (Kurokawa [8]). The LG method in Eq. (7.25) is an exact\nsolution that can avoid non-degenerate hyperbolic singularities but is ineffective in\navoiding elliptic singularities.\n\n\n\n7.4 Singularity Avoidance Algorithms 167\n\n7.4.3 Constrained Gimbal Angle or Angular Momentum\nMethods\n\nA particular class of single-gimbal CMG steering laws uses linear constraints\n(whether in hardware or software) to avoid singularities while instantaneously\nsolving for gimbal rates without future knowledge and without intentionally\ninducing torque error. Several variations of this steering law exist in the literature\n(Kurokawa [8] and Havill and Ratcliff [9]). Here, we offer a generalized form of\nsuch a steering law that frees the algorithm development from specific array geome-\ntries (Jones et al. [10]). The following generalized mathematical description of\nsteering laws with linear constraints uses two examples to explain the formulation:\nthe familiar architecture of three scissored pairs and six CMGs arranged in two\ntriplets.\n\nThe justification for this approach is articulated in Kurokawa\u2019s steering law\nsurvey [8]. He and others agree on the capabilities of an ideal steering law, which\nshould be\n\n1. Capable of handling singularities\n2. Exact (error-free)\n3. Instantaneous (requiring no future knowledge)\n4. Technologically feasible in terms of computational power and hardware imple-\n\nmentation\n5. General with regard to maneuvers and CMG array\n\nNull motion and constraint-based methods are the only categories that clearly meet\nthe first three criteria. Equation (7.1) shows the general form of the equation for the\ntorque in terms of an array of gimbal rates P? and a Jacobian A,\n\nCMG steering laws often solve Eq. (7.1) using a version of the Moore\u2013Penrose\npseudoinverse solution:\n\nP? D AT.AAT/?1 Ph (7.27)\n\nLinearly constrained steering laws are no exception; however, in addition to\ndescribing the dynamics of the problem via the Jacobian, these steering laws also\ninclude linear constraint equations:\n\nD D C P? (7.28)\n\nEquation (7.27) can be augmented with Eq. (7.28) to include the constraints:\n\n? Ph\nD\n\n?\n\nD\n?\n\nA\nC\n\n?\nP? D A P? (7.29)\n\nThe matrix A combines both of these partitions, with the pseudoinverse solution\n\n\n\n168 7 Steering Algorithms\n\nP? D .AAT/?1AT\n?Ph\n0\n\n?\n\n(7.30)\n\nThis description generalizes all variations of this class of steering laws where A is\nnot necessarily square. However, if it is, the solution simplifies further and becomes\n\nP? D A?1\n?Ph\n0\n\n?\n\n(7.31)\n\nIn order for the A matrix to be invertible, the constraint matrix C must contain\nrows that are linearly independent of the range space of A. When these constraints\nare guaranteed to maintain linear independence for the range of possible motions,\nthe array becomes singularity-free. To achieve this goal, C must consist of constraint\nequations with some component orthogonal to the directions described by the rows\nof the Jacobian.\n\nThese additional equations provide a basis for the singularity-avoidance prop-\nerties of the steering laws involved. Holonomic constraints specify the gimbal\nangles directly. They can be incorporated into this formulation by simply taking the\nderivative of the constraint involved and specifying a carefully chosen, non-singular\ninitial gimbal-angle condition. The scissored-pair array constraint is an example and\nis summarized below. Non-holonomic constraints specify the path or some function\nof the gimbal rates without specifying angles per se. Further research may identify\nnon-holonomic constraints of interest, but to date only holonomic constraints have\nbeen identified.\n\nFor simplicity, the examples here consider only exactly constrained systems,\nwhere the number of constraints m is equivalent to the number of CMGs beyond the\nminimum of three. Using exactly three CMGs leaves no null space for constraints to\nbe added. For example, controlling a two-dimensional momentum space with three\nSGCMGs offers the opportunity for one constraint equation. Such a situation may be\npreferred: inverting the now square A matrix represents an opportunity for minimal\ncomputation, compared to the more computationally burdensome calculation of a\nnumerically robust pseudoinverse.\n\nAn important practical consideration is that in order for a constraint-based\nsteering law to operate properly, the constraint must be exactly enforced. The\nfinite precision of typical software environments demand that some low-bandwidth\nfeedback be used to avoid an accumulation of numerical error that would cause the\nCMGs to drift off the path consistent with the initial conditions and the constraint.\n\n7.4.3.1 Linear-Constraint Methods\n\nIn a scissored-pair configuration, two SGCMGs are constrained such that their\ngimbal displacements are equal in magnitude but opposite in direction (Cunningham\nand Driskill [11]). The motion of the two momentum vectors resembles that of a pair\n\n\n\n7.4 Singularity Avoidance Algorithms 169\n\nFig. 7.2 Scissored pair constraint. The scissored pair of CMGs is constrained such that the gimbal\nangles are equal in magnitude and opposite in direction, which results in a net torque along a single\naxis\n\nFig. 7.3 Arrangement of\nthree scissored pairs. This\nfigure demonstrates one\npossible arrangement of the\nthree scissored pairs of CMG\nthat are required for six-DOF\ncontrol of a spacecraft\n\nof scissors\u2014hence the name. The angles, as defined in Fig. 7.2, are constrained to\nbe the same (?1 D ?2). The scissoring motion caused by this constraint produces an\noutput torque in a direction fixed along the reflection line between the two CMGs,\nas shown in Fig. 7.2. Thus, complete six degree-of-freedom control of a spacecraft\nrequires three scissored pairs of SGCMGs. One potential arrangement is shown in\nFig. 7.3.\n\n\n\n170 7 Steering Algorithms\n\nScissored-pair arrangements of SGCMGs are singularity-free except at the\nsaturation singularities, where the pair is producing the maximum momentum of\nwhich it is capable in that direction. This configuration of CMGs is generally not\nconsidered mass efficient despite its singularity-avoidance properties and its relative\nsimplicity because the angular momentum envelope is considerably smaller than\nother six-CMG arrays of similar mass. Nevertheless, the modularity of such a\nconfiguration and the prospect of commercially available, off-the-shelf scissored-\npair units suggests that the configuration has some value at the system level.\n\nThe Jacobian for the array of three scissored pairs is\n\nA D\n2\n\n4\n?c?1 ?c?2 0 0 ?s?5 s?6\n?s?1 s?2 ?c?3 ?c?4 0 0\n0 0 ?s?3 s?4 ?c?5 ?c?6\n\n3\n\n5 (7.32)\n\nEach pair is constrained as follows: ?1 ? ?2 D 0; ?3 ? ?4 D 0; ?5 ? ?6 D 0. Taking\nthe derivative of these holonomic constraints produces a similar constraint on the\ngimbal rates:\n\n(7.33)\n\nThis constraint equation provides the C and D matrices. Augmenting the Jacobian\nwith the constraint matrices provides A:\n\n? Ph\nD\n\n?\n\nD\n\n2\n\n6\n6\n6\n6\n6\n6\n6\n4\n\n2\n\n4\n?c?1 ?c?2 0 0 ?s?5 s?6\n?s?1 s?2 ? c?3 ?c?4 0 0\n0 0 ?s?3 s?4 ? c?5 ?c?6\n\n3\n\n5\n\n2\n\n4\n1 ?1 0 0 0 0\n0 0 1 ?1 0 0\n0 0 0 0 1 ?1\n\n3\n\n5\n\n3\n\n7\n7\n7\n7\n7\n7\n7\n5\n\nP? (7.34)\n\nThe well-known singularity avoidance properties of this constraint-based steer-\ning law can be demonstrated by showing that the rows of the constraint matrix\nin Eq. (7.33) are linearly independent of A. Using the fact that the column rank\nis equivalent to the row rank,\n\n? Ph\nD\n\n?\n\nD\n\n2\n\n6\n6\n6\n6\n6\n6\n6\n4\n\n?1\n?2\n?3\n?4\n?5\n?5\n\n3\n\n7\n7\n7\n7\n7\n7\n7\n5\n\nD 06?1 (7.35)\n\n2\n4\n\n0\n\n0\n\n0\n\n3\n5 D\n\n2\n4\n\n1 ?1 0 0 0 0\n0 0 1 ?1 0 0\n0 0 0 0 1 ?1\n\n3\n5 P?\n\n\n\n7.4 Singularity Avoidance Algorithms 171\n\n?c?1?1 ? c?2?2 ? s?5?5 C s?6?6 D 0\n?s?1?1 C s?2?2 ? c?3?3 ? c?4?4 D 0\n?s?3?3 C s?4?4 ? c?5?5 ? c?6?6 D 0\n\n?1 D ?2; ?3 D ?4; ?5 D ?6\n(7.36)\n\nThe solution is trivial (0 D 0) for angles below ?=2, meaning that the system has\nfull rank for gimbal angles below saturation, as seen in Eq. (7.37).\n\n?c?1?1 ? c?1?1 ? s?5?5 C s?5?5 D ?2c?1?1 D 0\n?s?1?1 C s?1?1 ? c?3?3 ? c?2?3 D ?2c?2?3 D 0\n?s?3?3 C s?3?3 ? c?5?5 ? c?5?5 D ?2c?5?5 D 0\n\n?1 D ?2; ?3 D ?4; ?5 D ?6\n(7.37)\n\n7.4.3.2 Triplet Steering Law\n\nIf three CMGs are placed in a plane (a \u201ctriplet\u201d), the additional CMG adds a degree\nof freedom, creating null space (so, for example, an infinite set of gimbal angles can\ncorrespond to the zero momentum state, as shown in Fig. 7.4).\n\nFor the case of three CMGs, one constraint equation is sufficient to fully constrain\nthe system in a two-dimensional workspace. This constraint can be designed to\nsuccessfully avoid the internal singularity while also providing the required torque\nby exploiting the null space of the Jacobian. Again, the constraint equation that\nfills this need must accomplish three objectives: (1) avoid singular configurations;\n(2) capture the maximum possible range of momentum values and (3) introduce no\nunwanted torque (Fig. 7.5).\n\nThe triplet configuration has a 2 ? 3 Jacobian, as shown in Eq. (7.38), where A1\nand A2 are the top and bottom rows of the planar Jacobian, respectively.\n\nFig. 7.4 Planar\nrepresentation of CMG\nmomentum. The angular\nmomentum vectors of three\nplanar CMGs span the\ntwo-dimensional momentum\nmanifold in a\nnon-deterministic way. This\nconfiguration shows one of\nthe many zero-momentum\nconfigurations for the array\n\nh1\n\nh2\n\nb1\n\nb2\n\nh3\n\n\n\n172 7 Steering Algorithms\n\nFig. 7.5 Internal singularity\nfor a triplet. The\nangular-momentum vector\none of the CMGs cancels that\nof a second CMG. The third\nCMG\u2019s momentum is also\nparallel to one of those two,\ncreating a situation where\ntorque cannot be exerted in\nthe direction parallel to the\nCMGs\n\nAPlanar D\n??s?1 ?s?2 ?s?3\n\nc?1 c?2 c?3\n\n?\n\nD\n?\n\nA1\nA2\n\n?\n\n(7.38)\n\nSingularities occur when the matrix being inverted in the Moore\u2013Penrose\npseudoinverse [Eq. (7.30)], in this case the augmented A matrix is not full rank. In\norder to ensure that the constraint equation does not introduce more singularities, it\nis sufficient to write a constraint equation that is always linearly independent of the\ntwo existing rows of the Jacobian: for example, the cross-product of two linearly\nindependent vectors. Thus, a singularity-free constraint equation must include a\nscaled component in the direction of the cross-product of the two rows of the\nJacobian:\n\nD D d D \u0152?1A1 C ?2A2 C ?c.A1 ? A2/\t P? D C P? (7.39)\n\nwhere d is a scalar solution to the constraint equation, ?1 and ?2 are scaling values\nfor the component of the vector in the direction of the Jacobian rows, and ?c is a\nnon-zero scaling value for the constraint equation. This example uses a value of zero\nfor ?1 and ?2 and a value of one for ?c, such that the constraint equation is as shown\nin Eq. (7.40).\n\nD D \u0152A1 ? A2\t P? D \u0152s.?3 ? ?2/ s.?1 ? ?3/ s.?2 ? ?1/\t P? D C P? (7.40)\n\nD determines the null motion needed to condition the array and steer it away\nfrom the internal singularity at 1h. Because C is orthogonal to the two rows of A,\nthe singularities of the augmented matrix A [Eq. (7.29)] are simply the singularities\nof A. In this example, null-space commands keep the CMGs\u2019 momentum vectors in a\ntrapezoid configuration. As shown in Fig. 7.6, with the momentum vectors head-to-\ntail, the trapezoid configuration is one in which one of the CMG momentum vectors\nis kept parallel to the total momentum vector (the vector sum of all three CMG\nvectors), while the other two momentum vectors form the sides of a trapezoid. All\nthree vectors are parallel only at the edge of the momentum envelope. At the internal\n\n\n\n7.4 Singularity Avoidance Algorithms 173\n\nFig. 7.6 Triplet CMG\nmomentum visualized as a\ntrapezoid. A trapezoid\nconfiguration keeps the array\nnon-singular by maintaining\none of the three CMG\nmomentum vectors parallel to\nthe total momentum vector at\nall times. The three CMGs\nare shown in blue and the\ntotal momentum vector in red\n\nhy\n\nhx\n\n1h0\n\n3h0\n\nsingularity located at 1h, the two vectors forming the sides are orthogonal to the\nvector parallel to the total momentum vector, an ideal configuration for traversing\nthe singularity.\n\nGiven any total momentum vector within the array\u2019s envelope, there are six ways\nto arrange the CMGs such that they are in a trapezoidal configuration and their\nmomentum vectors sum to the same total. The first step is to determine which of the\nsix trapezoid configurations is closest to the current (non-trapezoidal) configuration.\nThat is, determine which trapezoid configuration would require the least gimbal\nmotion to reach from the current configuration. The next step is to obtain a value for\nD as shown in Eq. (7.41).\n\nD D \u0152A1 ? A2\t P? D \u0152s.?3 ? ?2/ s.?1 ? ?3/ s.?2 ? ?1/\tK\n2\n\n4\n?1t ? ?1\n?2t ? ?2\n?3t ? ?3\n\n3\n\n5 (7.41)\n\n?nt is the gimbal angle the nth CMG would have if the array were in the trapezoid\nconfiguration closest to the current configuration, and K is a 3 ? 3 diagonal matrix\nof gains. The values of the entries of K determine how much effort is used to drive\nthe CMGs to their closest trapezoid configuration and are chosen such that as much\nnull-space effort as possible is used to keep the array close to a trapezoid without\nexceeding CMG gimbal limits. The selection of entries in K can be done with a\ndeterministic number of numerical iterations or by optimizing via a cost function.\nThe values that produce the highest gimbal rates without exceeding the limits offer\nthe fastest conditioning. They are then used to compute D as shown in Eq. (7.41).\nOnce the D term is obtained, the gimbal rates can be found through a direct inversion\nof A as shown in Eq. (7.31).\n\nWhen implemented, this steering law is not used close to the zero momentum\nstate because the ambiguity of keeping a CMG momentum vector parallel to the zero\n\n\n\n174 7 Steering Algorithms\n\nvector would cause large gimbal rates. The constraint is therefore modified such that\nwithin a small radius of the zero momentum state, a Moore\u2013Penrose pseudoinverse\nrule is used instead. Since the radius in which the pseudoinverse rule is used is\nmuch smaller than 1h, no problems with singularities are encountered by using\nthe pseudoinverse, and the issue of very large gimbal rates near zero momentum\nis avoided. For example, the pseudoinverse rule may be used only within 0:1h,\nwhich allows for enough null motion between 0:1h and 1h to properly condition\nthe array. In the general case, the radius is chosen to be as small as possible but\nstill large enough so that it is possible to traverse through the zero momentum\nstate without gimbal rates exceeding the limit. The choice of this radius depends\non the application-specific requirement on simultaneously available torque and\nmomentum.\n\n7.4.3.3 Expansion to a Six CMG Roof\n\nThis triplet analysis can be expanded to six SGCMGs by recognizing that two sets\nof triplets positioned such that the gimbal axes are offset relative to one another can\nbe used together to exert torque in three directions. Such a configuration results in\nsingularity-free control over two planes at an angle to one another, and thus spans\nR\n3. In the example considered here, the gimbal axes are orthogonal to one another,\n\nas shown in Fig. 7.7. A six-CMG triplet steering law would require two constraint\nequations:\n\n2\n\n6\n6\n6\n6\n6\n4\n\nPhx\nPhy\nPhz\nD1\nD2\n\n3\n\n7\n7\n7\n7\n7\n5\n\nD\n\n2\n\n6\n6\n6\n6\n6\n4\n\n1 0 0 1 0 0\n\n0 1 0 0 0 0\n\n0 0 0 0 1 0\n\n0 0 1 0 0 0\n\n0 0 0 0 1 0\n\n3\n\n7\n7\n7\n7\n7\n5\n\n2\n\n6\n6\n4\n\nA1 0\nC1 0\n0 A2\n0 C2\n\n3\n\n7\n7\n5\n\n2\n\n6\n6\n6\n6\n6\n6\n6\n4\n\nP?1P?2P?3P?4P?5P?6\n\n3\n\n7\n7\n7\n7\n7\n7\n7\n5\n\n(7.42)\n\nFig. 7.7 Two triplets of\nCMG at right angles\n\n\n\n7.4 Singularity Avoidance Algorithms 175\n\nA1 represents the Jacobian of the first CMG triplet and A2 the Jacobian of the second\ntriplet. C1 and C2 are the constraint equations, as described in Eq. (7.40), and D1 and\nD2 are solved for as described in Eq. (7.41). The transformation matrix in Eq. (7.37)\nis determined by the orientation of the two triplets. In this case, the gimbal axes are\naligned with the y and z directions, such that the momentum envelope is greater in\nthe x direction.\n\n7.4.3.4 Gimbal-Angle Constraint Methods (Collinear Steering)\n\nA CMG array is said to be \u201ccollinear\u201d when its geometry includes sets of CMGs\nwhose gimbal axes are parallel. The previous section used a collinear array as an\nexample of linear constraints. This section discusses collinear arrays in general. The\ncommon case in which there are two such sets is referred to as a \u201croof\u201d array (see\nChap. 6). For example, consider a four-CMG roof array. Each \u201cplane\u201d of the roof\ncontains two collinear CMGs whose gimbal axes are normal to the plane. Each\nCMG sweeps a circle of momentum in the plane. Adding the two circles associated\nwith the two CMGs produces a momentum state anywhere within a disc of radius\n2h. To produce a net zero momentum, i.e., the \u201corigin\u201d of the disc, the CMGs must\nbe directed oppositely. When the gimbals are in that orientation, both produce torque\nabout the same axis. Therefore, that plane is singular. And, of course, if both discs\nare in this configuration, the array is singular.\n\nThe solution to this dilemma is to recognize that there are four CMGs in this\narray, and therefore the array has one degree of freedom of null space. As a result,\nan a number of different combinations of gimbal angles can produce the same net\nmomentum vector. The steering law designer has the freedom to choose which set\nof gimbal angles to use, or put another way, to apply a gimbal-angle constraint.\nImposing a constraint on the null space degree of freedom like this is referred to as\n\u201cfixed map\u201d steering. As a result of such a constraint, each momentum state maps\nto a unique set of gimbal angles.\n\nIn applying this approach to the four-CMG roof array, we refer to the axis where\nthe two planes of the roof intersect as a \u201cshared\u201d axis. Both planes can produce\nmomentum in this direction. Therefore one possible constraint is to \u201cbias\u201d the two\ndiscs against each other along the shared axis, as illustrated in Fig. 7.8. When the\nroof is producing zero net momentum, the discs have equal and opposite nonzero\nmomentum along the shared axis; thus, both are well separated from the singularity\nat the disc origin, and the system is well conditioned.\n\n7.4.4 Limited Angular Momentum Methods\n\nIn many cases, including the four-CMG roof array of the previous section, applying\na gimbal-angle constraint does not eliminate the singularities; it merely changes\nthe point in momentum space at which they are encountered. This constraint is\n\n\n\n176 7 Steering Algorithms\n\nFig. 7.8 Biasing along the shared axis\n\nparticularly useful for the four CMG roof array, since the singularity is at the origin.\nBut if we start at our biased, net-zero momentum state (Fig. 7.8) and continue to\napply torque about the shared axis, eventually one of the discs must encounter its\norigin singularity.\n\nStrategies for managing this encounter are discussed elsewhere in this chapter.\nHowever, depending upon the requirements of the application, it may be acceptable\nsimply to impose a limit on the net array momentum prior to reaching this point.\nThis limit results in a simple and conservative control scheme with singularities\navoided because they cannot be encountered. Some applications, such as missions\nthat execute small slews in a short amount of time, do not have time for the gimbals\nto rotate very far during a slew. As such, they rarely access the extremes of the\nmomentum envelope anyway and suffer little penalty from this practice.\n\nSome care must be taken in how a momentum limit is implemented. Consider a\nlarge-angle eigenaxis slew, where the momentum limit is reached in the eigenaxis\ndirection, resulting in maximum vehicle rate for the majority of the slew. One\napproach might be to arrest all gimbal motion until the commanded torque is in\nthe direction that reduces momentum at the end of the maneuver. Doing so would\nnot only impose the momentum limit but also would essentially stop all command\nresponse during the slew, leaving the ACS open. This open-loop behavior is a\nproblem, as there is no cross-axis torque available to make small corrections and\nkeep the slew trimmed about the correct axis.\n\n\n\n7.5 Singularity Avoidance and Escape Algorithms 177\n\n7.5 Singularity Avoidance and Escape Algorithms\n\nSome steering algorithms simultaneously avoid singularities through null motion\nor constraints and escape from singularities through torque error. Such algorithms\nbenefit arrays of CMGs that contain both elliptic and hyperbolic internal singular-\nities. Fully exploiting exact solutions at hyperbolic singularities consists of using\nof null motion when it is available and torque error only at elliptic singularities,\ni.e., singularity escape when no null motion is possible. Such steering laws can be\nimplemented only when the form of the singularity (see Chap. 5) is known.\n\n7.5.1 Hybrid Steering Logic\n\nParameters that identify the type of singularity must be incorporated in the steering\nalgorithm. Chapter 5 explains that the parameters from the eigenvalues of the\nsingularity definition matrix S and projection matrix P determine the form of a\nsingularity: whether it is hyperbolic or elliptic. The steering algorithm must take this\ninformation into account for CMG arrays that contain internal elliptic singularities.\nThe hybrid steering logic (HSL) does just that in the form of a pseudoinverse.\nThe pseudoinverse expression for the HSL arises when the parameters (Q D\nX D Udiag.0; 0; ?/, R D In?n, and P?d D ?Vdiag.0; 0; 0; 1/VTd) are substituted\ninto Eq. (7.6), taking into account the separation of the null- and forced-spaces in\nEq. (7.24):\n\nP? D AT.AAT C X/?1 Ph C ?Vdiag.0; 0; 0; 1/VT d (7.43)\n\nEquation (7.43) may appear to be simply a hybrid of the SDA algorithm in\nEq. (7.12) and the LG method in Eq. (7.25), but there are some subtle differences.\nFirst, the null-space projection matrix \u0152In?n?ACA\t is singular when A is singular. For\nEq. (7.25), the equivalent matrix Vdiag.0; 0; 0; 1/VT is now non-singular. Second,\nthe singularity parameters\u2014? for ASDA and ? for the LG\u2014are different. They are\ndefined by the form of singularity, i.e., hyperbolic or elliptic. For a four CMG\npyramid array, the expressions ? and ? for this method are\n\n? D ?0e?a?e?1m (7.44)\n? D ?0e?a?e?2m (7.45)\n\nwhere ?0, a, ?1, ?0, b, and ?2 are positive scalar constants and m is the singularity\nmeasure. Now, the form of singularity is found through the states ? and ? which\ndepend directly on the singularity definition matrix S as\n\n? DjS0 ? det.S/j (7.46)\n\n\n\n178 7 Steering Algorithms\n\n? D 1\n?\n\n(7.47)\n\nwhere S0 is the maximum value that det.S/ can achieve. S0 is found heuristically or\nthrough optimization. The absolute value in Eq. (7.46) compensates for numerical\nerror, producing a negative term. It should be clear from Eqs. (7.44) through (7.47)\nthat at a hyperbolic singularity, det.S/ ? 0. Therefore, Eq. (7.44) would reduce\nthe effect of torque error in Eq. (7.43), thus reducing torque error and providing a\nmore precise LG method. At an elliptic singularity, det.S/ > 0 . Therefore, at an\nelliptic singularity, when null motion is ineffective, higher torque error is required\nto efficiently escape singularity.\n\nThe HSL is unique among pseudoinverse-based steering algorithms because it\nuses the information on the form of singularity to maximize steering precision\nand escape internal singularities, thus trading off the properties of LG and SDA\ndepending on the type of singularity encounter. The singularity parameter metrics\nidentified in Eqs. (7.44) and (7.45) must to be chosen with care to provide the desired\nperformance (Leve and Fitz-Coy [12]).\n\n7.5.2 Angular Momentum Artificial Potential Steering\n\nSingularities can be thought of as obstacles to trajectories in momentum space. Such\nobstacles can be avoided through algorithms that utilize barrier functions known as\nrepulsive artificial potential functions (APFs). An APF is a mathematical framework\nthat represents vector-field sources and sinks as repulsive and attractive potentials.\nThe gradient of the sum of these functions provides a trajectory that discourages the\ntrajectory from approaching sources and encourages motion toward commanded\ntrajectories in the form of sinks.\n\nA set of APFs can be defined that combines objectives of an attractive potential\nfor tracking a torque, angular momentum, or attitude and repulsive potentials\nfor avoiding angular momentum saturation and singularities. Angular momentum\nartificial potential steering (AMAPS) is a method that uses such a framework for\nsingularity avoidance. It trades torque error for singularity avoidance through soft\nconstraints posed by APF (Munoz and Leve [13]).\n\nThe use of APF may introduce local minima where neither objective is satisfied\n(e.g., high torque error and/or close proximity to singularities), and yet the steering\nmay converge here. Furthermore, repulsive APFs used to avoid singularities are\ninherently destabilizing because they introduce torque error to push the array\nconfiguration away from singularity. However, on a positive note, these functions are\nanalytic, involve only minimal computation, and with the right tuning may provide\nuseful local minima.\n\n\n\n7.5 Singularity Avoidance and Escape Algorithms 179\n\n7.5.3 Feedback Steering Law\n\nAll steering algorithms presented up to this point require matrix inversions. Matrix\ninversions are expensive and require stable numerical algorithms regardless of sin-\ngularities. Some steering algorithms avoid inverses altogether, taking an approach\nthat differs from the pseudoinverse solutions. The possible benefit in computation\ncomes at the expense of nonzero torque error.\n\nAn example of an inverse-free solution, different from that in [14], is known as\nthe feedback steering law (FSL), in which the solution for gimbal rates needed to\nprovide a commanded torque is found through construction of a linear system. This\nmethod is unique in that it does not correspond to a solution found from Eq. (7.6).\nYet it is familiar, since it is based on linear-system analysis. Without going into\ndetail, the linear system constructed for FSL has the dynamics\n\nPx DAKx C BKu (7.48)\nP? DCKx (7.49)\n\nwhere the coefficient matrices in Eqs. (7.48) and (7.49) AK , BK , CK are found by\nminimizing the cost function\n\nJ D 1\n2\n\n?\n?e P?\n\n?T\n?\n\nK1 0\n0 K2\n\n?\n?\n?e P?\n\n?\n\nP?2R4\n(7.50)\n\nwhich is exactly the SR inverse when K1 D 1 and K2 D ?1. However, for FSL,\nK1 D 1 and the compensator K2 D K.s/ and the coefficient matrices in Eqs. (7.48)\nand (7.49) are found through an H1 minimization of\n\nmin\nK.s/2R3?3\n\n?\n?\n?\n?\n\n?\nw1.s/\u01521C AK.s/\t?1\n\nw2.s/K.s/\u01521C AK.s/\t?1\n??\n?\n?\n?\n\n1\n(7.51)\n\nwhere the sensitivity weights\n\nw1.s/ D\n?\n\nAK BK\nCK 0\n\n?\n\n(7.52)\n\ncomprise a matrix function that bounds the bandwidth of the steering algorithm, and\n\nw2.s/ D 1\n!\n\nI4?4 (7.53)\n\nprovides upper bounds on the gimbal rates. The final result is in the controller-\nobserver form\n\n\n\n180 7 Steering Algorithms\n\nPh DAKh C BK?e\nP? DCKh (7.54)\n\nwhere CK D ATb!P (Pechev [15]). The constant b is the required bandwidth of the\nsteering algorithm, and P is the solution to the steady-state, i.e., infinite frequency\nRiccati Equation. The elegant steering algorithm in Eq. (7.54), unlike pseudoinverse\nsolutions, is based entirely on linear systems theory and optimization and provides\na way to limit the bandwidth and gimbal rate of the SGCMGs used for control while\navoiding singularities. Also, it accomplishes these goals without matrix inversions.\n\nHowever, this result derives from a steady-state Jacobian and therefore may not\nalways produce an exact solution. Also, like the other methods based on the cost in\nEq. (7.3), its solution involves mixed weighting of objectives and therefore may not\nproduce an exact torque while attempting to limit gimbal rates.\n\n7.5.4 Optimal CMG Attitude Control\n\nAllocation of torque among CMGs tends to optimize over some aspect of their\ncontrol effect, such as the output-torque error from the CMG array, the magnitude of\nthe gimbal rates resulting from their torque tracking, or some combination thereof,\nin terms of the objective function of Eq. (7.3).\n\nHowever, most pseudoinverse methods that are derived from the cost function\nin Eq. (7.3) are locally optimal at best, and their performance is dominated by the\nchoice of the weighting matrices R and Q (Leve [5]). One may want to optimize\nthe CMG gimbal rates to minimize both the torque error and the electromechanical\npower, which is not exactly equivalent to the two-norm of the gimbal rates. At the\nsame time, such a steering approach may have to obey constraints on the gimbal\nkinematics. Alternatively, optimal steering may simultaneously include attitude\ntrajectory and CMG gimbal rates, obviating the need to minimize array-level torque.\nFor such cases, the operations concept may call for solving the minimum-time\nattitude trajectory along with minimizing the gimbal-rate magnitudes. This section\naddresses optimal methods of control allocation that simultaneously optimize\nthe attitude trajectory, error in attitude, rate, and torque, and electromechanical\npower/energy of the CMG, and/or some combination of these objectives.\n\nNormally, the commanded torque is sent from the attitude control system and\nthen mapped by a steering algorithm to the gimbal rates. From there, the inner-loop\ngimbal controller offsets friction while enforcing hard constraints for the maximum\ngimbal rate and acceleration. This methodology is neither optimal with respect\nto power and accuracy nor efficient for utilizing the entire performance envelope.\nWith the exception of the FSL algorithm of Eq. (7.50), analytic solutions for\nsteering algorithms are unable to handle such constraints. Constrained optimization\ntechniques can permit a steering algorithm to be better than locally optimal,\nalthough not necessarily globally optimal.\n\n\n\n7.5 Singularity Avoidance and Escape Algorithms 181\n\nFig. 7.9 Searchable sets used\nfor lexicographic\noptimization\n\n7.5.4.1 Convex Optimization: Minimum Error-Dissipative Power\nReduction Control\n\nSteering a redundant array of RWAs and/or CMGs may prioritize accuracy in torque\ntracking more highly than other metrics such as the minimum input power to the\nactuators as secondary objectives. Such priority-based optimization processes are\nanalogous to how we think as humans but are not how optimization techniques\nare typically structured. Consider, for example, a redundant RWA or CMG array\ncontrol-allocation problem, in which there are infinitely many ways to impart a\ngiven torque, i.e., due to the null-space degree(s) of freedom in Eq. (7.2). These\nsolutions constitute a searchable set, as shown in Fig. 7.9.\n\nAs an algorithm optimizes over torque-tracking accuracy, it reduces the set to\nonly those solutions that have the optimal accuracy. Searching within this set can\nyield a subset of solutions that provide the minimal power for control allocation. The\nsecond priority may result in a multiple-solution set or a singleton. Now to provide\na real-time, polynomial convergent solution of this priority-based optimization, the\nconstraints and the cost may be structured as a convex function (not necessarily\nlinear). This method of priority-based optimization is known as \u201cLexicographic\nOptimization\u201d and relies on interior-point methods of convex optimization to find\nreal-time, polynomial convergent solutions to the optimal control allocation of\nredundant arrays of RWA and CMG (Dueri et al. [16]). An example of the priority\noptimization for Minimum Error-Dissipative Power Reduction Control or ME-\nDPRC from Dueri et al. [16] for n RWA is\n\nmin\n?r;kC1; P?r;k\n\nJ1 D\n?\n?Ph ? JrAs P?r;k\n\n?\n?\n1\n\nsubject to ?r;kC1 D?r;k C P?r;k?t;\n??max ??kC1 ? ?max; ? P?max ? P?r;k ? P?max;\n\n(7.55)\n\n\n\n182 7 Steering Algorithms\n\nwhere ?t is the discretization time step, P?r;k is the rotor accelerations at the kth\ntimestep,?max is a vector of symmetric upper bounds on RWA flywheel rates, P?max\nis a column matrix of symmetric upper bounds on RWA flywheel accelerations, and\n? represents an element-wise inequality. Using the one-norm of the torque error\nmakes the above problem an LP [17]. Let J?1 be the minimum torque error. Then the\nsecond optimization (minimizing power) is posed as:\n\nmin\n?r;kC1; P?r;k\n\nJ2 D\n?\n?\n?\nJr P?r;k ? ?Wf ;k\n\n???r;k\n?\n?\n1\n\nsubject to ?r;kC1 D?r;k C P?r;k?t;\n?\n?Ph ? JrAs P?r;k\n\n?\n?\n1\n\n?J?1 ;\n??max ??r;kC1 ? ?max; ? P?max ? P?r;k ? P?max:\n\n(7.56)\n\nwhere ?Wf ;k is the wheel friction torque at the kth time step from Appendix A, and\nthe first inequality imposes minimum-torque error. Clearly, the first inequality con-\nstrains the second-priority optimization to search within the solutions left over from\nthe first-priority optimization. That first inequality constraint is\n\n?\n?Ph ? JrAs P?r;k\n\n?\n?\n1\n\n?\nJ?1 . This method does exactly what is shown in Fig. 7.9. To keep the second cost\nconvex, the shaft power is multiplied with current rotor rates. This assumption is\nreasonable for RWAs because rotor accelerations are typically not large enough that\nthe rotor rates will be in a different regime at the next time step.\n\nUnlike many methods of optimal control, lexicographic programming can be\nused as a real-time method of control allocation. However, it does rely on the ability\nto design a practical convex cost function and set of constraints. It also does not\nguarantee anything better than a locally optimal, i.e., a greedy-algorithm solution\nfor the electromechanical power unless a receding-horizon approach is used such as\nmodel predictive control (Fisher et al. [18]).\n\n7.5.4.2 Gauss Pseudo-Spectral Collocation Methods\n\nNonlinear optimization techniques may be appropriate when a spacecraft requires\na global, or at least better-than-locally optimal, solution for attitude control,\nparticularly when the optimization is inherently nonlinear and nonconvex. The most\ncommon of these techniques include direct and indirect methods. One approach is\nto solve an optimal control problem as a two-point boundary value problem, which\nis in turn numerically solved by shooting methods. Another is to construct a discrete\nnonlinear program to be solved as a set of algebraic equations at discrete points in\nplace of differential equations.\n\nShooting methods have their problems: they require accurate initial guesses for\nconvergence to the optimal solution; they may use integration methods that are\nnot amenable to control and trajectories with discontinuities; and because they\nconsider roughly the entire trajectory and control of the optimal solution, they are\n\n\n\n7.5 Singularity Avoidance and Escape Algorithms 183\n\nnot computationally efficient, in general. On the other hand, collocation methods\ndiscretize the controls and the trajectories at a set of points and use interpolation,\ntypically by splines between the points, to provide a complete solution to the\noptimal-control problem. Such methods are more computationally efficient, while\nalso able to handle discontinuities\n\nIn simplest terms, collocation methods replace differential equations with alge-\nbraic equations solved at discrete nodes, called collocation points (Divya et al. [19]\nand Fahroo and Ross [20]). At the nodes, optimality is usually proved through\ncostate mapping theorems. The proof shows that each discrete point where the\noptimal control solution is solved meets the optimality conditions.\n\nFor CMG attitude control, the most popular objective for optimization in the liter-\nature is minimum-time slewing. A frequently discussed collocation method for this\nobjective comes from Gauss Pseudo-Spectral methods (Ross and Karpenko [22]).\nThese methods use Gauss Quadrature to approximate the integrals and the deriva-\ntives of the differential equations at the nodes. These methods have been shown\nin simulation and test-bed hardware to provide gimbal rates and rotor accelera-\ntions of an array of CMGs and RWAs for minimum time maneuvers (Ross and\nKarpenko [22]). Also, such methods have been used in flight, specifically on the\nInternational Space Station, for optimal offloading of angular momentum while\nminimizing thruster use. These \u201czero-propellant maneuvers\u201d have saved millions\nof dollars\u2019 worth of propellant (Bedrossian et al. [23]).\n\nA drawback to solving the entire nonlinear optimization problem in its original\nform is that the solution is rarely guaranteed to be globally optimal. It is also not\nclear how fast such an algorithm converges to the optimal solution. So, its real-\ntime implementation must be evaluated on a case-by-case basis. Furthermore, the\ninterpolation between the discrete points where the solution is solved may not in fact\nbe optimal or even satisfy constraints. In addition, it is not practical to add additional\npoints to the nonlinear program to avoid errors between points from interpolation\nbecause the number of discrete points in general exponentially increases the size of\nthe problem and computational cost.\n\nFor these many reasons, such methods are typically most effective if used as an\nopen-loop feedforward for a feedback controller to follow. When the parameters of\nthe spacecraft\u2014mass properties, sensor biases and scale factors, flexible dynamics,\nand actuator alignments and biases\u2014are very well known, this approach can\nbe effective. For precise attitude control, or attitude control for systems where\nknowledge of the full trajectory is not possible, the smallest amount of model\nuncertainty can cause unacceptable inaccuracies in spacecraft attitude tracking. In\nsuch a situation, care must be taken in choosing a nonlinear program approach such\nas Gauss Pseudo-spectral methods.\n\n\n\n184 7 Steering Algorithms\n\n7.6 Variable Speed Control Moment Gyroscopes\n\nVSCMGs and the steering algorithms that go along with them have been suggested\nas a solution to the singularity-avoidance problem. Some effective VSCMG steering\nalgorithms have been developed by Shaub and Junkins [24] and Yoon and Tsio-\ntras [25]. However, there are significant drawbacks from a hardware perspective,\nas discussed in Chaps. 4 and 5. These drawbacks explain why VSCMGs are not\ncommon in contemporary spacecraft.\n\n7.7 Chapter Summary\n\nThe purpose, derivation, and differences in performance of steering algorithms for\nCMGs are the subject of this chapter. Singularities can be avoided/escaped through\nthe choice of algorithm and/or through the choice of a CMG array architecture with\nnon-degenerate hyperbolic singularities. In such arrays, null motion will always be\neffective in avoiding internal singularities. Singularities can also be avoided through\nconstraining the gimbal angles or usable angular momentum, i.e., workspace for\nsteering algorithm solutions. This limitation leads to a method that provides an exact\nsolution within the constraints without addressing the singularities directly on-the-\nfly and provides some solutions that do not require a redundant set of CMGs.\n\nReferences\n\n1. O. Tekinalp, E. Yavuzoglu, A new steering law for redundant control moment gyroscope\nclusters. Aerosp. Sci. Technol. 9(7), 626 (2005)\n\n2. N. Bedrossian, J. Paradiso, E. Bergmann, D. Rowell, Steering law design for redundant single-\ngimbal control moment gyroscopes. AIAA J. Guid. Control. Dyn. 13(6), 1083 (1990)\n\n3. T. Yoshikawa, Dynamic manipulability of robot manipulators, in 1985 IEEE International\nConference on Robotics and Automation. Proceedings, vol. 2 (IEEE, 1985), pp. 1033\u20131038\n\n4. B. Wie, D. Bailey, C. Heiberg, Singularity robust steering logic for redundant single-gimbal\ncontrol moment gyros. AIAA J. Guid. Control. Dyn. 24(5), 865 (2001)\n\n5. F. Leve, Evaluation of steering algorithm optimality for single-gimbal control moment\ngyroscopes. IEEE Trans. Control Syst. Technol. 22(3), 1130 (2014)\n\n6. J. Leve, F. Munoz, N. Fitz-Coy, Gimbal-lock escape via orthogonal torque compensation, in\nProceedings of AIAA Guidance, Navigation, Control Conference, 2011, pp. 1\u201310\n\n7. A. Azzalini, Matrix Inversion Lemma (Wiley Online Library, 2006)\n8. H. Kurokawa, Survey of theory and steering laws of single-gimbal control moment gyros.\n\nAIAA J. Guid. Control. Dyn. 30(5), 1331 (2007)\n9. J. Havill, J. Ratcliff, A twin-gyro attitude control system for space vehicles. Technical Report,\n\nNASA, 1964\n10. L. Jones, R. Zeledon, M. Peck, Generalized framework for linearly constrained control moment\n\ngyro steering. AIAA J. Guid. Control. Dyn. 35(4), 1094 (2012)\n\n\n\nReferences 185\n\n11. D. Cunningham, G. Driskill, A torque balance control moment gyroscope assembly for\nastronaut maneuvering, in NASA. Ames Research Center 6th Aerospace Mechanics Symposium\n(SEE N72-26377 17-15), 1972, pp. 121\u2013126\n\n12. F. Leve, N. Fitz-Coy, Hybrid steering logic for single-gimbal control moment gyroscopes.\nAIAA J. Guid. Control. Dyn. 33(4), 1202 (2010)\n\n13. J. Munoz, F. Leve, Artificial potential steering for angular momentum exchange devices, in\nAAS/AIAA Spaceflight Mechanics Meeting, 2012\n\n14. S. Krishnan, S. Vadali, An inverse-free technique for attitude control of spacecraft using cmgs.\nElsevier Acta Astronaut. 39(6), 431 (1996)\n\n15. A. Pechev, Feedback-based steering law for control moment gyros. AIAA J. Guid. Control.\nDyn. 30(3), 848 (2007)\n\n16. F. Dueri, D. Leve, B. Acikmese, Minimum error dissipative power reduction control allocation\nvia lexicographic convex optimization for momentum control systems. IEEE Trans. Control\nSyst. Technol. (2015 to appear)\n\n17. S. Boyd, L. Vandenberghe, Convex Optimization (Cambridge University Press, Cambridge,\n2004)\n\n18. J. Fisher, R. Bhattacharya, S. Vadali, Spacecraft momentum management and attitude control\nusing a receding horizon approach, in Proceedings of AIAA Conference on Guidance,\nNavigation, and Control, 2007\n\n19. D. Garg, M. Patterson, W. Hager, A. Rao, D. Benson, G. Huntington, A unified framework\nfor the numerical solution of optimal control problems using pseudospectral methods. Elsevier\nAutomatica 46(11), 1843 (2010)\n\n20. F. Fahroo, I. Ross, Pseudospectral methods for infinite-horizon nonlinear optimal control\nproblems. AIAA J. Guid. Control. Dyn. 31(4), 927 (2008)\n\n21. K. Ford, C. Hall, Singular direction avoidance steering for control-moment gyros. AIAA J.\nGuid. Control Dyn. 23(4), 648\u2013656 (2000)\n\n22. I. Ross, M. Karpenko, A review of pseudospectral optimal control: from theory to flight. Annu.\nRev. Control. 36(2), 182 (2012)\n\n23. N.S. Bedrossian, S. Bhatt, W. Kang, I.M. Ross, Zero-propellant maneuver guidance. IEEE\nControl Syst. 29(5), 53 (2009)\n\n24. H. Schaub, J. Junkins, Singularity avoidance using null motion and variable-speed control\nmoment gyros. J. Guid. Control. Dyn. 23(1), 11 (2000)\n\n25. H. Yoon, P. Tsiotras, Singularity analysis of variable-speed control moment gyros. AIAA J.\nGuid. Control. Dyn. 27(3), 374 (2004)\n\n\n\nChapter 8\nInner-Loop Control of Momentum Devices\n\nImplicit in a discussion of how to command the devices in momentum control\nsystem is the assumption that the devices faithfully track those commands. And\nyet, momentum devices exhibit several significant nonlinearities and can experience\nsignificant disturbances and errors. For this reason, momentum devices almost\nalways include \u201cinner loops\u201d applying feedback control to the quantities of interest\nto ensure that those commands are tracked.\n\nThis chapter examines some of the key considerations in the inner loops of\nmomentum devices. The goal is not to teach the art of inner-loop design but rather\nto explore the ways in which the inner loops can impact the spacecraft designer.\nBecause these devices contain active feedback systems, they may interact with the\nspacecraft structure or controls. These interactions are usually of great interest in\nspacecraft design.\n\n8.1 Spin-Speed Control\n\n8.1.1 CMG Spin-Speed Loops\n\nBoth RWAs and CMGs provide means for adjusting the spin speed of the rotor. In\nthe case of the CMG, the goal is generally to hold the spin-speed constant, at a speed\nthat is traditionally about 6000 rpm. Some smaller devices and next-generation\nCMGs may feature even faster spin speeds, perhaps tens of thousands of rpm.\nIn most cases, CMGs include an integral feedback loop to perform this function.\nSo, the user need only command the desired spin speed. Spin loops\u2019 compensation\nusually includes a free integrator, allowing them to offset the effects of spin bearing\ndrag, both Coulomb and viscous.\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_8\n\n187\n\n\n\n188 8 Inner-Loop Control of Momentum Devices\n\nDuring normal operation of a CMG, various influences cause the measured spin\nspeed to vary. For example, the spin bearings exhibit an increase in drag torque\nwhen exposed to radial loads, such as the forces that result when the CMG is\nproducing output torque. This additional drag reduces the rotor speed. Another more\nsubtle example results because the rotor spin speed is measured not relative to an\ninertial reference, but rather with respect to the gimbal housing, which moves with\nthe spacecraft. Imagine rotating the gimbal 180?, thus imparting momentum to the\nspacecraft in the direction opposing spin. The rotor speed is now measured relative\nto a body moving in the opposite direction, and thus speed appears to increase.\n\nWhile these changes in speed are small, and in some cases, cyclic, the spin-speed\ncontrol loop responds to them nevertheless. It is therefore advisable for the spin\nloop to be very low in bandwidth, for example, 0.1 Hz or less. A high-bandwidth\nspin loop would expend considerable power attempting to follow a specific speed\nprecisely, when this is not really necessary.\n\nCMG users often impose a tight specification on how well the spin loop should\nhold speed, and this is often because they have assumed in their steering-law design\nthat the rotor speeds are constant. The user of a CMG array should recognize that the\nspin system draws additional power to hold speed during periods when the array is\nmaneuvering the vehicle. If power is a concern, the user should relax the spin-speed\ncontrol specification, permitting variation in spin speed at these times. By allowing\nthe rotor\u2019s speed to vary by even a few percent, the spin system power can be limited\nto a specified value, with the result that the CMGs recover more slowly after a period\nof active maneuvering. A good steering-law design accommodates such variations\nin speed by taking into account the instantaneous rotor speed in computing CMG\ncommands, resulting in no appreciable degradation in performance. It\u2019s clearly an\nadvantageous trade: lower power for a little more algebra.\n\n8.1.2 RWA Spin Speed\n\nMost reaction wheels accept a torque command, which is mapped by the motor KT\nto a spin-motor current command. The RWA electronics produce this current using\na high-bandwidth current loop, on the order of kHz. The current loop uses integral\ncontrol to overcome significant motor back-emf and variations in resistance with\ntemperature, leaving only variations in the motor KT as the primary error in motor\ntorque. The rotor speed changes as a result of the accumulation of momentum while\nthese torques are applied, but most RWA applications treat momentum as a by-\nproduct, where the primary action of the device is to produce torque.\n\nThe biggest drawback in operating an RWA in this manner is the error introduced\nby bearing friction. Friction torques act on the rotor and react on the spacecraft in\nexactly the same way as motor torques. Therefore, any friction torque represents an\nerror between the commanded motor torque and the actual torque delivered to the\n\n\n\n8.2 Gimbal Rate Loops 189\n\nspacecraft. The Coulomb drag of the bearings can be estimated by the flight software\nand added to the command, but near zero speed the friction changes rapidly and is\ndifficult to compensate. This difficulty motivates spacecraft RWA-array steering-law\narchitectures that keep the speeds away from zero as much as possible.\n\nSome RWAs include an integral speed-control loop. This is a useful way to\nmitigate the effects of friction. Thanks to conservation of angular momentum,\nthe change in rotor momentum is equal in magnitude but opposite in direction to\nthe change in momentum imparted to the vehicle. Since torque ? D dH=dt and\nthe rotor inertia is well known, it follows that the change in rotor speed provides a\nprecise measurement of the integrated torque applied to the spacecraft, regardless\nof whether it arose from the motor or friction torque.\n\nTherefore, regardless of whether feedback control is integral to the RWA\nhardware or realized on the spacecraft side, the preferred approach is to integrate\nthe desired torque, scale (by inertia) to the expected rotor speed, and close a\nspeed loop to produce this calculated speed. A torque feedforward can also be\nemployed to improve performance. Recognizing that the speed command to this\nloop is often characterized by ramping up and down at the maximum torque, the\nloop compensation should be chosen such that minimal error results from a ramp\ncommand.\n\nWe recognize that an RWA speed loop is a hierarchical \u201cinner loop\u201d in the\nforward path of the ACS. As such, the bandwidth of the speed loop can impose\na limit on the available ACS bandwidth. However, in general, this is not an issue\nwith typical ACS bandwidths at tenths of a Hz, and speed loops at a few Hz. These\nbandwidths are far enough apart that the control loops are uncoupled.\n\nMore sophisticated methods of RWA control and friction mitigation exist. In\ngeneral, the performance of these control approaches is limited by the quality of\nrotor-motion feedback available. These limitations must be taken into consideration\nin specifying an RWA if loops are to be closed around it via spacecraft bus\nelectronics.\n\n8.2 Gimbal Rate Loops\n\nIn the case of CMGs, the motion of the gimbal(s) is also regulated with feedback\ncontrol. As the output torque of the CMG is gyroscopic (! ? hr), the precision with\nwhich the scalar gimbal rate, P?, is controlled directly impacts torque performance.\nThis impact on precision motivates virtually all CMGs to feature integral gimbal\nrate loops and to respond to gimbal-rate commands. The design of these loops can\ninfluence the design and performance of the ACS, and of the spacecraft itself.\n\n\n\n190 8 Inner-Loop Control of Momentum Devices\n\n8.2.1 Errors Mitigated by Gimbal Rate Loops\n\nOne of the key motivations for closing gimbal rate loops is the need to manage\ngyroscopic precession-induced motor torques. When the vehicle is in motion, the\ngimbal motor must apply sufficient torque to prevent the gimbal from precessing,\nand this torque can be large (see Sect. 3.2.5). Indeed, for direct-drive CMGs (no\ngears between the motor and the gimbal axis), it is common for the precession due to\nvehicle rate to drive the design of the gimbal motor, requiring many times the torque\nneeded for gimbal acceleration alone. This large \u201cdisturbance\u201d must be attenuated\nby an assertive loop, usually including a free integrator to increase gain at low\nfrequencies and minimize rate error. Gimbal rate loops usually have bandwidth in\nexcess of 10 Hz. In contrast, ACS loops for spacecraft with such CMGs are unlikely\nto include feedback control with a bandwidth above a few Hz.\n\nIn addition to rejecting the precession disturbance, gimbal rate loops also\nmitigate forward-path errors such as motor ripple, cogging, and accuracy. The rate\nperformance of the CMG thus approaches the performance of the gimbal rate sensor.\nHistorically, gimbal rate has been measured by a precisely wound tachometer. This\nelectromagnetic device is essentially a motor/generator that produces a back-emf in\nresponse to rotor rate. The device must be commutated, and traditionally the low\nvoltage back-emf must be amplified with high-quality circuitry to avoid apparent\nrate offset due to offsets in the amplifier. With the advent of digital electronics, some\nCMGs have employed digital encoder technology to measure both gimbal angle and\nrate with high precision.\n\n8.2.2 Impact on Vehicle Structure\n\nIn the design of positioning servos in general, a common mistake is to assume\nthat the positioner itself is rigidly fixed and that only the body being positioned is\nmoving. We understand that when the torque motor acts on the gimbal, it also reacts\ninto the structure that attaches the motor stator to \u201cground.\u201d In our case, \u201cground\u201d is\nthe interface that mounts the momentum device to the spacecraft bus structure.\n\nOf concern is the case illustrated in Fig. 8.1, where the spacecraft interface\nappears as \u201clocal\u201d structure, connected through compliance to the rest of the vehicle.\nAn example of such a condition might be a CMG mounted to a flat plate, or deck,\n\nFig. 8.1 A compliant spacecraft interface\n\n\n\n8.2 Gimbal Rate Loops 191\n\nFig. 8.2 Hierarchy of control\n\nwith local compliance. When the CMG is mounted to such a plate, its inertia lowers\nthe frequency of bending modes in which this plate participates.\n\nWhen the motor acts/reacts into the gimbal/local inertia, both bodies move. As\na result, any structural resonance appears in the open-loop response of the gimbal\nrate loop. If the structural frequency is near the rate-loop crossover, the closed-loop\nsystem may be unstable. Spacecraft designers should recognize the importance of\nensuring that CMG mounting interfaces are stiff and well coupled to the bulk of the\nspacecraft. This is particularly important when the CMGs are direct-drive, where\nthe effect is more pronounced than in the case of a geared transmission.\n\n8.2.3 Bandwidth Considerations\n\nThe CMG gimbal rate loop typically lies within a hierarchy of nested loops, as\nillustrated in Fig. 8.2.\nAs in all such hierarchical systems, loop stability demands frequency separation\n(a factor of 3 or 4 is typical) between the bandwidths at each level. This separation\nis necessary because the closed-loop phase rolloff of each level is evident in the\nopen-loop response of the next outer loop, compromising its phase margin.\n\nFor example, to support an ACS with a position bandwidth of a few tenths of\na Hz, the ACS rate bandwidth might be around 1 Hz. If the steering technology in\nuse closes any loops (for example, on gimbal angle or momentum state), it would\nrequire a bandwidth of a few Hz, and the gimbal rate loop would therefore need\nbandwidth in the vicinity of 10\u201315 Hz. This bandwidth is typical for many CMGs.\nThere is little margin in this strategy, and thus it is important for the ACS designer\nto be aware of the bandwidth of the CMG hardware, as well as any closed-loop\ndynamics in the steering technology chosen. These matters can directly influence\nthe ACS design, or, alternatively, the ACS design might drive CMG performance\nrequirements.\n\nThese design interdependencies might lead one to expect that the CMG rate-loop\nbandwidth would simply be over-specified, to reduce risk. The problem here, of\ncourse, is the one discussed earlier. If the CMG bandwidth is increased, its stability\nis threatened by higher-frequency structural modes. Stabilizing it would flow to a\nneed for stiffer and therefore heavier spacecraft structure.\n\n\n\n192 8 Inner-Loop Control of Momentum Devices\n\n8.2.4 Friction and ACS Limit Cycling\n\nThe ball bearings used to support the CMG gimbal exhibit friction characteristics\nthat are generally categorized based on their physical mechanism. Viscous friction\nopposes gimbal rate, and the torque increases nearly linearly with rate. Coulomb\nfriction is \u201crunning drag,\u201d which has a fairly constant torque over a wide range of\ngimbal rates, but always opposes the gimbal rotation. It therefore reverses polarity\nabruptly as gimbal rate passes through zero. Static friction, or \u201cstiction,\u201d causes a\ntorque greater than the running drag to be required to get the gimbal moving again\nonce it has stopped during a zero-rate crossover. Finally, when the gimbal is \u201cstuck\u201d\nat zero rate, a \u201cpre-breakaway stiffness\u201d is observed. So, the axis is never completely\n\u201cstuck.\u201d\n\nAll of this nonlinear behavior is generally negligible when the CMGs are used\nfor agile slews requiring large torque. The large gimbal-rate commands quickly\novercome the behavior near zero rate, and the viscous term is very small for the\nlow rates typically associated with gimbals.\n\nOf greater concern is the behavior when the vehicle is under precise control at a\nconstant rate. When spacecraft accelerations are low, the CMG gimbal rates are near\nzero, and friction nonlinearities become apparent. When a rate reversal is required,\nthe free integrator in the gimbal rate-loop compensation must have time to \u201cwind\nup\u201d enough torque to overcome static and Coulomb friction before the gimbal can\nrotate. And since the rate command is very small, the rate error is small, and the\nintegrator ramps slowly. In a worst-case scenario, this apparent deadband behavior\ncan result in a limit cycle in the ACS at a low frequency and amplitude.\n\nIn general, high-precision, preloaded ball bearings do not exhibit excessive static\nfriction, but the reversal of the Coulomb friction is always present. The CMG\nmanufacturer should be able to provide information on this behavior or include it in\na dynamic model of their rate loop (for example, as a Dahl friction model). Armed\nwith this information, the ACS designer should check for nonlinear limit cycles\nearly in the design process. A describing-function analysis of the system is the best\ntool for determining both margin from limit cycle and strategies for modifying the\ndesign if necessary. Time-domain computer modeling can be used to validate the\nresults of the analysis.\n\n8.3 Chapter Summary\n\nThe inner loops of momentum devices can influence the spacecraft design. Each of\nthe spin and gimbal loops commonly found is discussed. Choices surrounding this\ndiscussion can influence system power, performance and stability. Early decisions\nranging from how the momentum devices are specified to the design of the\nspacecraft structure near the momentum devices are advised.\n\n\n\nChapter 9\nMotors in Space\n\nAll momentum devices require a spin motor of some type to actuate the rotor\nspin axis. CMGs also require a motor on the gimbal axis. The torque and speed\nrequirements for the gimbal motor design are typically much different from those\nfor the rotor. These issues, among others, motivate the following discussion of\nmotors commonly employed in spaceborne momentum devices. The objective of\nthis chapter is to familiarize the reader with some of the key considerations with\nthe goal of informing the analysis, implementation, and operation of momentum-\ncontrol systems and the spacecraft that use them. Motor design is a broad specialty\nfield that demands much more depth than offered here.\n\n9.1 Motor Technology\n\nSeveral types of motors find application in space products. AC induction motors\ncan provide a simple solution for constant-speed applications where AC power is\navailable, for example mechanical rate-sensing gyroscopes found in many aircraft.\nThey find no application in momentum systems, however. Even for CMGs, in which\nthe spin speed is held constant, that constant speed needs to be adjustable on orbit\nto provide the option of mitigating excitation of structure vibrations.\n\nDC motors, both brushed and brushless, are found in space applications.\nHowever, the brushed motor, while simpler, is far less preferable for long-life\napplications. Brushes are a source of debris, EMI-producing arcing, and other\nproblems. The brushless DC motor has a permanent-magnet rotor and two- or three-\nphase coils on the stator, as illustrated in Fig. 9.1.\n\nWhen the coils are energized in sequence, a rotating field is produced that\ninteracts with the field of the rotor to produce torque. Commutating the stator\nwindings requires a position measurement and more complex drive electronics\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_9\n\n193\n\n\n\n194 9 Motors in Space\n\nFig. 9.1 Two-pole,\ntwo-phase brushless DC\nmotor\n\nFig. 9.2 Two-pole, three-phase brushless DC motor showing commutation\n\nthan do brushed motors. High-speed motors are often commutated discretely using\nHall-effect devices to switch the appropriate coils on or off at the appropriate times,\nas shown in Fig. 9.2.\n\nCommutation methods like this are most common for spin motors. Lower-speed,\nhigher-precision applications use an actual rotor-angle measurement, such as from\na resolver or encoder, and the coil currents are commutated sinusoidally to produce\na nearly constant torque. Most CMG gimbal motors use this technology. Brushless\nDC motors tend to yield the most efficient and lightest design for typical space\napplications. A design based on brush motors would be suitable only for low-cost,\nshort-duration technology-demonstration missions and even then would likely not\nbe fully traceable to an operational space system.\n\nStepper motors are a special case of the brushless DC motor. In this case, rather\nthan commutate the stator field to continually \u201clead\u201d the rotor field, a stator coil is\n\n\n\n9.1 Motor Technology 195\n\nenergized, and the rotor is allowed to pull (opposite magnetic poles) into alignment,\ncome to equilibrium, and stop. This action constitutes a \u201cstep.\u201d Then the next coil\nin sequence is activated, resulting in another step. Designed to allow this to happen\nquickly, a stepper motor can then be operated without commutation as such; no\nposition measurement is required. The distance travelled can be precisely controlled\nby counting the number of \u201csteps,\u201d and the motor is designed with a large number\nof magnetic poles for precise positioning. This simple scheme has found application\nin many space devices, including some CMG gimbal drives. However, this type of\noperation produces a broad vibration spectrum and is fairly power inefficient. The\ndisturbance from such a spectrum is problematic because it is not readily attenuated\nwith simple vibration-isolation techniques such as passive spring/damper devices.\n\nOne additional technology that is found in these devices is the \u201cvoice coil,\u201d\nor \u201cironless armature\u201d motor. A voice coil derives its name from its similarity\nto an amplified, electromagnetic audio speaker. This type of motor is used for\nhigh-speed applications, in which the separate windings must be commutated very\nquickly. As the time-varying stator magnetic fields of a conventional motor increase\nin frequency, problems arise with eddy currents that cannot be addressed using\nconventional laminations. Rather than exploiting the interaction of two magnetic\nfields, a voice-coil design directly uses the Lorentz force between a field and a\ncurrent. As shown in Fig. 9.3, windings on an insulated bobbin are placed into the\npermanent magnet field of the rotor and commutated to obtain the necessary torque.\nThe rotor design produces a uniform radial magnetic field, and coil current flows\nvertically through the field. The result is force directed out of the page and thus\nconstitutes torque about the centerline of the motor.\n\nThe rotor field is constant in the rotor frame of reference; however, it is still\nrotating rapidly with respect to the stator. Care must therefore be taken to minimize\nleakage of the rotor field, and any material that can conduct eddy currents must be\nmoved well away from the rotor field. For very high-speed motors, the care with\nwhich eddy-current losses are managed by design is critical to minimizing motor\ndrag, which can easily result in excessive heat generation and power expenditure.\nAnother key consideration in this type of motor is the thermal design. Unlike\n\nFig. 9.3 Ironless armature\nspin motor\n\n\n\n196 9 Motors in Space\n\nother motors, the heat dissipated in the motor coils is being conducted through a\nbobbin made of a non-conductive material. In general, materials that do not conduct\nelectrical current also do not conduct heat well. Thus this design must take particular\ncare to provide adequate heat-conduction capability.\n\nRegardless of the technology chosen, motors for space must be designed with the\nsame concerns as any device for space. These concerns include avoiding materials\nthat outgas in a vacuum, emphasizing conduction in thermal management, and\nrobustness in the presence of launch vibration, particularly where small-gauge\nwiring is implemented. For these reasons, choosing an \u201coff-the-shelf\u201d motor is\nill advised. Motors for space must be specified for the uniquely demanding space\nenvironment.\n\n9.2 Sizing a DC Motor\n\nThis section offers general insights into the nature of motor sizing. This information\nis useful in understanding the general trends and design dependencies, and rapidly\nobtaining a rough idea of motor sizing for use in CMG design trades. For specific\nspace-systems design, the best source of assistance is likely vendor data sheets and\napplication engineers.\n\nMotor sizing consists of two largely separable parts. One part is the mechanical\ndesign of the motor, i.e. the diameters and axial lengths of the rotor and stator, as\nshown in Fig. 9.4. These parameters size the permanent magnets, the amount of\niron, and a weight allocation for copper based on the envelope available. Instead of\n\nFig. 9.4 Brushless DC motor mechanical design\n\n\n\n9.2 Sizing a DC Motor 197\n\ngoing into detail on the trades available between length and diameter, this discussion\nsimply assumes a typical ratio. The sizing of the motor determines the amount of\ntorque it can produce.\nSecond, the copper allocation is detailed into a coil design by the choice of the wire\ngauge and number of turns. The motor torque constant KT (ft-lb per amp) is affected\nby this choice.\n\nThere are, perhaps, as many ways to design a motor as there are designers. Each\nvendor has its own unique approach to the details. However, the laws of physics\nallow us to get the big picture without going into much detail. For example, we can\nestimate the power dissipation and weight of a motor knowing only the required\ntorque. This is because the torque required directly influences the magnetic circuit\ndesign. Motors are often scored by their \u201cmotor constant,\u201d known as KM , which\nis expressed in ft-lb/\n\np\nW. This constant expresses the amount of torque the motor\n\ncan produce for a given amount of power dissipated as heat. KM depends upon the\nmagnetic flux density, pole cross-sections, etc. It can be increased (thus dissipating\nless power) by increasing the weight of the motor (bigger magnets, larger poles),\nand, in general, this increase in KM scales nearly linearly with weight. Therefore,\nwe can expect that the \u201cKM density,\u201d KMD, in ft-lb/\n\np\nW per lb would be a constant,\n\nover at least a fairly wide range of designs. For the class of motors typically found\nin momentum devices, a rule of thumb would be KMD D 0:07 ft-lb/\n\np\nW per lb. This\n\nrule assumes high quality magnets and optimized, unpackaged designs.\nAnother consideration in space motor sizing is the ability to conduct dissipated\n\nheat out of the device. Conventional wisdom has it that a certain number of Watts\ncan be effectively transferred out of a motor (without excessive temperature rise)\nper pound of motor. In a small motor, less heat dissipation can be managed than a\nlarger motor. This \u201cpower density,\u201d KPD, is expressed in Watts per pound. For the\nclass of motors typically found in momentum devices, a rule of thumb would be\nKPD D 8W/lb.\n\n9.2.1 Sizing a Brushless DC Motor\n\nGiven these two constants KMD and KPD as guidelines, we can approximate the\nweight and power of a motor necessary to apply a particular torque. Using nothing\nmore than dimensional analysis, we find that the weight of the motor must be:\n\nW D\n?\n\n?\n\nKMD\np\n\nKPD\n\n\t2=3\nD\n\n0\n\nB\n@\n\nft-lb\n\nft-lbp\nW lb\n\nq\nW\nlb\n\n1\n\nC\nA\n\n2=3\n\nD ?lb3=2?2=3 D lb (9.1)\n\n\n\n198 9 Motors in Space\n\nand the power must be:\n\nPheat D\n?\n?KPD\nKMD\n\n\t2=3\nD\n \n\nft-lb Wlb\nft-lbp\nW lb\n\n!2=3\n\nD ?W3=2?2=3 D W (9.2)\n\nIn the above, the power being calculated is the i2R power dissipated in the motor\ncoils as heat. The total electrical power drawn at the terminals includes mechanical\npower delivered to the load.\n\nEquations (9.1) and (9.2) show that both weight and power increase as the 2/3\npower of the required torque. Furthermore, neither of these quantities varies with\nhow the coil is wound. These principles allow us to quickly approximate the cost\nof producing torque. If this cost is unacceptable, in some cases gearing can be\nemployed to reduce the torque required.\n\n9.2.2 Electrical\n\nIn the mechanical design equations above, an allocation is included in the weight for\nthe copper wire. Next, we must take this copper and partition it into wire size and\nnumber of turns. This allocation dictates the resistance of the coil and the torque\nconstant KT (ft-lb/A). The fact that the same motor can be wound with different\ncoils is evident in motor catalogs, where each motor size is available with different\n\u201cdash numbers,\u201d characterized by different KT values.\n\nIf expressed in metric units of Nm/A, KT has the same numerical value as the\nback-emf constant KB, in Volts per rad/s. The reason for this identity derives from\nfundamental motor physics and is beyond the scope of this discussion. But as a\nresult, increasing KT has two direct effects. An increase means that it takes less\ncurrent to produce a given torque, but it takes more voltage to overcome back-emf at\na given speed. Generally, a given application has limited bus voltage. Therefore, the\nlimit drives the decision. Starting from the spacecraft power bus, we must subtract\nthe voltage drops related to power conditioning, drive transistors, wiring harness,\netc. to arrive at the terminal voltage seen by the motor. In order to apply rated torque\nat rated speed, this available voltage must comply with\n\nV > KB! C iR D KB! C ?\nKT\n\nR D KB! C ?KT\nKM2\n\n(9.3)\n\nThe previous equation uses the relationship below, which can be verified by\ndimensional analysis.\n\nR D\n?\n\nKT\nKM\n\n\t2\n(9.4)\n\n\n\n9.2 Sizing a DC Motor 199\n\nIn Eqs. (9.3) and (9.4), KM is the motor constant itself, not the KM density KMD\ndiscussed earlier. This can be evaluated after the mechanical design phase because\nthe weight is known.\n\nUsing Eq. (9.3) above, we choose a KT that allows operation with the given bus\nvoltage. This is the step where the required motor speed comes into play, as the back-\nemf is usually the dominant driver in required voltage. As a larger KT implies less\ncurrent to get the same torque, we might think increasing it would reduce power; but\nthis is not the case. The resistance also changes, such that the power dissipated in the\nmotor remains constant at the value derived in the previous section. Nevertheless,\nthere are distinct advantages to a motor design with less current. Lower current\nsimplifies the drive electronics, reduces power dissipation throughout the electronics\nand harnessing, reduces the weight of cabling, reduces EMI, etc. Therefore, the\nlargest possible KT should be chosen. If the motor requires high torque and high\nspeed, the current increases, which drives the electronics design, and a point is\neventually reached where the motor-design engineer must push back and require\na higher system bus voltage. Machines with high torque and speed, i.e., mechanical\npower, cannot be expected to work efficiently, if at all, at low voltage.\n\nOnce KT has been chosen, it is a simple matter to evaluate the coil resistance\n[from Eq. (9.4)], the current (from the definition of KT ), and any remaining\nparameters of interest. From this simple approach, we know enough about the motor\nto allocate a preliminary weight budget and flow requirements to the electronics\ndesign. We can even estimate the motor volume by assuming a reasonable ratio of\niron and copper, the dominant weight drivers. To proceed beyond this point, it is\nadvisable to work with a motor vendor applications engineer.\n\n9.2.3 Numerical Example\n\nExample 9.1. Suppose we are given the following requirements: design a\nmotor that must produce 0.75 ft-lb at 30 rad/s. Assume that 20 V is available\nat the terminals of the motor. Assume KMD D 0.07 ft-lb/\n\np\nW/lb, and KPD D\n\n8 W/lb.\n\nW D\n?\n\n?\n\nKMD\np\n\nKPD\n\n\t2=3\nD\n?\n\n0:75\n\n0:07\np\n8\n\n\t2=3\nD 2:4 lb (9.5)\n\nPheat D\n?\n?KPD\nKMD\n\n\t2=3\nD\n?\n0:75.8/\n\n0:07\n\n\t2=3\nD 19:4W (9.6)\n\nKM DKMDW D 0:07.2:4/ D 0:17 ft-lbp\nW\n\n(9.7)\n\n(continued)\n\n\n\n200 9 Motors in Space\n\nExample 9.1 (continued)\nNext, we solve Eq. (9.3) for KT , getting\n\nKT D V4:448.12/\n39:37\n\n! C ?\nK2M\n\nD 0:3 ft-lb\nA\n\n(9.8)\n\ni D ?\nKT\n\nD 0:75\n3\n\nD 2:5A (9.9)\n\nR D\n?\n\nKT\nKM\n\n\t2\nD\n?\n0:3\n\n0:17\n\n\t2\nD 3:1? (9.10)\n\nNote that the heat power is i2R D 2.522 ? 3.1 D 19.4 W, as expected. The\ntotal power drawn by the motor when delivering the spec torque at the spec\nspeed includes both the power dissipated as heat, and the mechanical power\ndelivered to the load (torque times speed, in appropriate units). So,\n\nPTotal D 19:4C 0:75\n?\n4:448.12/\n\n39:37\n\n\t\n\n30 D 50W (9.11)\n\nIf we consider this result from the motor terminal perspective, the total power\nshould be voltage times current D 20 ? 2.5 D 50 W.\n\nIf we now consult some vendor data sheets for high quality brushless DC\nmotors, we should be able to find designs that are similar to this. Bear in\nmind that this approach provides only a rough approximation. In the final\ndesign, one must include margins for manufacturing tolerances, variations\nwith temperature and life, etc.\n\n9.3 Chapter Summary\n\nThis chapter discussed the various motor technologies found in spaceborne momen-\ntum systems. Simple equations were developed for rough sizing studies and rules of\nthumb for key constants were provided along with a numerical example. Detailed\nmotor design should always be done in consultation with a motor vendor.\n\n\n\nChapter 10\nModeling Simulation and Test Beds\n\nGround-based validation of spaceborne momentum control systems and the attitude\ncontrol systems that depend upon them offers a unique set of challenges. Computer\nsimulations must include a variety of nonlinear phenomena found in momentum\ndevices, which fundamentally limits the way these simulations can be architected.\nAnd because momentum systems rely on the conservation of angular momentum for\nproper operation, hardware-in-the-loop test facilities must reproduce the dynamics\nof a free body with great precision.\n\n10.1 Math Modeling and Computer Simulation\n\nChapter 4 and Appendix A discuss the equations of motion for a spacecraft\nwith an onboard momentum system. These equations can be of great value in\nunderstanding the physics of the problem, evaluating candidate control strategies,\nand other steps in the spacecraft-design process. As always in the development\nof such equations, various simplifications keep the scope of the development\ntractable. These simplifications include, for example, that all bodies are rigid, that all\nconstraints are infinitely stiff, and that all rigid-body degrees of freedom are free\nand frictionless. When we reach the point in a development project where a time-\ndomain computer simulation is justified, we must go beyond such simplifications.\nThe intent of the effort is generally to create a tool that can evaluate the performance\nand/or stability of an intended design in the presence of real-world imperfections not\nincluded in these simple equations of motion. There are many aspects of momentum\nsystems that directly impact overall vehicle performance that a simulation should\naddress, for example:\n\n\u2022 Friction, gear backlash, driver saturation, and other nonlinear effects\n\u2022 Compliance in bearings and other joints between bodies\n\u2022 Flexibility of the elements of the MCS, and the spacecraft itself\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0_10\n\n201\n\n\n\n202 10 Modeling Simulation and Test Beds\n\n\u2022 Ripple and cogging effects in motors and other electromagnetics\n\u2022 Induced vibrations from rotor balance and bearing eccentricities\n\u2022 Gyroscopic coupling between flexible modes that can change both their\n\nfrequency and mode shape\n\nThe following sections offer a proven approach to the architecture of such a\nnonlinear simulation. The examples shown depict MATLAB/Simulink models.\nHowever, the basic principles are suitable for any general-purpose computer-\nmodeling environment. These Simulink diagrams closely resemble general feed-\nback-control block diagrams; so, a reader familiar with feedback controls ought to\nbe able to interpret them regardless of experience with MATLAB.\n\n10.1.1 First Principles\n\nWhen introduced into the model, many of the effects discussed above appear at the\ninterfaces between rigid bodies and violate some of the simplifying assumptions of\nChap. 4. As a result, those equations of motion cannot be used as the cornerstone of\na precise time-domain model. Fortunately, it is not necessary to go back and attempt\nto include these effects in the derivation. Today\u2019s computers are fast enough to solve\nall of the complex interactions between bodies \u201con the fly,\u201d if we simply organize\nthe model to allow it. Taking advantage of this capability requires a paradigm shift in\nwhich we abandon the instinct to perform complex multibody derivations and code\nthe results. Instead, we should model each body separately, in a way that presumes\nnothing about what it will be connected to. Then we model the connections among\nthe bodies, presuming no knowledge about what they are connecting. This is the\nmethod of \u201cfirst principles\u201d modeling. In fact, assembling such a model is generally\neasier and faster because it tends to be modular. And because each of the building\nblocks is a fairly simple model, the incidence of human error is reduced, along with\ndebug time (or the risk of incorrect results). The method of first principles can be\nemployed for models of any fidelity. For example, a component can be modeled as a\nrigid body with one degree of freedom, or three, or six, depending on the rigid-body\nconstraints known to be present. Or it could be modeled as a flexible body with\narbitrarily many of degrees of freedom. With some care in bookkeeping, models\nwith differing fidelity can be simply dropped into a simulation depending upon the\nneeds of the analysis.\n\n10.1.2 What Is the Question?\n\nOne of the most common mistakes in creating a computer model of a system is doing\nso without a clear understanding of its purpose. A model is created to answer certain\nquestions, and these questions must be allowed to dictate the scope and fidelity of\n\n\n\n10.1 Math Modeling and Computer Simulation 203\n\nthe model. Today\u2019s computers are fast, but there are still practical limits. Here are\nsome examples of how the question drives the model:\n\n\u2022 A momentum system model is to be created as part of a spacecraft model to\nstudy slew times through day-in-the-life representations of targeting scenarios.\nThis model needs to run hours of simulation time. So, in the case of current\ndesktop computers, it is not practical for the integration step time to be a\nmicrosecond, or for bodies to have thousands of degrees of freedom. The runs\nwould simply take too long. Phenomena producing poles or action at frequencies\nwell beyond the bandwidth of the ACS under study should be neglected (e.g.,\nabove 20 Hz). Things that might have a direct effect on slew times like limits\non rate, acceleration, jerk, actuator current, etc., should be included. Things that\nbear more on inner-loop stability and fine performance can be neglected.\n\n\u2022 A momentum system model is to be assembled to verify the stability of the\ngimbal rate loop design in a CMG system. In this case, a run of only a few\nseconds is more than enough, but higher frequencies are involved. If, for example,\na discrete-time loop is closed in a gate array, the sample time of the loop might\nbe 10 kHz and has to be modeled. In general, subtleties like motor current\nloops and commutation can be neglected. Interactions with flexible modes of\nthe surrounding structure are possible, and therefore body flexibility should\nbe included. Effects of nonlinearities like friction and backlash can impact\nstability. Certain saturation limits might be important, but many can be neglected\nsince stability analyses are usually performed in the domain of \u201csmall signals.\u201d\nSources of vibration are forcing functions but do not directly affect loop stability.\nTherefore, they can be neglected.\n\n\u2022 A model is to be assembled to verify that a high-speed three-phase wye spin-\nmotor drive system will function properly at the rated speed. In this case,\nthe model must incorporate the motor-coil inductance, pulse-width modulator,\ncommutation, and current loop. We are studying sub-microsecond phenomena,\nbut simulating only a handful of commutation cycles is enough to determine if\nthe driver is working. At these frequencies the loops closed around the motor, and\neven the body flexible modes are so slow as to be negligible. So, we can focus\nonly on the motor.\n\nThese examples illustrate that two key aspects of a simulation should be determined\nby the question being asked. First, the fidelity of the model: what degrees of freedom\nand phenomena must be included? The second aspect is the integration time of the\nmodel: what frequencies are important? A day may come when computers are so\nfast we can just model everything. But for now, we must use engineering judgment\nto consider these questions carefully.\n\n\n\n204 10 Modeling Simulation and Test Beds\n\n10.1.3 Modularity\n\nFrom the discussion in the previous section, one might be quick to conclude that the\nwide range of possible questions will result in the creation of many different models.\nIndeed, this is often the case. However, in today\u2019s reality of limited resources,\nit behooves us to be efficient and try to minimize such replication. One of the\nmost compelling reasons for doing so is configuration control. At the same time\nthese simulations are being assembled and used, the hardware design itself is often\nmaturing. When changes happen, it becomes a logistical nightmare to maintain\na large number of separate models in lockstep. But the penalty for not doing so\nis different teams on a spacecraft program all analyzing different versions of the\ndesign, likely leading to errors and delaying the completion of the work. The\nsolution to this dilemma is to construct modular building blocks with varying levels\nof fidelity, so that all of the different models on a program can be assembled from\nthe same blocks. When a change comes, the affected blocks can be updated in\na common library and will flow to the various analyses as they are performed.\nModeling by first principles facilitates modularity because each \u201cblock\u201d is modeled\nwithout knowledge of the rest of the model. All that is necessary is some initial\nagreement on interfaces and architecture.\n\n10.1.4 Choices of States\n\nConsider a simple example of two single-degree-of-freedom masses connected by\nparallel spring and damper elements. Intuitively, we understand that this system\nhas four states: the rate and position of each body. The block diagram of Fig. 10.1\nillustrates how such a model might be connected. This topology can be substantially\nsimplified if, as is often the case, we do not really need to know the positions\nof some bodies. Consider the example of Fig. 10.2. In this case, the topology of\n\nFig. 10.1 Two-mass system\n\n\n\n10.1 Math Modeling and Computer Simulation 205\n\nFig. 10.2 Two-mass system feeding back rates only\n\nthe interconnecting bodies is much cleaner. The state in the spring model \u201cK=s\u201d\nintegrates the displacement between two bodies, rather than the position of the\nsecond body. In all other respects, the models are identical. In multibody models\nthat involve transformations among various coordinate systems, calculations of\nmoment arms from points of force application, etc., the need to perform all of\nthese calculations on both positions and rates as in Fig. 10.1 becomes a burden\non computational resources. We therefore find the approach of Fig. 10.2 to be a\nuseful means of constructing multibody models. Bodies take as inputs forces and/or\ntorques, and they output rates. Connections, such as springs and dampers, take\nrates as inputs and output the resulting forces and/or torques that the connections\nwill apply between the two bodies. Interconnecting these building blocks becomes\ntrivial. Body positions are integrated only when required as outputs.\n\n10.1.5 Polarities\n\nOne of the most common errors in modeling is incorrect signs on summations.\nBy adhering to a simple set of rules, these errors can be all but eliminated.\n\n\u2022 Positive forces or torques cause positive rate on a body.\n\u2022 Positive differential rate into a passive attachment causes negative forces/torques,\n\nsuch as in Hooke\u2019s Law, F D ?KX.\n\u2022 All forces/torques and rates add positively.\n\u2022 Minus signs are placed between an attachment model and one of the two bodies,\n\nsuggesting action/reaction. The choice is arbitrary in the sense that either can\nrepresent physically correct behavior. The choice merely defines whether positive\ndisplacement of the attachment is extension or compression.\n\nAn example of this approach is shown in Fig. 10.3. By definition, all feedback loops\nclosed in such an architecture have either one or three minus signs, indicating that\nthey are stable.\n\n\n\n206 10 Modeling Simulation and Test Beds\n\nFig. 10.3 Managing\npolarities\n\n10.1.6 Body Models\n\nAs above, the model of a single body takes as inputs forces and/or torques, and it\noutputs rates. The rigid body can be modeled with anywhere from one to six degrees\nof freedom, depending upon the needs of the model. Furthermore, the rotational\ndegrees of freedom can be constrained to small angles, or allowed to rotate freely.\nThe small-angle approximation allows independent state integrations on each degree\nof freedom according to ? D J?. Without this approximation, the model must utilize\nthe complete equations that capture the rotating-frame effects, i.e., Euler\u2019s Equation\nand the Transport Theorem, for all six degrees of freedom. Furthermore, if position\ninformation is required, it must be done using quaternion integration or some other\nnon-singular attitude representation. While it is customary to model the body as\nlocated at its center of mass, in its own body-fixed coordinate system, it is convenient\nto express the inputs (F; ? ) and outputs (rates) of the body model in the coordinate\nsystem of the attachments to other bodies or forces, at the points where they attach.\nThis is illustrated in Fig. 10.4.\n\nTransformations that include both the change in coordinates and the moment\narm from CG to attachment point can be expressed as a 6 ? 6 matrix, as shown in\nEq. (10.1).\n\n\"\nF\n?\n\n#\n\nCG\n\nD M\n\"\n\nF\n?\n\n#\n\nP\n\n(10.1)\n\nwhere:\n\nM D\n?\n\nI3?3 03?3\nR? I3?3\n\n? ?\nACGP 03?3\n03?3 ACGP\n\n?\n\n\n\n10.1 Math Modeling and Computer Simulation 207\n\nFig. 10.4 Reconciling forces and torques applied at an attachment point \u201cP\u201d\n\n1\n\n2\n48\n\nK+u\n\nK+u K+u\n\nK+u\n\n48 24\n\n24\n\n24\n\n24 24\n\n24\n\n24\n\n48\n\n48\n1\n\n2\n\nSum1\n\nhous.s\n\nhous.s\n\nhous.gb.out Hous R gbt\n\nhous.sb.out Hous R sb\n\n+\n+\n\n24\n\nHous FT sb\n\nHous FT gbt\n\nhous.sb.in\n\nhous.gb.in\n\nFig. 10.5 Example modular body model\n\nwhere: ACGP is the 3? 3 transformation from the P frame to CG frame, and R? is the\n3? 3 skew symmetric \u201ctilde\u201d matrix for the column vector R. Figure 10.5 shows an\nexample that illustrates the suggested approach to a modular body model. The block\nat the center of the model represents the vacuum housing of the four conventional\nCMGs in an array. The representation is a state-space linear system stored in the\nvariable \u201chous.s.\u201d Each housing is modeled at its center of mass as a small-angle\nrigid body with six degrees of freedom. Therefore, the state-space system has 24\ninputs, outputs, and states. This state-space model is simply the concatenation of\nmany 1=Ms and 1=Js integrations. This body attaches to the rest of the model at four\npoints: two spin bearings and two gimbal bearings. Each attachment is modeled with\nsix degrees of freedom, thus a total of 96 inputs. The 24 ? 48 input transformation\nmatrices are assembled by block concatenation of the M matrices from Eq. (10.1) for\nthe spin bearing and gimbal bearing attachment points, respectively. They transform\nthe forces and torques applied at each attachment point to the body frame at the body\nCG, where all such inputs are summed. Each of the 48 ? 24 output matrices is the\n\n\n\n208 10 Modeling Simulation and Test Beds\n\ntranspose of the analogous input matrix, and they transform the body CG rates to\nthe rates at each attachment point, in the attachment coordinate system. This simple,\nmodular construction is easy to assemble with minimal errors.\n\nIf the body is to be modeled as flexible, the recommended approach is to split\nthe body into rigid states and flexible states using modal superposition. The rigid\nstates can be modeled using either small- or large-angle attitude representations. The\nflexible model is obtained by a Craig\u2013Bampton [1] extraction from a NASTRAN\nmodel or other flexible representation, using the boundary nodes required for the\ninputs and outputs. For the flexible model, the transformations are buried in the\nNASTRAN model. The inputs are not summed but applied directly at the individual\nmodel nodes. The outputs of the flexible model should be at the same points, in the\nsame coordinate system as the rigid model, allowing the modal displacement rates\nto be added to the outputs of the rigid model.\n\n10.1.7 Attachment Models\n\nThe model of a single attachment should take as inputs the rates of the bodies being\nattached, and it should output forces and/or torques. The inputs and outputs should\nalready be in the chosen coordinates of the attachment model after conversion by the\nbody models, allowing quantities to be directly combined without further coordinate\ntransformation. The attachment can be modeled with anywhere from one to six\ndegrees of freedom, depending upon the needs of the model. For example, a simple\nhexapod isolator model might use only a single degree of freedom for each isolator:\nforce and displacement along the isolator axis. The key elements of this module are\nthe representations of K=s C D, and the differential rates using balanced negations\n(reaction) as discussed earlier in Sects. 10.1.4 and 10.1.5. To that basic model,\nwe then add any relevant nonlinear elements and other complications. Figure 10.6\nmodels the eight spin bearings (two each) in the four CMGs of an array. They are\nmodeled in six degrees of freedom, producing the 48 signals shown. Note that the\noutput forces and torques from the state-space representation of K=s C D (sb.s) act\non the rotor and react on the vacuum housing. In the state-space model sb.s, the\nvalues for K and D are zero for the bearing spin axes. Instead, the four spin torques\nare calculated at the bottom of the model and added through the \u201ctoRz\u201d matrix.\nThe spin axis torques include the spin motor itself, models of Coulomb and viscous\ndrag, and a model of how the drag varies when the bearings are subjected to load\n(such as during CMG torquing). For the spin bearings of a CMG, the Coulomb\ndrag is essentially a constant. However for RWA spin bearings (or CMG gimbal\nbearings) a better model is required. The Dahl friction model is recommended in\nthese cases (Dahl [2]). Finally, we see a model of spin-bearing disturbances due to\nbearing eccentricities. This model takes spin speed as input and produces a comb of\nsinusoids at various frequencies representing the bearing tones. Note that bearing\neccentricities are properly modeled as forced displacements across the interface\nbecause the bearings are so much stiffer than the surrounding structure that they\n\n\n\n10.1 Math Modeling and Computer Simulation 209\n\nD\nis\n\ntu\nrb\n\nan\nce\n\ns\nS\n\npi\nn \n\nS\npe\n\ned\n\nS\npi\n\nn \nS\n\npe\ned\n\ns\n\n1 3\n48\n\n48\n48\n\n48\n48\n\n48\n\n48\n\n48\n\n48\n\n48\n\nFT Drag\n\nto\nR\n\nz\nK\n\n*L\ni\n\n48\n+ +\n\n-1\n48\n\n48\n\n48\nR\n\nim\n R\n\nH\nou\n\ns \nF\n\nT\n s\n\nb\n\n2\n4 S\n\nen\nso\n\nr \nT\n\nru\nth\n\n31\n\nac\ntio\n\nn\n\nre\nac\n\ntio\nn\n\nsb\n.s\n\nsb\n.s\n\nac\ntio\n\nn\n\nre\nac\n\ntio\nn\n\n48\n\nR\not\n\nor\n R\n\n s\nb\n\nH\nou\n\ns \nR\n\n s\nb\n\n4\n\n4\n\n4\n\n4\n\n- -\n-\n\n+\n\n4\n\nLo\nad\n\nD\nep\n\nen\nde\n\nnc\ne\n\n4\n\n4\n\n4\n4\n\n-K\n-\n\nsb\n.d\n\nra\ng.\n\nvi\nsc\n\nB\nea\n\nrin\ng \n\nD\nis\n\ntu\nrb\n\nan\nce\n\ns\n\nK\nts K\n\nts\nS\n\npi\nn \n\nC\nur\n\nre\nnt\n\n4\n4\n\n2\n\nsb\n.d\n\nra\ng.\n\nco\nul\n\nF\nig\n\n.1\n0.\n\n6\nE\n\nxa\nm\n\npl\ne\n\nm\nod\n\nul\nar\n\nat\nta\n\nch\nm\n\nen\ntm\n\nod\nel\n\n\n\n210 10 Modeling Simulation and Test Beds\n\nmight as well be rigid constraints. Modeled in this way, the actual forces and torques\nthat arise from the eccentricity depend on the surrounding stiffness, rather than just\nthe bearings themselves.\n\n10.1.8 Integration\n\nUsing building blocks such as those illustrated above, very high-fidelity representa-\ntions of MCS-based attitude control systems can be produced using the architecture\ndescribed herein. Such a model can be easily reduced or enhanced when necessary\nby changing the fidelity of the blocks. In keeping with the modular philosophy,\nthe only place where any gyroscopic terms are found is in the model of the rotor\nbody. All resulting gyroscopic effects, such as CMG output torque amplification,\ngimbal back torque due to precession when the vehicle is in motion, augmented\ngimbal inertia, and coupling of flex modes simply arise as the simulation solves\nthe interactions among the modular bodies. The rotor can be modeled simply\nas a full, large-angle body that spins, but integrating the resulting motion would\nuse substantial computer resources without a meaningful increase in fidelity. In\ngeneral, it is advisable to use the simplifying assumption that the rotor spin speed is\nmuch greater than the angular velocity in other axes, allowing a simple gyroscopic\ncoupling matrix to be derived and combined with a simpler body model. In this\nmatrix, the rotor\u2019s angular momentum is taken to be the spin axis inertia times the\nrotor\u2019s spin speed. Numerical integration of the rotor\u2019s spin axis angular state need\nnot be performed.\n\n10.2 Hardware-in-the-Loop Test Beds\n\nWhile modern computer simulations offer more risk reduction than ever before,\nthere is no substitute for working with hardware. However, performing ground\ntesting of MCS-based attitude control systems is particularly challenging. Momen-\ntum systems rely on the conservation of angular momentum within a closed\nsystem to exchange momentum with the spacecraft and affect control torques. As\na result, hardware-in-the-loop test facilities must provide a surrogate spacecraft\nthat approaches a truly closed system, i.e., no external torques. The quality with\nwhich this objective is achieved is the single overriding characteristic that defines\nthe success of a test facility. Various technologies exist to simulate zero gravity,\nincluding such options as bouyant support or complex offloading mechanisms.\nBut the most popular is the air bearing. This technology, familiar to anyone who\nhas played air hockey, is simple, inexpensive, and can provide a nearly perfect\nzero-friction suspension. Sputnik launched in 1957. Explorer-1 launched in 1958.\n\n\n\n10.2 Hardware-in-the-Loop Test Beds 211\n\nFig. 10.7 Stanford\u2019s two-link manipulator arm (Image Courtesy of NASA)\n\nThe earliest air-bearing spacecraft simulator is documented in 1960. Truly these\nsystems have played an integral role in verifying space technology since the\nbeginnings of space exploration (Schwartz et al. [3]). Planar air bearings provide an\nideal test bed for simulating two-vehicle dynamics, with two translational degrees\nof freedom and one rotational. Control techniques for relative orbital maneuvers\nand formation flying, rendezvous and docking can be fully developed and tested\nprior to launch. An example of a planar test bed is the Two-Link Manipulator Arm\nin Stanford University\u2019s Aerospace Robotics Laboratory, shown in Fig. 10.7. The\nAir Force Research Laboratory (AFRL) has been using large spherical air-bearing\nspacecraft simulators since the late 1980s. One of the first of these simulators\nwas known as Advanced Structural Technology Research Experiment (ASTREX).\nASTREX, shown in Fig. 10.8, housed four large Honeywell CMGs and had a\nspherical air bearing capable of supporting approximately 15,000 lbs. The AFRL\nused it for studies in structural control and damping for spacecraft beam-director\npointing. Since its use on ASTREX, this air bearing has been used on multiple\nproject platforms such as the Flywheel Attitude Control and Energy Transmission\nSystem (FACETS) and the mini-Agile Multi-Purpose Satellite Simulator (mini-\nAMPSS) (see Chap. 6). The air bearing is currently being used to test state-of-the-art\nspacecraft fault detection and isolation algorithms as well as fault-tolerant control\ntechniques at the AFRL Space Vehicles Directorate at Kirtland AFB in New Mexico.\nSome test beds use rotational air bearings atop a planar carrier to achieve six degrees\nof freedom. An example of such a facility is Marshall Space Flight Center\u2019s \u201cFlight\nRobotics Laboratory,\u201d shown in Fig. 10.9. The lab has a 44?86 ft precision flat floor.\nThe Air Bearing Spacecraft Simulator used on the planar floor provides a 400 lb\npayload six degree-of-freedom motion via a floating spherical air bearing coupled\nwith a cylindrical lift. While such a sophisticated facility can enable certain specific\nexperiments, six degrees of freedom are not necessary for complete studies of an\nMCS-based attitude control system.\n\n\n\n212 10 Modeling Simulation and Test Beds\n\nFig. 10.8 AFRL ASTREX\nspacecraft simulator\n\n10.2.1 Precision Rotational Air-Bearing Systems\n\nRigid-body studies of MCS-based attitude control systems require only the three\nrotational degrees of freedom. Flexible behaviors can be incorporated in such test\nbeds if the moving components conform to the rules of gyrostats discussed in\nChap. 4. In any case, external torques must be limited to the greatest extent possible.\nThe scope of this problem is well understood. An important paper on the subject\nwas delivered by G. Allen Smith at the Role of Simulation in Space Technology\nconference held at Virginia Tech in 1964. Smith presented a description of several\nsystems, along with an overview of the torques which act on the rotor of an air\nbearing. Smith defined four classes of disturbance torques and listed particular\nsources for each group, as follows:\n\nI. Torques Arising from Platform\n\n\u2022 Static Unbalance\n\u2022 Dynamic Unbalance\n\u2022 Anisoelasticity\n\u2022 Material Instability (stress, temperature, humidity, evaporation)\n\n\n\n10.2 Hardware-in-the-Loop Test Beds 213\n\nFig. 10.9 MSFC\u2019s flight robotics laboratory (Image Courtesy of NASA)\n\n\u2022 Gravity Gradient\n\u2022 Equipment Motion (solenoids, relays)\n\nII. Torques from Bearing\n\n\u2022 Aerodynamic Turbine Effect\n\u2022 Exhaust Air Impingement\n\nIII. Torques from Environment\n\n\u2022 Air Damping\n\u2022 Air Currents\n\u2022 Magnetic Fields\n\u2022 Vibration\n\u2022 Radiation Pressure\n\nIV. Torques from Test System\n\n\u2022 Electrical Wire to Base\n\u2022 Mass Shift in Bearings and Loose Fits\n\u2022 Battery Discharge\n\u2022 Reaction Jet Supply Discharge\n\u2022 Replacement of Components\n\n\n\n214 10 Modeling Simulation and Test Beds\n\nMost torques from groups I and IV can be mitigated through test bed design:\nwell-designed structures outfitted with well-chosen components. Group II effects\nreceived more attention in the early development of air-bearing systems than they do\nnow; although internal bearing effects may be important in the design and operation\nof industrial gas bearings, they impart a negligible effect upon most systems we\nare considering. Several facilities have developed large-scale means to mitigate\nenvironmental torques (group III). Thermal and air currents often cause the grossest\neffect and are simplest to eliminate: several NASA facilities are installed within\nvacuum chambers. The facility designed for the Boeing Company\u2019s Lunar Orbiter\nAttitude Control Simulator could not make use of this solution, as it was piloted.\nInstead, the room design included full air circulation and thermal control. Further,\nthe system was mounted on a 90,000 lb concrete slab supported by seven air springs;\nthus the system was effectively isolated from seismic effects. Marshall Space Flight\nCenter installed one of their systems within a set of Helmholtz coils in order to\ncancel the effect of the terrestrial magnetic field on the payload.\n\n10.2.2 Anisoelasticity\n\nPerhaps the most difficult of the sources listed above is anisoelasticity. This effect,\nwhile relatively unknown, directly influences balance stability as the test article\nrotates. To understand it, one needs only recognize that the test article cannot\nbe infinitely stiff. As a result, there is some sag between the support point and\nthe test article\u2019s extremities due to gravity. How much sag exists depends on the\ndistribution of mass and stiffness in the direction of the gravity load. If the stiffness\nof the structure varies with the direction of loading, as most do, it is said to\nbe \u201canisoelastic.\u201d The center of mass of such structures varies with attitude, and\nthe changing mass center introduces a secular pendulum-like disturbance torque.\nConsider the simple structure of Fig. 10.10. At left, the large dumbbell is sagging.\nSo, an additional mass is added above the pivot (red) to raise the CG and balance\nthe system. At right, after rotating clockwise 90?, the large dumbbell, which is much\nstiffer in this direction, is no longer bending. The balance mass that compensated\nfor the sag in the initial orientation now makes the system asymmetric (and sags\nitself), resulting in both horizontal and vertical CG shifts.\n\n10.2.3 Active Mass Balancing\n\nThe effects of anisoelasticity prevent a physically realizable structure in gravity\nfrom remaining passively, perfectly balanced at all attitudes. The solution is an\nactive system that can move mass to make CG adjustments under computer control.\nOne facility which makes use of this technique is Honeywell\u2019s Momentum Control\nSystem test bed, shown in Fig. 10.11 (Hamilton [4]). This facility features three\n\n\n\n10.2 Hardware-in-the-Loop Test Beds 215\n\nservo-driven ballscrew linear stage that move small blocks of aluminum along rails.\nThis arrangement allows the test bed\u2019s mass center to be adjusted in three degrees of\nfreedom. The paths of motion of the masses are directed at the center of rotation of\nthe spherical air bearing so that the acceleration of the masses represents virtually no\ntorque. These masses eliminate torque due to mass-center offset. They actively place\nthe mass center of this 1400 kg test bed to within a few microns of the air-bearing\u2019s\ncenter of rotation.\n\n10.2.4 Controlling the Mass-Balancing System\n\nWhen contemplating the design of a control system using these actuators, the\nfirst and foremost requirement must be to prevent the mass-balancing system\n(MBS) from interacting with the ACS under test. The actions of the MBS must\nbe transparent so as not to interfere with or corrupt the experiment being performed\non the test bed. One key step towards this goal is the choice of feedback for the\ncontrols. We recall that a key goal of the test bed is to behave as a closed system for\nthe conservation of angular momentum. This is necessary for proper operation and\ntesting of MCS-based systems. It follows, therefore, that the purpose of the MBS\nis to make the net angular momentum of the test bed system remain constant in the\ninertial frame (implying a lack of external torque). The net angular momentum of\nthe test bed vehicle consists of the sum of the momentum vectors of the vehicle\nitself, and all of the CMGs mounted thereon. We can calculate this vector from the\nfollowing information, all of which is readily available:\n\n\u2022 Vehicle rate (from the rate gyros onboard)\n\u2022 Vehicle inertia\n\u2022 CMG wheel speeds (from the CMG tachometer telemetry)\n\u2022 CMG wheel inertias\n\u2022 CMG gimbal angles (from the CMG resolver telemetry)\n\nIt is important to note the significance of this principle. It means we can develop\na quantity to be used as feedback for the MBS system that is entirely based on the\n\nFig. 10.10 Simple anisoelastic structure\n\n\n\n216 10 Modeling Simulation and Test Beds\n\nFig. 10.11 Honeywell\u2019s momentum control system test bed\n\nstate of the hardware. No information from the ACS is required. The ACS need\nnot even be closed and operating. The feedback quantity is always valid, whether\nthe system is quiescent or in the middle of a slew. Under ideal conditions, actions\nof the ACS do not change the quantity, because the change of the CMG array\nmomentum will be equal and opposite the change of the vehicle momentum. This\nagain underscores the independence of the MBS and ACS controls. Figure 10.12\nillustrates the architecture of the MBS controls. It shows the development of the rate\nof change of net vehicle momentum H, which the central path tries to drive to zero.\nHaving calculated a desired rate of change for the external torque, the algorithm\nuses a cross-product with the gravity vector to determine the desired rate of change\n\nFig. 10.12 Control of a mass-balance system\n\n\n\nReferences 217\n\nof the body CG. This command then goes to the MBS actuators. We wish to keep\nthe bandwidth of this loop closure low (tenths of Hz). As such, it does a fairly poor\njob at rejecting rapidly changing external torques, such as may arise during an agile\nslew. Turning to a common controls solution, we have added a \u201cfeedforward\u201d path\nat the top of Fig. 10.12. This path anticipates the needed correction as soon as the\nbody begins to move and can apply the correction with the bandwidth of the MBS\nactuators. Finally, an additional feature is evident at the bottom of Fig. 10.12. When\nworking with momentum systems in the lab, just as in space, it is useful to have a\nway to \u201cdump\u201d any momentum accumulated over time. The MBS controls described\nthus far have only the objective of preventing the net momentum from changing.\nThis additional loop closure acts to drive the net momentum to zero, thus providing\nthe dumping function. This functionality should be provided at a bandwidth much\nlower than that of the main balance loop for stability, and it can easily be removed by\nopening the loop. For clarity and simplicity in this description, only the fundamental\nphilosophy of an MBS control system has been provided. Someone working in the\nfield will note, for example, that we make no distinction between the moving body\nframe (on which the MBS rides) and the lab frame (where the vector mg is constant).\nFurthermore, effects due to the rotation of the Earth are neglected here, an omission\nthat is justified because of the significant difference in frequency content involved.\nAs such, we take momentum to be conserved in the lab frame.\n\n10.3 Chapter Summary\n\nThis chapter has discussed methods used in testing and validation of MCS-based\nattitude control systems, both in computer simulations and hardware-in-the-loop\ntests. A proven architecture for computer modeling of these nonlinear devices has\nbeen offered. The architecture employs first-principles methods, and a disciplined\napproach to the choice of states, placement of negation, and organization of the\nmodel. The approach lends itself to the inclusion of nonlinear elements where\nnecessary throughout the model, and avoids the violation of any assumptions that\nmight have been made had pre-computed multibody equations of motion been used.\nThe preferred method for hardware-in-the-loop testing of MCS-based systems was\nshown to be the three degree-of-freedom air-bearing suspension. The most difficult\nchallenge in creating such a test facility is the effect of structural anisoelasticity\non mass balance in gravity. A method for overcoming this problem using an active\nsystem was described.\n\nReferences\n\n1. M. Bampton, R. Craig Jr., Coupling of substructures for dynamic analyses. AIAA J. 6(7), 1313\n(1968)\n\n2. P. Dahl, A solid friction model. Technical Report, Aerospace Corporation Report TOR-\n158(3107-18), 1968\n\n\n\n218 10 Modeling Simulation and Test Beds\n\n3. J. Schwartz, M. Peck, C. Hall, Historical review of air-bearing spacecraft simulators. AIAA J.\nGuid. Control. Dyn. 26(4), 513 (2003)\n\n4. B. Hamilton, Honeywell\u2019s momentum control system testbed, in AAS Advances in the Astronau-\ntical Sciences, vol. 151, 2014\n\n\n\nAppendix A\nExtended Equations of Motion for Spacecraft\nwith CMGs\n\nIt is typically assumed when the subject of dynamics is taught that the origin\nof a system\u2019s mass properties, and angular and linear momenta are understood.\nHowever, without understanding of the true origin of these characteristics of a\nsystem, knowing when terms from the derivation of the equations of motion can\nbe neglected becomes unclear.\n\nThe purpose of this chapter is to treat dynamics of a spacecraft with an array of\nCMGs all the way from the particle, to component, to system angular momenta and\nfrom here, rigorously find the generic vector equations of motion. The equations of\nmotion will be derived, making note of steps left out in most of the literature. This\nappendix is not meant to stray away from or repeat material in the Dynamics chapter,\nbut to provide the analytics behind the whole process of deriving the equations of\nmotion of the discussed multi-body system and its corresponding angular momenta\nand inertias. Also, from this appendix, the reader should be able to follow the steps\nneeded to derive more complex multi-body system equations of motion. Except for\nsome needed additional notation, the notation will be the same notation adopted\nfrom Chap. 4.\n\nWe would like to acknowledge Prof Norman Fitz-Coy at the University of Florida\nfrom whose notes, much of the mass integral equations of motion in this appendix\nare directly derived and expanded upon.\n\nA.1 It Begins with A Particle\n\nImagine that all matter is made up of particles of a zero volume and inertia that\ncontain mass. A set of these particles (at least 2) creates a system. With a system,\nthere is a center of mass and even an effective inertia. Imagine a barbell with a\nmassless bar shown in Fig. A.1.\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0\n\n219\n\n\n\n220 A Extended Equations of Motion for Spacecraft with CMGs\n\nFig. A.1 Two-particle mass Barbell\n\nThe center of mass position is equal to the ratio of the masses of the particles\nmultiplied by the vector distance of the bar from a datum position (invariant to\nwhere that datum is chosen), over all masses.\n\nRC D\nPn\n\niD1 miriPn\niD1 mi\n\n(A.1)\n\nwhere mi are the masses of the n particles at position vectors, ri from the datum\nposition and the products miri are known as the first mass moments. Now if the\nnumber of particles n ! 1, and a constraint exists so the distances between all of\nthese particles are fixed, a rigid body is formed.\n\nA.2 Components\n\nA system may contain many components, and some that may or may not be a rigid\nbody (e.g., nonempty propellant tank is not a rigid body), contains a continuum of\nparticles attached together that are bound together by internal forces. If we take an\nintegral with respect to the differential mass over a continuum of the body, we get\nits mass\n\nmB D\nZ\n\nB\ndm (A.2)\n\nNow the equation for the center of mass position of a body is analogous to what\nwas shown in Eq. (A.1), except for a continuum of particles,\n\nRC D\nR\n\nB ?dmR\nB dm\n\n(A.3)\n\nThe term\nR\n\nB ?dm is known as the first mass moment of a body B and it is equal\nto zero whenever the datum chosen for measurement of the particles\u2019 locations is\nthe center of mass. In general, spacecraft are separated into separate subsystems,\nand these subsystems are made up of separate components. For example, a typical\nspacecraft will have the following subsystems or main elements:\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 221\n\n\u2022 Communications and Ground Station Network\n\u2022 Command and Data Handling\n\u2022 Electrical Power System\n\u2022 Propulsion\n\u2022 Structures, Thermal, and Health Monitoring\n\u2022 Payload\n\u2022 Orbit control and trajectory generation\n\u2022 Attitude Determination and Control\n\nWithin the attitude determination and control system (ADCS), there are sensors\nsuch as gyros, accelerometers, RWA and CMG rotor and gimbal encoders and hall\nsensors, star trackers, horizon sensors, magnetometers, etc. As for actuators, the\nADCS may contain magnet coils/torquers, RWAs, CMGs, and/or thrusters.\n\nFor a spacecraft hosting an array of CMGs, you can think of three distinct\ncomponents that make up the system. First you have the spacecraft bus that\nconsists of the spacecraft and its subsystems excluding the CMGs. The CMGs\nthemselves have two separate components or bodies, rotors and gimbals that hold\nthe rotors. Therefore, we will derive the generic mass integral equations of motion\nconsidering the three distinct components of this system, spacecraft, gimbals, and\nrotors, respectively.\n\nA.3 Reference Frames for Spacecraft n-CMG System\n\nConsider the generic geometric diagram of a spacecraft consisting of a single CMG\nin Fig. A.2. The system is made up of three distinct components, a spacecraft bus\nconsisting of all components that are not the CMGs (e.g., solar panel, propellant\ntank, payload, sensors, structure, and electronics) and the CMGs\u2019 rotor and gimbals.\n\nThe list of symbols at the beginning of the book lists the reference frames,\nmasses, points, position and velocity vectors, masses, and inertias associated with\nFig. A.2.\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic\nEquations of Motion\n\nThe kinematic equations of motion are those equations which show the relationship\nof the motion between all components of the systems with respect to the inertial\nframe without the presence of forces or torques. Therefore, these equations depend\nsolely on the geometry (i.e., angles and positions) of all components in the system\nrelative to each other and to the inertial frame. For rigid bodies, these equations are\ntypically written in terms of quaternions, direction cosine matrices, or some other\nattitude representation and the corresponding angular velocity.\n\n\n\n222 A Extended Equations of Motion for Spacecraft with CMGs\n\nFig. A.2 Spacecraft-CMG system geometric diagram\n\nThe kinetics equations, or the equations relating the spacecraft\u2019s rotational\nmotion with respect to an internal or external torque are found by first deriving\nall components of angular momentum in the system.\n\nA.4.1 Spacecraft Angular Momentum\n\nThe first and largest component of our system is the spacecraft bus. The angular\nmomentum for a body X is of the form h D RX r ? vdm. The mass integral for a\nspacecraft bus\u2019s angular momentum about point A is,\n\nhBA D\nZ\n\nB\n\n?\nrB=A C ?\n\n? ? ?vA C !B=N ?\n?\nrB=A C ?\n\n??\ndm\n\nD\nZ\n\nB\n\n?\nrB=A C ?\n\n?\ndm ? vA C\n\nZ\n\nB\n\n?\nrB=A C ?\n\n? ? ?!B=N ?\n?\nrB=A C ?\n\n??\ndm\n\nD\nZ\n\nB\nrB=Adm ? vA C\n\nZ\n\nB\n?dm ? vA C\n\nZ\n\nB\n? ? ?!B=N ? ?\n\n?\ndm\n\nC\nZ\n\nB\nrB=A ?\n\n?\n!B=N ? rB=A\n\n?\ndm C\n\nZ\n\nB\n? ? ?!B=N ? rB=A\n\n?\ndm\n\nC\nZ\n\nB\nrB=A ?\n\n?\n!B=N ? ?\n\n?\ndm (A.4)\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 223\n\nThe position vector rB=A can only be pulled out of the mass integral in Eq. (A.4)\nif it does not depend on the position of the differential masses, ?. For example, fuel\nslosh or flexible appendages of the spacecraft bus may cause the center of mass\nposition to be variable with respect to the spacecraft body B, for which the mass\nintegral is defined.1 Therefore, if the center of mass of the spacecraft is assumed to\nbe fixed in body B the spacecraft angular momentum with respect to point A is\n\nhBA D\nZ\n\nB\nrB=Adm ? vA C\n\nZ\n\nB\n? ? ?!B=N ? ?\n\n?\ndm\n\nC\nZ\n\nB\nrB=A ?\n\n?\n!B=N ? rB=A\n\n?\ndm\n\nD ?JBB C JBA\n? ? !B=N C mBrB=A ? vA (A.5)\n\nwhere the terms that are multiplied by\nR\n\nB ?dm D 0 by the center of mass definition\nin Eq. (A.3) and the inertias JBB and J\n\nB\nA are\n\nJBB D\nZ\n\nB\n.? ? ?1 ? ??/ dm\n\nJBA D\nZ\n\nB\n\n?\nrB=A ? rB=A1 ? rB=ArB=A\n\n?\ndm (A.6)\n\nare found through the vector dyadic identity for any vectors a, b, and c as\n\na ? .b ? a/ D .a ? a1 ? aa/ ? b (A.7)\n\nwhere 1 is known as the unit dyadic. The term JBA is the parallel-axis inertia\nassociated with the translation of the spacecraft center of mass from point A.\n\nA word of caution in deriving angular momentum from mass integrals is to\nrealize the contribution associated with each moment arm and velocity. In the case\nof Eqs. (A.5) and (A.6), the spacecraft center of mass and all of its particles translate\nwith inertial velocities vA and its gyroscopic velocity component !B=N ?\n\n?\nrB=A C ?\n\n?\n.\n\nThis is not exactly the case for multiple components that are attached together, seen\nin Sects. A.4.2 and A.4.3.\n\n1Note that the coupled integral terms that contain the differential mass element vectors, ? and the\noffset vectors are nonzero if the spacecraft bus has flexible appendage. These flexible effects are\ntypically approximated by a summation of a finite number of modes for ?.\n\n\n\n224 A Extended Equations of Motion for Spacecraft with CMGs\n\nFig. A.3 A single CMG with\ncenter of mass offsets\n\nA.4.2 CMG Gimbal Angular Momentum\n\nConsider a single SGCMG as shown in Fig. A.3. We would like to derive the angular\nmomentum of just the CMG gimbal neglecting its rotor for the moment. This is\nwithout any loss to the accuracy of the derivation because in the end, angular\nmomenta are vectors and therefore can be added. The angular momentum of a\nsingle, SGCMG gimbal with respect to point A, is\n\nhGiA D\nZ\n\nGi\n\n?\nrpi=A C ?\n\n? ? ?vA C !B=N ? rpi=A\n?\n\ndm\n\nC\nZ\n\nGi\n\n?\nrGi=pi C ?\n\n? ? ??!B=N C !Gi=B\n? ? ?rpi=Gi C ?\n\n??\ndm\n\nD\nZ\n\nGi\n\nrpi=Adm ? vA C\nZ\n\nGi\n\nrpi=A ?\n?\n!B=N ? rpi=A\n\n?\ndm\n\nC\nZ\n\nGi\n\n? ? ??!B=N C !Gi=B\n? ? ?? dm\n\nC\nZ\n\nGi\n\nrGi=pi ?\n??\n\n!B=N C !Gi=B\n? ? rGi=pi\n\n?\ndm\n\nC\nZ\n\nGi\n\nrGi=pi ?\n??\n\n!B=N C !Gi=B\n? ? ?? dm\n\nC\nZ\n\nGi\n\n? ? ??!B=N C !Gi=B\n? ? rGi=pi\n\n?\ndm (A.8)\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 225\n\nFor our discussed system, there are multiple moving parts. Therefore, you must\nuse caution when deriving the angular momentum. In Eq. (A.8), it is understood\nthat first, the spacecraft bus has fixed within its reference frame the vector rpi=A\nto the nominal position of the CMG center of mass, pi. This vector is only the\nmoment arm for velocities of the components with respect to the inertial frame,\nneglecting the additional velocities of the gimbal about its own axis. The first term\non the RHS of Eq. (A.8) is the angular momentum associated with this moment arm\nand the ith CMG gimbal mass with respect to point A. In addition, to this angular\nmomentum, the contribution of the CMG gimbal-centric angular momentum needs\nto be incorporated. This contribution is taken with respect to rpi=A.\n\nIf we assume in Eq. (A.8) that the center of mass of the gimbal is at point rpi=A,\nthen the equation of CMG gimbal angular momentum reduces to\n\nhGiA D\nZ\n\nGi\n\nrpi=Adm ? vA C\nZ\n\nGi\n\nrpi=A ?\n?\n!B=N ? rpi=A\n\n?\ndm\n\nC\nZ\n\nGi\n\n? ? ??!B=N C !Gi=B\n? ? ?? dm\n\nDJGiA ? !B=N C JGiGi ?\n?\n!B=N C !Gi=B\n\n?C mGi rpi=A ? vA (A.9)\n\nwhere\n\nJGiA D mGi\n?\nrpi=A ? rpi=A1 ? rpi=Arpi=A\n\n?\n\nJGiGi D\nZ\n\nGi\n\n.? ? ?1 ? ??/ dm (A.10)\n\nIn practice, CMG vendors tend to balance their gimbals in such a way that they are\ninherently stiff, their gimbal center of mass offset is small, and can be approximated\nas a particle along the gimbal axis, thus providing no variable inertia. If one wishes\nto use this particle assumption and even relax the assumption that the particle is\nalong the gimbal axis, then they can construct an additional angular momentum\nperturbation induced to the system by the rotation of a particle imbalance as\n\nh\nGpi\nA DmGi rpi=A ? vA C\n\n?\nrpi=A ? rpi=A1 ? rpi=Arpi=A\n\n? ? !B=N\nC mGi\n\n?\nrGi=pi ? rGi=pi1 ? rpi=Gi rpi=Gi\n\n? ? ?!B=N C ?!Gi=B\n?\n\n(A.11)\n\nEquation (A.11) is found from taking the angular momentum over a single particle\nmass from Eq. (A.9), reducing the integral to an algebraic equation. Note that gimbal\nimbalances are typically small, terms associated with spacecraft angular velocity are\ntypically much smaller than that for gimbal angular velocity. Therefore, if we desire\nto only keep the dominant terms of Eq. (A.11) we get,\n\nh\nGpi\nA ? mGi\n\n?\nrGi=pi ? rGi=pi1 ? rpi=Gi rpi=Gi\n\n? ? !Gi=B (A.12)\n\n\n\n226 A Extended Equations of Motion for Spacecraft with CMGs\n\nA.4.3 CMG Rotor Angular Momentum\n\nThe CMG rotor angular momentum is found analogous to the CMG gimbal angular\nmomentum as\n\nhRiA D\nZ\n\nRi\n\n?\nrpi=A C ?\n\n? ? ?vA C !B=N ? rpi=A\n?\n\ndm\n\nC\nZ\n\nRi\n\n?\nrRi=pi C ?\n\n? ? ??!B=N C !Gi=B C !Ri=Gi\n? ? ?rpi=Ri C ?\n\n??\ndm\n\nD\nZ\n\nRi\n\nrpi=Adm ? vA C\nZ\n\nGi\n\nrpi=A ?\n?\n!B=N ? rpi=A\n\n?\ndm\n\nZ\n\nRi\n\n? ? ??!B=N C !Gi=B C !Ri=Gi\n? ? rpi=A\n\n?\ndm\n\nC\nZ\n\nRi\n\n? ? ??!B=N C !Gi=B C !Ri=Gi\n? ? ?? dm\n\nC\nZ\n\nRi\n\nrRi=pi ?\n??\n\n!B=N C !Gi=B C !Ri=Gi\n? ? rRi=pi\n\n?\ndm\n\nC\nZ\n\nRi\n\nrRi=pi ?\n??\n\n!B=N C !Gi=B C !Ri=Gi\n? ? ?? dm\n\nC\nZ\n\nRi\n\n? ? ??!B=N C !Gi=B C !Ri=Gi\n? ? rRi=pi\n\n?\ndm (A.13)\n\nAgain, if we assume in Eq. (A.13) that the center of mass is at point pi, then the\nequation of CMG gimbal angular momentum reduces to\n\nhRiA D\nZ\n\nRi\n\nrpi=Adm ? vA C\nZ\n\nRi\n\nrpi=A ?\n?\n!B=N ? rpi=A\n\n?\ndm\n\nC\nZ\n\nRi\n\n? ? ??!B=N C !Gi=B C !Ri=Gi\n? ? ?? dm\n\nDJRiA ? !B=N C JRiRi ?\n?\n!B=N C !Gi=B C !Ri=Gi\n\n?C mRi rpi=A ? vA (A.14)\n\nwhere\n\nJRiA D mRi\n?\nrpi=A ? rpi=A1 ? rpi=Arpi=A\n\n?\n\nJRiRi D\nZ\n\nRi\n\n.? ? ?1 ? ??/ dm (A.15)\n\nIn practice, CMG vendors tend to statically and dynamically balance their rotors\nin such a way that they are inherently stiff and precision aligned, their rotor center\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 227\n\nof mass offset (i.e., eccentricity) is small, and can be approximated as a particle\nalong the rotor axis. However, these imbalances are a main source of jitter on the\nspacecraft and are more prevalent then gimbal imbalances since the rotor velocities\nare of a much higher magnitude.\n\nTherefore, if one wishes to use this particle assumption, they can construct an\nadditional angular momentum perturbation induced to the system by the rotation of\na particle imbalance as\n\nh\nRpi\nA DmRi rpi=A ? vA C\n\n?\nrpi=A ? rpi=A1 ? rpi=Arpi=A\n\n? ? !B=N\nC mRi\n\n?\nrRi=pi ? rRi=pi1 ? rpi=Ri rpi=Ri\n\n? ? ?!B=N C !Gi=B C !Ri=Gi\n?\n\n(A.16)\n\nChoosing to keep only the dominant terms in Eq. (A.16), we arrive at\n\nh\nRpi\nA ? mR;pi\n\n?\nrRi=pi ? rRi=pi1 ? rpi=Ri rpi=Ri\n\n? ? !Ri=Gi (A.17)\n\nThe total system angular momentum about point A is found through the\nsummation of all component angular momenta and their general imbalance terms\nfrom Eqs. (A.5)\u2013(A.11) and (A.13)\u2013(A.16) as\n\nhSA DhBA C\nnX\n\niD1\n\n\n\nhGiA C hRiA C hGpiA C hRpiA\n\n?\n\nD\n\"\n\nJBA C JBB C\nnX\n\niD1\n\n\n\nJGiA C JRiA C JGiGi C JRiRi C J\n\nGpi\nA C JRpiA\n\n?\n#\n\n? !B=N\n\nC\n\"\n\nmBrB=A C\nnX\n\niD1\n\n?\nmGi rpi=A C mRi rRi=A C mG;pi rGi=pi C mR;pi rRi=pi\n\n?\n#\n\n? vA\n\nC\n\"\n\nnX\n\niD1\n\n\n\nJGiGi C JRiRi\n\n?\nC mG;pi\n\n?\nrGi=pi ? rGi=pi1 ? rpi=Gi rpi=Gi\n\n?\n#\n\n? !Gi=B\n\nC mR;pi\n?\nrRi=pi ? rRi=pi1 ? rpi=Ri rpi=Ri\n\n? ? !Gi=B\n\nC\n\"\n\nnX\n\niD1\nJRiRi C mR;pi\n\n?\nrRi=pi ? rRi=pi1 ? rpi=Ri rpi=Ri\n\n?\n#\n\n? !Ri=Gi (A.18)\n\nWith the point A being chosen as the spacecraft n-CMG system center of mass, we\nhave from the definition of the center of mass\n\"\n\nmBrB=A C\nnX\n\niD1\n\n?\nmGi rpi=A C mRi rRi=A C mG;pi rGi=pi C mR;pi rRi=pi\n\n?\n#\n\nD 0 (A.19)\n\n\n\n228 A Extended Equations of Motion for Spacecraft with CMGs\n\nTherefore, Eq. (A.18) can be represented more compactly when taken about the\nsystem center of mass as\n\nH D\n \n\nJs C\nnX\n\niD1\nJgri\n\n!\n\n? !B=N C\n \n\nnX\n\niD1\nJgri\n\n!\n\n? !Gi=B C\n \n\nnX\n\niD1\nJri\n\n!\n\n? !Ri=Gi (A.20)\n\nwhere Jgri and Jri are the gimbal-rotor assembly and rotor inertias about the CMG\nsystem center of mass (formally point pi).\n\nThe total angular momentum for a single CMG is\n\nhi D Jgri ? !B=N C Jgri ? !Gi=B C Jri ? !Ri=Gi (A.21)\n\nEquation (A.21) can be rewritten with respect to the orthogonal coordinate basis\nembedded in the ith CMG frame, fOsi; Ooi; Ogig corresponding to the ith CMG rotor spin\nvector, gyroscopic torque vector, and gimbal vectors, respectively. Equation (A.21)\nbecomes\n\nhi D Jgri ? !B=N C Jgri ? Ogi P?i C Jri ? Osi?r;i (A.22)\n\nwhere\n\n!Gi=B D Ogi P?i\n!Ri=Gi D Osi?r;i (A.23)\n\nA.4.4 Spacecraft and Actuator Equations of Motion\n\nBefore we derive the equation of motion we will use the following assumptions\n\n1. The spacecraft body center of mass is fixed in the spacecraft body frame.\n2. The gimbal and rotor center of mass are fixed in the spacecraft body frame.\n3. The gimbal and rotor centers of mass coincide at the origin of their corresponding\n\nCMG body, point pi, which will also be assumed to be where the rotor and gimbal\naxes intersect.\n\n4. The rotor spin axis is always orthogonal to the gimbal axis.\n\nThe relevance for these assumptions in order are:\n\n1. The perturbations from low frequency disturbances such as fuel slosh or flexible\nappendages are assumed to be designed for early in the spacecraft and mission\ndesign and not a direct function of how the CMG is designed and therefore are\nnot the subject of this appendix.\n\n2. The rotor eccentricity (imbalance) effects are typically designed to be negligible\nwhen combined with passive isolation for the majority of high precision pointing\nspacecraft.\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 229\n\n3. Most CMG are designed so that there are no changes in the center of mass of\nthe spacecraft body with rotation of the gimbals, which is a harder constraint to\ndesign for than a variation in inertia along the gimbal axis (i.e., counter masses\ncan be added to adjust the gimbal center of mass position but not necessarily the\ninertia).\n\nThe first step to finding the actuator dynamics is to take the inertial time\nderivative of Eq. (A.22)\n\nNdhi\ndt\n\nDJgri ?\nBd!B=N\n\ndt\nC ?!B=N ? ?Jgri ? !B=N\n\n??\n\nC Jgri ? Ogi R?i C Jgri ?\n?\n!B=N ? Ogi\n\n? P?i\nC Jri ? Osi P?ri C Jri ?\n\n\n\n!B=N C P?i Ogi\n\n?\n? Osi?r;i (A.24)\n\nTo find the torque of the ith CMG gimbal, we assume that the gimbal motor shaft\nis infinitely stiff and perfectly aligned and then must only offset torque along its\ngimbal axis. Therefore, the gimbal torque is\n\nNdhi\ndt\n\n? Ogi D?g;i\n\nD\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Ogi C\n?\n!B=N ? ?Jgri ? !B=N\n\n?? ? Ogi\n\nC ?Jgri ? Ogi\n? ? Ogi R?i C\n\n?\nJri ?\n\n?\n!B=N ??r;iOsi\n\n?? ? Ogi (A.25)\n\nSimilarly, we hold the infinite stiffness and perfect alignment assumptions for the\nith CMG rotor to arrive at\n\nNdhi\ndt\n\n? Osi D?r;i\n\nD\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Osi C\n?\n!B=N ? ?Jgri ? !B=N\n\n?? ? Osi\n\nC Jgri ?\n\n\n!B=N ? P?i Ogi\n\n?\n? Osi\n\nC .Jri ? Osi/ ? Osi P?ri (A.26)\n\nWith the scalar triple product identity,\n\nA ? .B ? C/ D B ? .C ? A/\n\nand the designation of .Jri ? Osi/ ? Osi D Jr;i and\n?\nJgri ? Ogi\n\n? ? Ogi D Jgr;i as the effective\ninertias of the rotor about its own spin axis and the gimbal about its own axis,\n\n\n\n230 A Extended Equations of Motion for Spacecraft with CMGs\n\nEqs. (A.25) and (A.26) are\n\n?g;i DJgr;i R?i C\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Ogi C\n?\n!B=N ? ?Jgri ? !B=N\n\n?? ? Ogi\n\nC ?Jri ? !B=N\n? ? Ooi?r;i (A.27)\n\n?r;i DJr;i P?ri C\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Osi C\n?\n!B=N ? ?Jgri ? !B=N\n\n?? ? Osi\n\nC Jgri ? !B=N ? Ooi P?i (A.28)\n\nEquations (A.27) and (A.28) can be thought of directly as the input torque to the\nmotors of the CMG gimbals and rotors from their motor electronics. Therefore, if\nwe include friction, we can assume that the actuator equations of motion are\n\nJgr;i R?i D?g;i ? ?gf ;i ?\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Ogi\n\n? ?!B=N ? ?Jgri ? !B=N\n?? ? Ogi ?\n\n?\nJri ? !B=N\n\n? ? Ooi?r;i (A.29)\n\nJr;i P?ri D?r;i ? ?rf ;i ?\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Osi\n\n? ?!B=N ? ?Jgri ? !B=N\n?? ? Osi ?\n\n?\nJgri ? !B=N\n\n? ? Ooi P?i\n(A.30)\n\nwhere ?gf ;i and ?rf ;i are the assumed internal friction torques of the ith CMG gimbal\nand rotor. Therefore the total equations of motion for a spacecraft containing an\narray of n CMGs is\n\n \n\nJs C\nnX\n\niD1\nJgri\n\n!\n\n?\nBd!B=N\n\ndt\n\nD ?!B=N ?\n\" \n\nJs C\nnX\n\niD1\nJgri\n\n!#\n\n? !B=N\n\n? !B=N ?\nnX\n\niD1\n\n\n\nJgri ? Ogi P?i C Jri?r;i\n\n?\n\n?\nnX\n\niD1\n\n\n\nJgri R?i Ogi C Jri P?ri Osi C Jri ? Ooi P?i?r;i\n\n?\n\n\n\nA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion 231\n\n?\nnX\n\niD1\n\nh?\nJgri ? !B=N\n\n? ? Ooi P?i C\n?\nJri ? !B=N\n\n? ? Ooi?r;i\ni\n\nC ?ext (A.31)\n\nwhere ?ext is the external torque,\n\nJgr;i R?i D?g;i ? ?gf ;i ?\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Ogi\n\n? ?!B=N ? ?Jgri ? !B=N\n?? ? Ogi ? Jri ? !B=N ? Ooi?r;i (A.32)\n\nand\n\nJr;i P?ri D?r;i ? ?rf ;i ?\n?\n\nJgri ?\nBd!B=N\n\ndt\n\n\t\n\n? Osi\n\n? ?!B=N ? ?Jgri ? !B=N\n?? ? Osi\n\nC ?Jgri ? !B=N\n? ? Ooi P?i (A.33)\n\nNote that the Eqs. (A.31)\u2013(A.33) must be solved simultaneously so that angular\nmomentum is conserved in the presence of internal friction. Internal friction and the\nadditional torques act against the gimbal and rotor motors of the ith CMG provide\na gimbal and rotor acceleration result different from the command. This difference\ntypically shows up as an error for the inner-loop control schemes to track the desired\ngimbal acceleration, rate, and angle for the gimbal and the desired rotor acceleration\nand rate for the rotor. However, no matter how well the inner-loop controller is\ndesigned, there are physical limits on the how fast or close it can reach the desired\ngimbal and rotor states and therefore, only the resultant gimbal and rotor states can\nbe fed back into the spacecraft equations of motion in Eqs. (A.29) and (A.30).\n\nOf particular interest are the most dominant torques associated with the equations\nof motion in Eqs. (A.31)\u2013(A.33). If we reduce Eqs. (A.31)\u2013(A.33), keeping only the\ndominant terms from the conditions j?r;ij >> j P?j >> k!B=Nk, we arrive at\n\n \n\nJs C\nnX\n\niD1\nJgri\n\n!\n\n?\nBd!B=N\n\ndt\n\nD ?\n\"\n\n!B=N ?\n \n\nJs C\nnX\n\niD1\nJgri\n\n!#\n\n? !B=N\n\n? !B=N ?\nnX\n\niD1\n.Jri?r;iOsi/\n\n?\nnX\n\niD1\n\n\n\nJri P?ri Osi C Jri ? Ooi P?i?r;i\n\n?\nC ?ext (A.34)\n\n\n\n232 A Extended Equations of Motion for Spacecraft with CMGs\n\nJgr;i R?i D?g;i ? ?gf ;i ?\n?\nJri ? !B=N\n\n? ? Ooi?r;i (A.35)\nJr;i P?ri D ? ?r;i ? ?rf ;i (A.36)\n\nThe contribution\n?\nJri ? !B=N\n\n? ? Ooi?r;i is known as precession back-drive torque (see\nChap. 3) and is typically the largest torque besides internal friction of the gimbal\nbearings, that the gimbal motor must offset.\n\nA.5 Summary\n\nThis appendix complements the dynamics chapter and provides the reader with\nthe generic vector dyadic formulation of the equation of motion as well as their\nphysical significance for a spacecraft hosting an array of n CMGs. It has provided\nin example the mass integral derivation of a generic set of the equations of motion\nfor a spacecraft containing an array of CMGs. With this derivation, the reader should\nbe able to consider the proper assumptions to reduce the equations of motion.\n\n\n\nAppendix B\nStability Analysis of Momentum-Based Attitude\nControl Systems\n\nMuch of the literature assumes that a spacecraft\u2019s attitude controller and steering\nalgorithm can be designed separately. The combined performance of the attitude\ncontroller and steering algorithm is typically not considered. It is beneficial to\nunderstand the implications of using a steering algorithm that is inexact (e.g., uses\ndirty inverses) on the attitude and angular rate stability of the entire spacecraft\nsystem.\n\nThis appendix reviews nonlinear stability analysis for some typical nonlinear\nattitude controllers used for general satellite attitude control along with the stability\nanalysis of a spacecraft hosting CMGs. Two types of attitude maneuvers are\nconsidered for analysis, rest-to-rest maneuvers and attitude and angular velocity\ntracking. It behooves the reader and provides context to have some familiarity\nwith Lyapunov theory and with the simplified equations of motion for a spacecraft\nhosting CMGs shown in Chap. 4.\n\nB.1 Lyapunov Analysis\n\nLyapunov stability analysis can offer insight into the stability or even instability of\nequilibria of nonlinear systems but relies on the candidate Lyapunov function chosen\nfor analysis. Moreover, its use is more of an art than an exact science and may yield\nconservative results, producing sufficient, though typically not necessary, conditions\nfor stability. Despite these drawbacks, the chief value of Lyapunov methods for us is\nthat they provide a mean to assess the impact of control algorithms on the stability\nof the attitude control system. The stability analysis of spacecraft hosting CMGs is\nquite involved since the steering algorithm provides the torque needed for attitude\ncontrol and this torque may not be always achievable due to singularities and/or\nmotor constraints. Lyapunov stability is defined by:\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0\n\n233\n\n\n\n234 B Stability Analysis of Momentum-Based Attitude Control Systems\n\nFor a continuous-time system with of a state x.t/ 2 D ? Rn and f W D ! Rn,\nPx D f .x.t//; x.0/ D x0\n\nwith equilibrium, xe where Px D f .xe/ D 0, the equilibrium xe is:\n1. Lyapunov stable, and if for every ? > 0, there exists a ? > 0 such that, if jjx0 ? xejj < ?,\n\nthen for all t ? 0, jjx.t/? xejj ? ?\n2. Asymptotically stable, if it is Lyapunov stable and there exists a ? > 0 such that, if jjx0 ?\n\nxejj < ? then lim\nt!1\n\njjx.t/? xejj D 0\n3. Exponentially stable, if it is asymptotically stable and there exists a ? > 0 such that, if\n\njjx0 ? xejj < ?, then jjx.t/? xejj ? ajjxe ? x0jje?bt for a; b > 0 and t ? 0\nBasically, Lyapunov stability is a form of solution boundedness. For a Lyapunov\n\nstable equilibrium, the maximum deviation of the solution from the equilibrium\ndecreases if the initial condition perturbation decreases.\n\nTo assess stability, Lyapunov\u2019s second (direct) method is typically used. To\nuse Lyapunov\u2019s direct method, a candidate Lyapunov function, V , is defined. The\nfunction V is a scalar function of the system\u2019s states. Note, the function V which\nis actually a functional or a scalar function of a function (e.g., x.t/). A candidate\nLyapunov function V.x/ must satisfy the following properties\n\n1. Continuously differentiable\n2. Positive definite, V.x/ > 0 8x 2 D=f0g\n3. V.0/ D 0\nwhere D=f0g is the domain of x without the equilibrium, x D 0 the stability of\nwhich is studied. If also, PV.x/ D ddt V.x.t// ? 0, the Lyapunov function is said to\nbe stable in the sense of Lyapunov. Note that due to legacy terminology, V.x/ is\nsaid to be positive definite rather than nonnegative. This is likely due to the the fact\nthat many of the past Lyapunov functions were of quadratic type and derived for\nlinear systems: they were of the form V.x/ D xTPx and said to be positive definite\nif symmetric matrix P were positive definite, i.e., \nTP\n > 0 for any \n \u00a4 0.\n\nIn addition to the conditions needed for Lyapunov\u2019s direct method, if the\nLyapunov function derivative along system trajectories is negative definite, i.e.,\nPV.x/ D ddt V.x.t// < 0, for all x 2 R, then the equilibrium can be shown to\nbe globally asymptotically stable. That is, Lyapunov stable and the response to any\ninitial condition asymptotically converges to the equilibrium.\n\nThe above Lyapunov analysis results only guarantee that the solution converges\nto zero as time goes to infinity. The transient performance of the system is not\ncharacterized from this analysis. Special conditions do exist in Lyapunov analysis\nwhich lead to exponential or even finite-time convergence results but, in general,\ntypical results from Lyapunov analysis only guarantee asymptotic convergence of\ntrajectories to the equilibrium. Therefore, transient performance is typically checked\nthrough simulations.\n\n\n\nB.1 Lyapunov Analysis 235\n\nIn addition to the ability of Lyapunov analysis to assess the stability and instabil-\nity of known nonlinear dynamical systems, it can also be used for control synthesis.\nThe control synthesis starts with a nonlinear differential equation describing the\nerror dynamics based on the equations of motion,\n\nPx D f .x; u/ (B.1)\n\nwhere x is the error state vector and u is the control vector. Systems that are\ndescribed by dynamic equations such as in Eq. (B.1) that are not an explicit function\nof time are referred to as autonomous systems. We will concentrate on autonomous\nsystems for the remainder of this appendix, noting that a different set of Lyapunov\nstability results exist for non-autonomous case which can be exploited for attitude\ncontrol problems with time-dependent dynamics (e.g., magnetic attitude control and\nattitude mode switching).\n\nNow consider a candidate Lyapunov function V.x/ and its time derivative along\nthe trajectories of Eq. (B.1)\n\nPV D\n?\n@V\n\n@x\n\n\tT\nPx D\n\n?\n@V\n\n@x\n\n\tT\nf .x; u/ (B.2)\n\nThe control u may be used to stabilize the equilibrium at the origin, by making\nPV ? 0. Therefore, control synthesis through Lyapunov analysis uses the control to\nproduce\n\n?\n@V\n\n@x\n\n\tT\nf .x; u/ ? 0 (B.3)\n\nFor an autonomous system, to determine if an equilibrium is globally asymptot-\nically stable when PV ? 0 and not PV < 0, Lasalle\u2019s Invariance principle can be used.\nThe Lasalle\u2019s Invariance principle is as follows:\n\nLet ? \t D be a compact set that is positively invariant for trajectories of Px D f .x/, i.e.,\ntrajectories that start in ? stay in ?. Let V.x/ W D ! R be a continuously differentiable\nfunction such that PV.x/ ? 0 on ?. Let E be the set of all points in ? such that PV.x/ D 0.\nLet M be the largest invariant set in E. Then every solution starting in ? approaches M as\nt ! 1 When the set M is a single point xe D 0 and ? D D D Rn then xe is a globally\nasymptotic equilibrium.\nTo apply this principle to an attitude control problem, note that the set E D f.!; e/ W ! \n\n0g and for points in E it follows from Equation (B.12) that u D 0 and from Equation (B.13)\nthat e D 0. Hence M D fxeg and xe is asymptotically stable.\nWe will next discuss typical candidate Lyapunov functions used in the literature\n\nto analyze attitude control stability and do so for two important cases/control\nobjectives: rest-to-rest or attitude regulation and attitude and angular velocity\ntracking.\n\n\n\n236 B Stability Analysis of Momentum-Based Attitude Control Systems\n\nB.2 Rest-to-Rest Attitude Control\n\nRepresenting the attitude error by an error quaternion \u0152e1 e2 e3 e4\tT D \u0152e e4\tT is a\ncommon approach. It provides global representation for attitude, leads to bilinear\nkinematic differential equations, and benefits from the absence of singularities.\nA candidate Lyapunov function for rest-to-rest attitude control, assuming the target\nequilibrium is at e D 0; e4 D 1, is\n\nV D 1\n2\n!TJ! C eTe C .1 ? e4/2 (B.4)\n\nwhere e is the vector elements of the error quaternion, e.g., such a quaternion may\nrepresent the error in alignment between the body and inertial reference frames,\ne4 is its scalar element, ! is the spacecraft angular velocity vector, and J is the\nspacecraft inertia matrix both expressed in body coordinates. The time derivative of\nV in Eq. (B.4), gives\n\nPV D !TJ P! C 2eT Pe ? 2.1 ? e4/ Pe4 (B.5)\n\nThe kinetic and kinematic differential equations associated with the rotation motion\nof the spacecraft are\n\nP! D ?J?1.!?J! ? u/\n\nPe D 1\n2\n\ne?! C 1\n2\n\ne4!\n\nPe4 D ?1\n2\n\neT! (B.6)\n\nSubstitution of the dynamics equations in Eqs. (B.6) into (B.5) provides\n\nPV D ? !T.!?J! ? u/C 2eT\n?\n1\n\n2\ne?! C 1\n\n2\ne4\n\n\t\n\n? 2.1 ? e4/\n?\n\n?1\n2\n\neT!\n\n\t\n\nD!Tu C eT! (B.7)\n\nLet the control law be defined by\n\nu D ?Ke ? C! (B.8)\n\nwhere K and C are positive definite symmetric gain matrices. The control law\nin Eq. (B.8) is of the proportional-derivative type. So, its gains K and C can be\n\n\n\nB.2 Rest-to-Rest Attitude Control 237\n\ntuned intuitively and/or through analysis of the linearized system. The Lyapunov\nderivative is found from substituting Eqs. (B.8) into (B.7):\n\nPV D ?!TC! C eT.K ? I3?3/! (B.9)\n\nIf K D I3?3 then\nPV D ?!TC! ? 0 (B.10)\n\nNote that PV in Eq. (B.10) is only negative semi-definite and it does not depend\non e. Further analysis exploits the Lasalle\u2019s Invariance principle and can be used\nto demonstrate almost global asymptotic stability with Eq. (B.8) when K D I3?3.\nThe controlled Lyapunov system in Eqs. (B.4) through (B.10) is \u201calmost\u201d globally\nasymptotically stable for Lasalle\u2019s theorem because a perturbation from the quater-\nnion initial condition e D 0 and e4 D 1 may result to an unstable transition to the\nunstable quaternion e D 0 and e4 D ?1 and therefore global asymptotic stability is\nnot guaranteed for all quaternion initial conditions. This deviation from the stable\nequilibrium e D 0 and e4 D 1 to the unstable equilibrium e D 0, and e4 D ?1 is\nknown as quaternion unwinding which is typically surpassed by the augmentation\nof discontinuous switch or logic variable. Note that local asymptotic stability may\nalso be confirmed using eigenvalue analysis, including for other choices K \u00a4 I.\nAsymptotic stability and estimates of domain of attraction can be obtained via\nsimulations.\n\nAnother popular choice of a candidate Lyapunov function for a rest-to-rest\nattitude maneuver is\n\nV D 1\n2\n!TK?1J! C eTe C .1 ? e4/2 (B.11)\n\nwhere K D KT > 0. The time derivative in Eq. (B.11) along system trajectories\ngives\n\nPV D ? !TK?1.!?J! ? u/C 2eT\n?\n1\n\n2\ne?! C 1\n\n2\ne4\n\n\t\n\n? 2.1 ? e4/\n?\n\n?1\n2\n\neT!\n\n\t\n\nD!TK?1u C eT! ? !TK?1!?J! (B.12)\n\nand with the eigenaxis control law\n\nu D ?Ke ? C! C !?J! (B.13)\n\n\n\n238 B Stability Analysis of Momentum-Based Attitude Control Systems\n\nfor positive definite symmetric gain matrices K and C provides\n\nPV D ?!TK?1C! (B.14)\n\nThe term !?J! is added to the controller to cancel out components of torque\naway from the eigenaxis of the maneuver, thereby making the maneuver purely\nan eigenaxis maneuver. Also, PV in Eq. (B.14) is negative semi-definite which is\nnot enough to demonstrate asymptotic stability. In fact, for Eqs. (B.13) and (B.14),\nalmost global asymptotic stability can be shown through the application of Laselle\u2019s\nInvariance principle. The reasons for almost global, i.e., domain of attraction\nexcludes a set of measure zero2 rather than global stability have to do with\nquaternions providing a double cover of the set of all attitudes. For instance, neither\nEqs. (B.8) nor (B.13) can avoid e D 0; e4 D ?1; ! D 0 as another (unstable)\nequilibrium where u D 0 and V D 0. Discontinuous control laws such as\n\nu D ?Ke.sign.e4// ? C! C !?J! (B.15)\n\nhave been proposed to address some of the challenges of quaternion stabilization.\nNote, that this controller provides no torque when at zero angular velocity and an\n\nattitude error angle along the eigenaxis of ? if sign.0/ D 0. Therefore, e4 D cos.?2 /\nor the set of error quaternions with an error angle of ? are additional equilibria for\nthis controller. More specifically, if the spacecraft goes to rest, i.e., ! D 0 when\ne4 D 0, then the controller u D 0 and it remains at the incorrect attitude for all\ntime. To avoid such a case, the sign function can be replaced by a band of two\nswitching points rather than a single switching point at e4 D 0. This band or region\nis known as a hysteresis region and it is typically designed considering the amplitude\nof noise and error from the measurement of attitude. Both the sign and hysteresis\nregion make the controller discontinuous. Discontinuous controllers pose problems\nof chattering, and care must also be exercised in their synthesis.\n\nUse of rotation matrices (or the Lie group SO(3), i.e., the Lie group for direction\ncosine matrices) has also been pursued in place of quaternions for attitude control\nsince they provide a unique parameterization of attitude and lead to almost globally\nasymptotically stabilizing feedback laws. However, SO(3) based attitude controllers\nhave their own drawbacks, such as slow convergence if starting close to or at the\nthree unstable of the four possible closed-loop error equilibria.\n\nIn summary, for attitude control there is no free lunch. No matter what the\nparameterization one choses, no \u201csmooth time-invariant\u201d attitude controller can\nglobally asymptotically stabilize attitude, which is a consequence of Brockett\u2019s\nTheorem.\n\n2A set measure of zero corresponds to a set consisting of a finite number of points of a set that\ncontain no area or volume.\n\n\n\nB.3 Attitude and Angular Velocity Tracking Control 239\n\nB.3 Attitude and Angular Velocity Tracking Control\n\nThe problem of attitude and angular rate tracking is illustrated in Fig. B.1 for\nsatellite-based Earth imaging and considers the tracking of both the attitude and\nangular velocity, versus just reaching a reference attitude with zero angular velocity,\nsuch as is done in rest-to-rest control.\n\nTherefore, the Lyapunov function must include the error in angular velocity and\nin attitude. A candidate Lyapunov function for attitude tracking stability analysis is\n\nV D 1\n2\n!Te K\n\n?1J!e C eTe C .1 ? e4/2 (B.16)\n\nwhere !e D ! ? !d is the angular velocity error and !d is the desired angular\nvelocity which is assumed to be continuously differentiable and bounded. The\ntime derivative of the Lyapunov function in Eq. (B.16) along the trajectories of the\nsystem is\n\nPV D ?!Te K?1.!?J! C J P!d ? u/\n\nC2eT\n?\n1\n\n2\ne?!e C 1\n\n2\ne4!\n\n\t\n\n? 2.1 ? e4/\n?\n\n?1\n2\n\neT!e\n\n\t\n\nD !Te K?1u C eT!e ? !Te K?1J P!d (B.17)\n\nNote, that the angular velocity used for the kinematic equations of motion in\nEq. (B.6) is now !e rather than !. The angular velocities !e and ! happen to be\nwith respect to the same reference frame and because they are both represented in\n\nFig. B.1 Satellite earth imaging\n\n\n\n240 B Stability Analysis of Momentum-Based Attitude Control Systems\n\nthe same coordinate system (i.e., body coordinates), !e D ! ? !d can be used in\nplace of ! when angular rate tracking is desired. A suitable control law that achieves\nasymptotic tracking based on Eq. (B.17) is of the form\n\nu D ?Ke ? C!e C !?J! C J P!d (B.18)\n\nand\n\nPV D ?!Te K?1C!e (B.19)\n\nNote that PV in Eq. (B.19) is negative semi-definite and Lasalle\u2019s Invariance principle\nfor autonomous systems has to be used to show that the controller in Eq. (B.18)\nachieves asymptotic stability.\n\nB.4 Steering Algorithm Effects on Attitude Regulation\nand Tracking\n\nThe stability of a steering algorithm for satellite attitude control depends on\nthe objective and type of steering algorithm. Singularity-escape, singularity-\navoidance, and escape methods add torque error and therefore are destabilizers\nby nature (i.e., they push the spacecraft away from an equilibrium trajectory).\nSingularity-avoidance laws and limited-momentum algorithms are typically array-\ngeometry dependent and may sacrifice available angular momentum and torque\nauthority for predictable behavior. Also, many of the steering algorithms in all three\nof the categories in Chap. 7 can encounter a gimbal lock singularity, which may\nbe stable for angular rate but not for attitude. In other words, a spacecraft whose\narray is in gimbal lock might rotate in a so-called simple spin (see Chap. 4), in the\nabsence of external torques.\n\nIn general, spacecraft controllers may be of the linear proportional derivative\nor higher order linear type so these nonlinear controls approaches may offer little\npractical value, but they allow the steering algorithm to be incorporated in a\nnonlinear analysis of stability with the nonlinear system dynamics. The analysis\nbegins with the Lyapunov candidate function in Eq. (B.11) for eigenaxis attitude\nregulation\n\nV D 1\n2\n!TK?1J! C eTe C .1 ? e4/2\n\nand its time derivative along the system trajectories of the form\n\nPV D !TK?1u C eT! C !TK?1!?J!\n\n\n\nB.4 Steering Algorithm Effects on Attitude Regulation and Tracking 241\n\nThe only difference here is that the steering algorithm may introduce some error\nin u, i.e., u D u ? ?e ? !?he where u is the requested control torque, and the torque\nerror from singularity escape may occur for every singularity encounter or remain a\nconstant at gimbal lock (see Chap. 5).\n\nThe term u is the nominal control torque [i.e., the one that would be used to\nasymptotically stabilize the system in Eq. (B.12)] and the terms ?e and !?he are the\ntorque error, and the gyroscopic torque component of the angular momentum error.\n\nSubstituting u into Eq. (B.12) leads to\n\nPV D!TK?1.?Ke ? C! C !?J! ? ?e ? !?he/\nC eT! C !TK?1!?J! (B.20)\n\nleading to\n\nPV D ?!TK?1C! C !TK?1.??e ? !?he/C !TK?1!?J! (B.21)\n\nWith the assumption that K D kI3?3, it follows that\n\n!TK?1!?J! D !TK?1!?he D 0\n\nThus\n\nPV ? ?ckjj!jj2 C kjj!jjjj?ejj (B.22)\n\nwhere c is the smallest eigenvalue of C. The result in Eq. (B.22) does not provide us\nmuch information so we must consider the possible conditions from the majority of\nsteering algorithms (see Chap. 7).\n\nThe majority of steering algorithms, except for the case of gimbal lock, result in\nan instantaneous burst of torque error to escape singularity. If the torque error after\nsingularity escape is very small, i.e., jj? jj ? ? where ? is a small number.\n\nPV ? ?ckjj!jj2 C kjj!jjjj?jj (B.23)\n\nBoth terms in Eq. (B.23) are functions of k and the two-norm of the angular velocity.\nAs velocity decreases, both terms approach zero, but the goal is to have the negative\nterm in Eq. (B.23) dominate. This can be accomplished by making c large as is\nevident through the completion of the squares\n\nPV ? ?ck\n\n\njj!jj ? ?\n\n2c\n\n?2 C k ?\n2\n\n4c\n(B.24)\n\nThe expression in Eq. (B.24) depends on ? and hence on the steering algorithm\nperformance. To guarantee PV ? 0, a large derivative gain may be required, which in\neffect may cause the spacecraft to never reach the correct attitude and the response\n\n\n\n242 B Stability Analysis of Momentum-Based Attitude Control Systems\n\nbe over damped. Also, \u201cdirty\u201d steering algorithms typically have a torque error\nthat decays exponentially and therefore may be small but always persist. The best\nresult one can get with such a steering algorithm is uniformly ultimate boundedness\n(UUB) with error converging to a ball that can be made smaller with the increase\nin the gain c. There appears to be no proof of attitude stabilization possible for this\nchoice of Lyapunov function and attitude controller combination. In particular, a\nSGCMG array may end up in gimbal lock at nonzero angular velocity which will\nleave the spacecraft tumbling and therefore, unstable in attitude.\n\nB.5 Summary\n\nSome nonlinear Lyapunov stability analyses for spacecraft attitude control with\nmomentum control systems were performed here to provide the reader understand-\ning of the asymptotic performance behavior of some typical attitude controllers and\ntheir combinations with \u201cdirty\u201d inverse steering algorithms. The conclusion from\nthis chapter is that accurate attitude control performance cannot be obtained without\ntaking into account the choice of steering algorithm unless the chosen steering\nalgorithm delivers torque exactly. In the absence of actuator and state constraints\nand the possibility of gimbal-lock, the magnitude of error from a steering algorithm\ncan be bounded. However, any unpredictable behavior from a steering algorithm\nor injection of error for singularity escape is troublesome to represent through\nLyapunov analysis because singularities are encountered on the fly while performing\nattitude maneuvers.\n\n\n\nIndex\n\nA\nA2100 (satellite), 10\nAcceleration, 18\nAgile Satellite, 66\nAir Bearing, 210\nAngular Momentum\n\nCMG array, 78\nconservation, 6\ngyrostat, 67\nmomentum device, 66\nof docked spacecraft, 25\nspacecraft, 66\n\nAngular Velocity Vector\nrotor, 66\nspacecraft, 66\n\nAPT (satellite), 21\nAssembly, On-Orbit, 26\nAsteroid Redirect Mission, 27\nAsteroids, 11, 13, 27\nAstronaut Maneuvering Unit, 13\nATK, 11, 24\nAttitude\n\ncontrol, 5, 17, 18, 21, 102\nactuators, 5, 6\nfeed forward, 27\nsubsystem architecture, 16\u201318\n\ndefinition, 61\nparameterization\n\ndefined, 61\nEuler Angles, 97, 98\nfor coordinate-system transformations,\n\n62\nGibbs vector, 98\nRodrigues parameters, 98\n\nsensors, 5\n\nAutomotive Applications, 13\nAutomotive Applictions, 30\n\nB\nBall Aerospace, 1, 3, 10\nBandwidth, 188\u2013191\nBase Rate Effect, 22, 31, 47, 80\nBasis Vector\n\ndefinition, 57\nBearings, 20, 24, 45, 47, 51, 53, 88, 90\n\neffect of span on stiffness, 84\nimpact on coordinates, 63\n\nBilsat, 13\nBlue Canyon Technologies, 90, 91\nBoeing, 10, 11\nBoeing 702 (spacecraft), 10\nBpeing 702 (spacecraft), 17\nBrennan, Louis, 30\n\nC\nClarke, Arthur C., 15\nClyde Space, 91\nCMG array\n\n3/4-CMG box array, 143\n6 GAMS, 148\ncollinear arrays, 139\ndynamic array, 145\nenergy storage, 151\nfour-CMG pyramid array, 144\nLangley Six-Pac, 147\nroof, 139\nscissor pairs, 138, 168\nVSCMG array, 149\n\n\u00a9 Springer International Publishing Switzerland 2015\nF.A. Leve et al., Spacecraft Momentum Control Systems, Space Technology\nLibrary 1010, DOI 10.1007/978-3-319-22563-0\n\n243\n\n\n\n244 Index\n\nCoelostat Telescope, 11, 28\nConOps, 18, 20\nConte Di Savoia (ship), 31\nCoordinate System\n\ncommon spacecraft, 10, 62\ndistinguished from reference frame, 61\nindication of, in matrix notation, 58,\n\n62, 67\nmomentum device, 63\n\narray example, 65\nCMG, 63\nCMG pyramid array beta angle, 64\nCMG roof array beta angle, 64\nRWA, 63\n\nCornell University, 4\nCubeSats, 13\n\nD\nDARPA, 24\n\nPhoenix program, 24\nDeep Space Industries, 13\nDigitalGlobe, 1, 2\ndirection cosine matrices, 97\nDirection Cosine Matrix\n\nuse in attitude control, 61\nDisturbance Torques, 18, 20\nDouble Gimbal CMGs, 19\nDouble-Gimbal CMG, 20, 45\nDual-Spin Spacecraft, 10, 15, 65, 71\nDyadic\n\ncoordinate systems, 58\nexample, 58\nnotation, 57\n\nDyadics\ncommon operations, 60\n\nDynamic Balance, 51, 68,\n72, 77\n\nE\nEADS, 13\neigenaxis maneuver, 238\nEquations of Motion, 80\nEquilibria\n\ncalculation of, 70\ngyrostat with CMGs, 73\nrelative, of gyrostat, 67\nrelative, of rigid body, 68\nstabilization of, 68\u201371\nsuperspin effect, 71\n\nEuler\u2019s Theorem, 73\nExplorer (spacecraft), 8, 70\n\nF\nFailure, 18, 20, 24\nfirst mass moments, 220\nFlexible Dynamics, 8, 84\n\naugmented inertia, 88\ncompliant rotor/gimbal behavior, 45, 84\n\nFlexible Structure, 190, 201\nFluid Dynamics, 8\nFrame of Reference, 5\nFriction, 53, 188, 189, 192, 201, 208\n\nG\nGears, 45, 47, 53, 73, 77, 88, 191\nGeneral Dynamics, 11\nGeoEye, 2\nGeosynchronous Satellites, 15, 18\nglobal asymptotic stability, 238\nGoddard Space Fligth Center, 24\nGoodrich Corporation, 4\nGoogle Earth, 1\nGyroscope\n\nBack-Torque, 47\nPrecession, 42\n\nGyrostat\ndefinition, 65\n\nH\nHealth Monitoring, 24\nHoneybee Robotics, 4, 90\nHoneywell International, 3, 6, 21, 24, 28\nHubble Space telescope, 24\nHughes, 10, 15\nHughes 601 (spacecraft), 10, 16, 18\nHughes Aircraft, 8\n\nI\nIkonos, 2\nImaging, 18\nIn Situ Resource Utilization, 27\nInduced Vibration, 51, 77, 91\nInertia Matrix, 66\n\nintroduced, 61\nInternational Space Station, 1, 13, 19, 31\nITAR, 13\nITT Excelis, 24\n\nJ\nJackscrews, 16\nJacobian, 54, 101, 157\n\nCMG array, 83\n\n\n\nIndex 245\n\nDGCMG array, 83\nRWA array, 82\nVSCMG array, 83\n\nJacobian (matrix)\ndefined, 82\n\nJerk, 18\ndue to gimbal acceleration, 77\nspacecraft kinematics, 76\n\nJitter, 28\n\nK\nKennedy Space Center, 19\n\nL\nLaunch Vehicle, 21, 128\nLit Motors, 13, 31\nLockheed Martin, 10, 11\nLyapunov stability, 233\n\nM\nMagnetic Torque Coils, 8\nMars, 27\nMaryland Aerospace Incorporated, 91\nMaterials Science, 28\nMatrix\n\nexample, 58\nMiniature Momentum Control System, 4, 21,\n\n23\nMir, 13, 19\nMir Space Station, 1\nModeling, 91\nMomentum Bias, 16, 17\nmomentum capability\n\nCMG, 135\nDGCMG, 19\nRWA, 134\n\nMomentum Conrol Assembly, 24\nMomentum Control System, 5, 8, 18, 24\nMomentum Storage, 18\nMomentum Wheel, 16\nMomentum Wheels, 10\nMomentum-Bias Satellite, 65, 72\nMoore-Penrose Pseudoinverse, 69\nMotor Torque Constant, 82\nMotors, 24, 63, 65, 71, 73, 77, 80, 82, 84,\n\n90\u201392, 193\n\nN\nNASA, 1, 12, 25\nNautical Applications, 13, 31\n\nNorthrop Grumman, 11\nnull motion\n\nsingularity avoidance, 159\n\nO\nOperationally Responsive Space, 21,\n\n22, 24\nOptus, 16\nOrbital Sciences, 10\nOrbview, 2\northo-skew array, 134\nOutput Axis, 65\nOutput Torque\n\nof a motor, 82\nOutput-Torque Ripple, 51, 77, 91\n\nP\nPayload, 1, 11, 16, 28\n\nrole in attitude control, 61\nPhonesat (spacecraft), 90\nPlanet Labs, 13\nPlanetary Resources Inc., 13\nPower\n\nHeat, 196\nHolding Speed, 188\nMotor, 197, 199\nReaction Wheel, 44\nTradeoffs, 50\n\nQ\nQuaternion\n\nas attitude parameterization, 61\nQuickBird, 2\n\nR\nRCA, 10\nRCA Astronautics, 15\nReaction Wheel, 17, 42\nReference Frame\n\nbody fixed, 61\ndefinition, 61\ndistinguished from coordinate system,\n\n61\ninertial, 61\nNewtonian, 61\n\nRelativity\nas irrelevant for rigid-body motion, 61\n\nRequirements, 18, 19, 24, 26\nRESTORE (spacecraft), 25\nRobotics, 11, 27\n\n\n\n246 Index\n\nRotor Balance\ndynamic, 66\nstatic, 66\n\nRWA array, 17, 18, 28\nfailure response, 71\nfour-RWA pyramid array, 135\n\nS\nSatellite Servicing, 11, 24\nScissored Pair, 28, 31\nSeakeeper Gyro, 13\nSeakeeper Inc., 31\nSimulation, 201\nSinclair Interplanetary, 91\nsingular surfaces, 123\n\nexternal, 126, 144, 153\ninternal, 125, 144, 153\n\nsingular values, 95, 161\nSingularities, 10\n\nVSCMG array, 83\nsingularities\n\ncoordinate, 96\ndegenerate hyperbolic, 111, 114\ndesignations, 141\nDGCMG gimbal lock, 105\nelliptic, 115\nexternal, 115\ngeometric, 99\nhyperbolic, 112, 165\nnon-degenerate hyperbolic, 112\n\nsingularities definition matrix, 110\nSingularity Measure, 84\nsingularity measure, 161\nsingularity parameter, 161\nsingularity projection matrix, 110\nSizing\n\ngimbal motion as negligible, 80\nimpact of base rate, 80\nimpact of length scale, 21\nintroduced, 20\nof momentum system to achieve slew\n\nkinematics, 76\noverview, 6\n\nSkylab, 1, 13, 19\nSlew, 18\n\neigenaxis, 74\nrate versine, 75\nversine\n\ndefinition, 74\ntiming, 75\ntrig function, 74\n\nSlewing\nAcceleration Limited, 38\n\nAngle vs. Time, 36, 40\nEigenaxis, 35\n\nSlip Rings, 90\nSmall Satellites, 21, 90\nSolar Max (spacecraft), 24\nSpace Shuttle, 24\nSpace Systems Loral, 10, 24\nSpaceX, 13\nSperry Gyroscope Company, 28\nspinup, 129\nStability, 9, 10, 16, 17, 30, 191, 192\nStatic Balance, 51, 77\nStationkeeping, 18\nsteering algorithms, 157\n\nAMAPS, 178\nBlended Inverse, 160\nFSL, 179\nGISL, 165\nGSR Inverse, 163\nHSL, 177\nlocal gradient methods, 166\nMoore-Penrose, 160\npseudoinverse methods, 159\nsingularity avoidance algorithms, 158\nsingularity avoidance and escape\n\nalgorithms, 158\nsingularity direction avoidance, 162\nsingularity escape algorithms, 158,\n\n161\nSR Inverse, 161\n\nSurrey Satellite Technology Ltd., 13\nSyncom, 2, 8, 10, 15, 70\n\nT\nTachometer, 53\nTacsat-2 (satellite), 24\nTACSAT-5, 21\nTensor\n\nnotation, 57\nThales/Alenia, 13\nThrusters, 5, 6, 8, 18\nTorque Amplification, 46, 48\ntracking control, 239\nTrade Studies, 18\u201321, 24, 54\nTrains, 30\nTransformations, 206\nTransport Theorem, 67, 80\nTribology, 28\n\nU\nUniversity of Florida, 4, 90\n\n\n\nIndex 247\n\nV\nVector\n\ncommon operations, 60\ncoordinate systems, 58\nexample, 58\nnotation, 57\nrepresentation as a matrix, 59\n\nVectrix\ndefinition, 59\n\nVibration, 28, 51, 202, 208\nisolation, 22, 24\n\nViolet (satellite), 4, 21, 22\nVivisat, 12, 24\n\nW\nWolseley Tool and Motor Car Company\n\n30\nWorldview 3, 18\nWorldview I, 1, 2\n\nZ\nZarya Module, 19\nZero-Momentum Satellite, 10, 17, 66\nZero-Propellant Maneuver, 20\n\n\n\tPreface\n\tContents\n\tAuthor Biographies\n\tAcronyms\n\tSymbols\n\t1 Introduction\n\t1.1 Spacecraft Design, Commercial Space, and Angular Momentum\n\t1.2 Momentum Control Devices and Attitude Control Systems\n\t1.3 A Brief History of Spin\n\t1.4 The Proliferation of Momentum Control\n\t1.5 About This Book\n\tReferences\n\n\t2 Applications\n\t2.1 Spacecraft Applications\n\t2.1.1 GEO Communications Spacecraft\n\t2.1.2 Agile Spacecraft Missions and ConOps\n\t2.1.3 Space Stations\n\t2.1.4 Small Spacecraft\n\t2.1.5 Satellite Servicing\n\t2.1.6 Asteroid Grappling\n\t2.1.7 Space Robotics\n\n\t2.2 Terrestrial Applications\n\t2.2.1 Brennan's Monorail\n\t2.2.2 Wolseley's Two-Wheeled Wonder Car\n\t2.2.3 Lit Motors\n\t2.2.4 Nautical Roll and Pitch Stabilization\n\n\t2.3 Chapter Summary\n\tReferences\n\n\t3 Requirements Development for Momentum Control Systems\n\t3.1 Quantifying Agility Requirements\n\t3.1.1 Slew Angle vs. Time\n\t3.1.2 Performance Ratios: Vehicle\n\t3.1.3 Performance Ratios: Momentum System\n\t3.1.4 Vehicle Velocity\n\t3.1.5 Summary\n\n\t3.2 Momentum Device Technology\n\t3.2.1 Torque, Momentum, and De-mystifying Precession\n\t3.2.2 The Reaction Wheel\n\t3.2.3 The Double-Gimbal Control Moment Gyroscope (DGCMG)\n\t3.2.4 The Single-Gimbal Control Moment Gyroscope (SGCMG)\n\t3.2.5 Vehicle Rate and the SGCMG Gimbal Torquer\n\t3.2.6 Torque-Amplification Revisited\n\n\t3.3 Momentum Device Technology Tradeoffs\n\t3.3.1 Momentum and Torque\n\t3.3.2 Power\n\t3.3.3 Vibration\n\t3.3.4 Torque Accuracy\n\t3.3.5 Array Control\n\n\t3.4 Guidelines for Selecting Momentum Device Technology\n\t3.5 Chapter Summary\n\tReferences\n\n\t4 Dynamics of Momentum-Control Systems\n\t4.1 Notation\n\t4.2 Spacecraft Attitude and Momentum-Device Kinematics\n\t4.3 Equations of Motion for a Gyrostat with Balanced Rotors\n\t4.4 Relative Equilibria and Stability of Gyrostats\n\t4.4.1 RWA Spacecraft\n\t4.4.2 CMG Spacecraft\n\t4.4.3 Large-Angle Slews\n\n\t4.5 Control-Moment Gyroscopes\n\t4.6 Actuator Jacobians \n\t4.7 Rotor and Gimbal Structural Dynamics\n\t4.8 Effects of Scaling CMG Actuators\n\t4.8.1 Torque Amplification Degradation with Scaling\n\n\t4.9 Chapter Summary\n\tReferences\n\n\t5 Singularities of Control Moment Gyroscopes\n\t5.1 Singular Values\n\t5.2 Coordinate Singularities Versus Geometric Singularities\n\t5.2.1 Coordinate Singularities\n\t5.2.2 Singularities Associated with Geometric Constraints\n\n\t5.3 Control Moment Gyroscope Singularities\n\t5.3.1 The Concept of CMG Singularity\n\n\t5.4 Double-Gimbal Control Moment Gyroscope Singularities\n\t5.4.1 DGCMG Gimbal Lock\n\n\t5.5 Single-Gimbal Control Moment Gyroscope Singularities\n\t5.5.1 SGCMG Gimbal Lock\n\n\t5.6 Classification of Singularities\n\t5.7 Singularity Conditions Defined Mathematically\n\t5.7.1 Determination of Singularity Degeneracy\n\n\t5.8 Hyperbolic Singularities\n\t5.8.1 Non-degenerate Hyperbolic Singularities\n\t5.8.2 Degenerate Hyperbolic Singularities\n\n\t5.9 Elliptic Singularities\n\t5.9.1 External Elliptic Singularities\n\t5.9.2 Internal Elliptic singularities\n\n\t5.10 Passability and Impassability of Singular Points\n\t5.10.1 Impassable Singular Points\n\t5.10.2 Passable Singular Points\n\n\t5.11 Singular Surfaces for SGCMG\n\t5.12 Characteristics of Singular Surfaces\n\t5.13 Numerical Sensitivity in the Vicinity of a Singularity\n\t5.14 Variable-Speed Control Moment Gyroscope Singularities\n\t5.15 Zero-Momentum Spin Up\n\t5.15.1 RWA Zero-Momentum Spin-Up\n\t5.15.2 Four-CMG Roof Zero-Momentum Spin-Up\n\t5.15.3 Four CMG Pyramid Zero-Momentum Spin-Up\n\n\t5.16 Chapter Summary\n\tReferences\n\n\t6 Momentum-Control System Array Architectures\n\t6.1 The Nature of Momentum Devices\n\t6.2 Momentum and Torque Capability of an Array of RWAs\n\t6.3 Momentum and Torque Capability of an Array of CMGs\n\t6.4 Double-Gimbal CMG Arrays\n\t6.5 Single-Gimbal CMG Arrays\n\t6.5.1 Scissored Pairs of CMGs\n\t6.5.2 Collinear (Multiple-Type) Arrays \n\t6.5.3 3/4 (3 of 4) Box Array\n\t6.5.4 Pyramid Arrays \n\t6.5.5 Dynamic Arrays\n\n\t6.6 Blended Arrays and Other Designs\n\t6.6.1 Double-Gimbal/Single-Gimbal Scissored Pairs\n\t6.6.2 Langley ``Six-Pac''\n\t6.6.3 Single-Gimbal Six GAMS (Six-CMG Pyramid Array)\n\t6.6.4 Scissored Pair with High-Torque Reaction Wheels\n\n\t6.7 Variable-Speed CMG Arrays\n\t6.8 Energy Storage\n\t6.9 Optimization and Arbitrary Array Configurations\n\t6.10 Chapter Summary\n\tReferences\n\n\t7 Steering Algorithms\n\t7.1 CMG Steering Algorithms\n\t7.2 Origin of Pseudoinverse Methods\n\t7.2.1 Blended Inverse\n\t7.2.2 Moore\u2013Penrose Inverse\n\n\t7.3 Singularity-Escape Algorithms (Torque-Error Algorithms)\n\t7.3.1 Singularity Robust Inverse \n\t7.3.2 Singularity Direction Avoidance Pseudoinverse \n\t7.3.3 Generalized Singularity Robust Inverse \n\n\t7.4 Singularity Avoidance Algorithms\n\t7.4.1 Generalized Inverse Steering Law \n\t7.4.2 Local Gradient (LG) Methods\n\t7.4.3 Constrained Gimbal Angle or Angular Momentum Methods\n\t7.4.3.1 Linear-Constraint Methods\n\t7.4.3.2 Triplet Steering Law\n\t7.4.3.3 Expansion to a Six CMG Roof\n\t7.4.3.4 Gimbal-Angle Constraint Methods (Collinear Steering)\n\n\t7.4.4 Limited Angular Momentum Methods\n\n\t7.5 Singularity Avoidance and Escape Algorithms\n\t7.5.1 Hybrid Steering Logic \n\t7.5.2 Angular Momentum Artificial Potential Steering \n\t7.5.3 Feedback Steering Law \n\t7.5.4 Optimal CMG Attitude Control\n\t7.5.4.1 Convex Optimization: Minimum Error-Dissipative Power Reduction Control\n\t7.5.4.2 Gauss Pseudo-Spectral Collocation Methods\n\n\n\t7.6 Variable Speed Control Moment Gyroscopes\n\t7.7 Chapter Summary\n\tReferences\n\n\t8 Inner-Loop Control of Momentum Devices\n\t8.1 Spin-Speed Control\n\t8.1.1 CMG Spin-Speed Loops\n\t8.1.2 RWA Spin Speed\n\n\t8.2 Gimbal Rate Loops\n\t8.2.1 Errors Mitigated by Gimbal Rate Loops\n\t8.2.2 Impact on Vehicle Structure\n\t8.2.3 Bandwidth Considerations\n\t8.2.4 Friction and ACS Limit Cycling\n\n\t8.3 Chapter Summary\n\n\t9 Motors in Space\n\t9.1 Motor Technology\n\t9.2 Sizing a DC Motor\n\t9.2.1 Sizing a Brushless DC Motor\n\t9.2.2 Electrical\n\t9.2.3 Numerical Example\n\n\t9.3 Chapter Summary\n\n\t10 Modeling Simulation and Test Beds\n\t10.1 Math Modeling and Computer Simulation\n\t10.1.1 First Principles\n\t10.1.2 What Is the Question?\n\t10.1.3 Modularity\n\t10.1.4 Choices of States\n\t10.1.5 Polarities\n\t10.1.6 Body Models\n\t10.1.7 Attachment Models\n\t10.1.8 Integration\n\n\t10.2 Hardware-in-the-Loop Test Beds\n\t10.2.1 Precision Rotational Air-Bearing Systems\n\t10.2.2 Anisoelasticity\n\t10.2.3 Active Mass Balancing\n\t10.2.4 Controlling the Mass-Balancing System\n\n\t10.3 Chapter Summary\n\tReferences\n\n\tA Extended Equations of Motion for Spacecraft with CMGs\n\tA.1 It Begins with A Particle\n\tA.2 Components\n\tA.3 Reference Frames for Spacecraft n-CMG System\n\tA.4 Spacecraft n-CMG Array Kinematic and Kinetic Equations of Motion\n\tA.4.1 Spacecraft Angular Momentum\n\tA.4.2 CMG Gimbal Angular Momentum\n\tA.4.3 CMG Rotor Angular Momentum\n\tA.4.4 Spacecraft and Actuator Equations of Motion\n\n\tA.5 Summary\n\n\tB Stability Analysis of Momentum-Based Attitude Control Systems\n\tB.1 Lyapunov Analysis\n\tB.2 Rest-to-Rest Attitude Control\n\tB.3 Attitude and Angular Velocity Tracking Control\n\tB.4 Steering Algorithm Effects on Attitude Regulation and Tracking\n\tB.5 Summary\n\n\tIndex\n\n"}